/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/server.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/crypto-browserify/index.js":
/*!*************************************************!*\
  !*** ./node_modules/crypto-browserify/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.randomBytes = exports.rng = exports.pseudoRandomBytes = exports.prng = __webpack_require__(/*! randombytes */ "randombytes")
exports.createHash = exports.Hash = __webpack_require__(/*! create-hash */ "create-hash")
exports.createHmac = exports.Hmac = __webpack_require__(/*! create-hmac */ "create-hmac")

var algos = __webpack_require__(/*! browserify-sign/algos */ "browserify-sign/algos")
var algoKeys = Object.keys(algos)
var hashes = ['sha1', 'sha224', 'sha256', 'sha384', 'sha512', 'md5', 'rmd160'].concat(algoKeys)
exports.getHashes = function () {
  return hashes
}

var p = __webpack_require__(/*! pbkdf2 */ "pbkdf2")
exports.pbkdf2 = p.pbkdf2
exports.pbkdf2Sync = p.pbkdf2Sync

var aes = __webpack_require__(/*! browserify-cipher */ "browserify-cipher")

exports.Cipher = aes.Cipher
exports.createCipher = aes.createCipher
exports.Cipheriv = aes.Cipheriv
exports.createCipheriv = aes.createCipheriv
exports.Decipher = aes.Decipher
exports.createDecipher = aes.createDecipher
exports.Decipheriv = aes.Decipheriv
exports.createDecipheriv = aes.createDecipheriv
exports.getCiphers = aes.getCiphers
exports.listCiphers = aes.listCiphers

var dh = __webpack_require__(/*! diffie-hellman */ "diffie-hellman")

exports.DiffieHellmanGroup = dh.DiffieHellmanGroup
exports.createDiffieHellmanGroup = dh.createDiffieHellmanGroup
exports.getDiffieHellman = dh.getDiffieHellman
exports.createDiffieHellman = dh.createDiffieHellman
exports.DiffieHellman = dh.DiffieHellman

var sign = __webpack_require__(/*! browserify-sign */ "browserify-sign")

exports.createSign = sign.createSign
exports.Sign = sign.Sign
exports.createVerify = sign.createVerify
exports.Verify = sign.Verify

exports.createECDH = __webpack_require__(/*! create-ecdh */ "create-ecdh")

var publicEncrypt = __webpack_require__(/*! public-encrypt */ "public-encrypt")

exports.publicEncrypt = publicEncrypt.publicEncrypt
exports.privateEncrypt = publicEncrypt.privateEncrypt
exports.publicDecrypt = publicEncrypt.publicDecrypt
exports.privateDecrypt = publicEncrypt.privateDecrypt

// the least I can do is make error messages for the rest of the node.js/crypto api.
// ;[
//   'createCredentials'
// ].forEach(function (name) {
//   exports[name] = function () {
//     throw new Error([
//       'sorry, ' + name + ' is not implemented yet',
//       'we accept pull requests',
//       'https://github.com/crypto-browserify/crypto-browserify'
//     ].join('\n'))
//   }
// })

var rf = __webpack_require__(/*! randomfill */ "randomfill")

exports.randomFill = rf.randomFill
exports.randomFillSync = rf.randomFillSync

exports.createCredentials = function () {
  throw new Error([
    'sorry, createCredentials is not implemented yet',
    'we accept pull requests',
    'https://github.com/crypto-browserify/crypto-browserify'
  ].join('\n'))
}

exports.constants = {
  'DH_CHECK_P_NOT_SAFE_PRIME': 2,
  'DH_CHECK_P_NOT_PRIME': 1,
  'DH_UNABLE_TO_CHECK_GENERATOR': 4,
  'DH_NOT_SUITABLE_GENERATOR': 8,
  'NPN_ENABLED': 1,
  'ALPN_ENABLED': 1,
  'RSA_PKCS1_PADDING': 1,
  'RSA_SSLV23_PADDING': 2,
  'RSA_NO_PADDING': 3,
  'RSA_PKCS1_OAEP_PADDING': 4,
  'RSA_X931_PADDING': 5,
  'RSA_PKCS1_PSS_PADDING': 6,
  'POINT_CONVERSION_COMPRESSED': 2,
  'POINT_CONVERSION_UNCOMPRESSED': 4,
  'POINT_CONVERSION_HYBRID': 6
}


/***/ }),

/***/ "./src/api/commodities.js":
/*!********************************!*\
  !*** ./src/api/commodities.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Commodity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Commodity */ "./src/model/Commodity.js");
/* harmony import */ var _model_Comment2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Comment2 */ "./src/model/Comment2.js");
/* harmony import */ var _model_File__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/File */ "./src/model/File.js");
/* harmony import */ var _model_Store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../model/Store */ "./src/model/Store.js");
/* harmony import */ var images__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! images */ "images");
/* harmony import */ var images__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(images__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! fs */ "fs");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_10__);











var upload = multer__WEBPACK_IMPORTED_MODULE_10___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var commodityAPIs = function commodityAPIs(app) {
  // 上传文件图片
  app.post("/api/upload", upload.array('pictures'), function (req, res) {
    try {
      console.log("这个是upload接口里的req.files:", req.files); // req.files.forEach(async f=>{
      //     const path = `${f.destination}/${f.filename}`
      //     const newPath = `${f.destination}/tmp/${f.filename}`
      //     console.log("这个是path:",path)
      //     await images(path).size(48,48).save(newPath);
      // })      

      var filelist = req.files.map(function (f) {
        return f.filename;
      });
      return res.json({
        message: "上传文件成功",
        data: filelist
      });
    } catch (e) {
      return res.status(400).json({
        message: e.message
      });
    }
  }); //发布商品

  app.post('/api/commodities', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, category, price, title, content, filelist, user, fl, newCommodity, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, category = _req$body.category, price = _req$body.price, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是商品接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (category) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品类型"
              }));

            case 9:
              if (price) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品价格"
              }));

            case 11:
              if (title) {
                _context.next = 13;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品标题"
              }));

            case 13:
              if (content) {
                _context.next = 15;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品内容"
              }));

            case 15:
              _context.next = 17;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 17:
              user = _context.sent;

              if (user) {
                _context.next = 20;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 20:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newCommodity = {
                //对象数据类型
                category: category,
                price: price,
                title: title,
                content: content,
                author: user //同时记录上发布商品的作者

              };
              commodity = new _model_Commodity__WEBPACK_IMPORTED_MODULE_4__["default"](newCommodity); //声明一个新的模型

              commodity.pictures = fl;
              _context.next = 27;
              return commodity.save();

            case 27:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.mcommodities.push(commodity);
              _context.next = 30;
              return user.save();

            case 30:
              return _context.abrupt("return", res.json({
                message: "新增商品成功"
              }));

            case 33:
              _context.prev = 33;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 36:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 33]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //获取商品列表
  app.get('/api/commodities', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var commodities;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_4__["default"].find().populate('author', 'username stores nickname') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 3:
              commodities = _context2.sent;
              return _context2.abrupt("return", res.json({
                data: commodities
              }));

            case 7:
              _context2.prev = 7;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 10:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 7]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取特定的商品内容
  app.get('/api/commodities/:cid', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var cid, commodity, comments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入商品的ID"
              }));

            case 4:
              _context3.next = 6;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_4__["default"].findById(cid).populate('author', 'username avatar description nickname').populate('dianzans_commodity');

            case 6:
              commodity = _context3.sent;

              if (commodity) {
                _context3.next = 9;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "该商品不存在"
              }));

            case 9:
              _context3.next = 11;
              return _model_Comment2__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                target: cid
              }).populate('author', 'username avatar description nickname');

            case 11:
              comments = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: {
                  commodity: commodity,
                  comments: comments
                }
              }));

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //修改商品内容
  app.patch('/api/commodities/:cid', upload.array('pictures', 9), /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var cid, _req$body2, username, token, category, price, title, content, user, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, category = _req$body2.category, price = _req$body2.price, title = _req$body2.title, content = _req$body2.content;

              if (username) {
                _context4.next = 7;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (category) {
                _context4.next = 11;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品类型"
              }));

            case 11:
              if (price) {
                _context4.next = 13;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品价格"
              }));

            case 13:
              if (title) {
                _context4.next = 15;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品标题"
              }));

            case 15:
              if (content) {
                _context4.next = 17;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品内容"
              }));

            case 17:
              _context4.next = 19;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 19:
              user = _context4.sent;

              if (user) {
                _context4.next = 22;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 22:
              _context4.next = 24;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_4__["default"].findById(cid);

            case 24:
              commodity = _context4.sent;

              if (cid) {
                _context4.next = 27;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该商品不存在"
              }));

            case 27:
              if (!(String(user._id) !== String(commodity.author))) {
                _context4.next = 29;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "你不是发布该商品的用户"
              }));

            case 29:
              commodity.category = category;
              commodity.price = price;
              commodity.title = title;
              commodity.content = content;
              _context4.next = 35;
              return commodity.save();

            case 35:
              return _context4.abrupt("return", res.json({
                message: "修改商品内容成功"
              }));

            case 38:
              _context4.prev = 38;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 41:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 38]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //删除商品
  app["delete"]('/api/commodities/:cid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var cid, _req$body3, username, token, user, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入商品ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context5.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context5.sent;

              if (user) {
                _context5.next = 14;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context5.next = 16;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_4__["default"].findById(cid);

            case 16:
              commodity = _context5.sent;

              if (cid) {
                _context5.next = 19;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该商品不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(commodity.author))) {
                _context5.next = 21;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "你不是发布该商品的用户"
              }));

            case 21:
              // await Discuss.deleteMany({
              //     target:mongoose.Types.ObjectId(cid)
              // })
              user.mcommodities.pull(commodity);
              _context5.next = 24;
              return user.save();

            case 24:
              _context5.next = 26;
              return commodity.remove();

            case 26:
              return _context5.abrupt("return", res.json({
                message: "成功删除商品"
              }));

            case 29:
              _context5.prev = 29;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 32:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 29]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (commodityAPIs);

/***/ }),

/***/ "./src/api/discusses.js":
/*!******************************!*\
  !*** ./src/api/discusses.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Discuss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Discuss */ "./src/model/Discuss.js");
/* harmony import */ var _model_Comment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Comment */ "./src/model/Comment.js");
/* harmony import */ var _model_Comment2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/Comment2 */ "./src/model/Comment2.js");
/* harmony import */ var _model_Comment3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../model/Comment3 */ "./src/model/Comment3.js");
/* harmony import */ var _model_Comment4__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/Comment4 */ "./src/model/Comment4.js");
/* harmony import */ var _model_Commentstore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/Commentstore */ "./src/model/Commentstore.js");
/* harmony import */ var _model_Groupbuy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../model/Groupbuy */ "./src/model/Groupbuy.js");
/* harmony import */ var _model_Secondhand__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../model/Secondhand */ "./src/model/Secondhand.js");
/* harmony import */ var _model_Commodity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../model/Commodity */ "./src/model/Commodity.js");
/* harmony import */ var _model_Storecommodity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../model/Storecommodity */ "./src/model/Storecommodity.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_14__);















var upload = multer__WEBPACK_IMPORTED_MODULE_14___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var discussAPIs = function discussAPIs(app) {
  //发表闲聊区帖子
  app.post('/api/discusses', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, title, content, filelist, user, fl, newDiscuss, discuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是闲聊帖子接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (title) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 9:
              if (content) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context.sent;

              if (user) {
                _context.next = 16;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newDiscuss = {
                //对象数据类型
                title: title,
                content: content,
                author: user //同时记录上讨论的作者

              };
              discuss = new _model_Discuss__WEBPACK_IMPORTED_MODULE_4__["default"](newDiscuss); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              discuss.pictures = fl;
              _context.next = 23;
              return discuss.save();

            case 23:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.discusses.push(discuss);
              _context.next = 26;
              return user.save();

            case 26:
              return _context.abrupt("return", res.json({
                message: "新增帖子成功"
              }));

            case 29:
              _context.prev = 29;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 32:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 29]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //发布回复信息(回复闲聊区帖子)
  app.post('/api/comments/:did', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var did, _req$body2, username, token, content, user, discuss, newComment, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              did = req.params.did;

              if (did) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入帖子的ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, content = _req$body2.content;

              if (username) {
                _context2.next = 7;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context2.next = 9;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context2.next = 11;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入回复内容"
              }));

            case 11:
              _context2.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context2.sent;

              if (user) {
                _context2.next = 16;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context2.next = 18;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_4__["default"].findById(did);

            case 18:
              discuss = _context2.sent;

              if (discuss) {
                _context2.next = 21;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该帖子不存在"
              }));

            case 21:
              newComment = {
                content: content,
                author: user,
                //同时添加上用户的名称
                target: did //确定回复的对象

              };
              comment = new _model_Comment__WEBPACK_IMPORTED_MODULE_5__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化

              _context2.next = 25;
              return comment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              discuss.comments.push(comment);
              _context2.next = 28;
              return discuss.save();

            case 28:
              return _context2.abrupt("return", res.json({
                message: "新增回复成功"
              }));

            case 31:
              _context2.prev = 31;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 34:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 31]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //针对商品发表评论
  app.post('/api/comments2/:cid', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var cid, _req$body3, username, token, content, user, commodity, newComment, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入商品的ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token, content = _req$body3.content;

              if (username) {
                _context3.next = 7;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context3.next = 9;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context3.next = 11;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context3.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context3.sent;

              if (user) {
                _context3.next = 16;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context3.next = 18;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_12__["default"].findById(cid);

            case 18:
              commodity = _context3.sent;

              if (commodity) {
                _context3.next = 21;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "该商品不存在"
              }));

            case 21:
              newComment = {
                //对象数据类型
                content: content,
                target: cid,
                author: user //同时记录上讨论的作者

              };
              comment = new _model_Comment2__WEBPACK_IMPORTED_MODULE_6__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              _context3.next = 25;
              return comment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              // user.discusses.push(discuss)
              // await user.save()
              commodity.comments.push(comment);
              _context3.next = 28;
              return commodity.save();

            case 28:
              return _context3.abrupt("return", res.json({
                message: "新增评论成功"
              }));

            case 31:
              _context3.prev = 31;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 34:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 31]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //针对团购发表评论
  app.post('/api/comments3/:gid', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var gid, _req$body4, username, token, content, user, groupbuy, newComment, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入团购的ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token, content = _req$body4.content;

              if (username) {
                _context4.next = 7;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context4.next = 11;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context4.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context4.sent;

              if (user) {
                _context4.next = 16;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context4.next = 18;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_10__["default"].findById(gid);

            case 18:
              groupbuy = _context4.sent;

              if (groupbuy) {
                _context4.next = 21;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该团购不存在"
              }));

            case 21:
              newComment = {
                //对象数据类型
                content: content,
                target: gid,
                author: user //同时记录上讨论的作者

              };
              comment = new _model_Comment3__WEBPACK_IMPORTED_MODULE_7__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              _context4.next = 25;
              return comment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              // user.discusses.push(discuss)
              // await user.save()
              groupbuy.comments.push(comment);
              _context4.next = 28;
              return groupbuy.save();

            case 28:
              return _context4.abrupt("return", res.json({
                message: "新增评论成功"
              }));

            case 31:
              _context4.prev = 31;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 34:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 31]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //针对二手发表讨论
  app.post('/api/comments4/:sid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var sid, _req$body5, username, token, content, user, secondhand, newComment, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入二手的ID"
              }));

            case 4:
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token, content = _req$body5.content;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context5.next = 11;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context5.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context5.sent;

              if (user) {
                _context5.next = 16;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context5.next = 18;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_11__["default"].findById(sid);

            case 18:
              secondhand = _context5.sent;

              if (secondhand) {
                _context5.next = 21;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该二手不存在"
              }));

            case 21:
              newComment = {
                //对象数据类型
                content: content,
                target: sid,
                author: user //同时记录上讨论的作者

              };
              comment = new _model_Comment4__WEBPACK_IMPORTED_MODULE_8__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              _context5.next = 25;
              return comment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              // user.discusses.push(discuss)
              // await user.save()
              secondhand.comments.push(comment);
              _context5.next = 28;
              return secondhand.save();

            case 28:
              return _context5.abrupt("return", res.json({
                message: "新增评论成功"
              }));

            case 31:
              _context5.prev = 31;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 34:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 31]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //针对商铺商品发表讨论
  app.post('/api/commentstore/:sid', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var sid, _req$body6, username, token, content, user, storecommodity, newComment, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入商铺的ID"
              }));

            case 4:
              _req$body6 = req.body, username = _req$body6.username, token = _req$body6.token, content = _req$body6.content;

              if (username) {
                _context6.next = 7;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context6.next = 9;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context6.next = 11;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context6.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context6.sent;

              if (user) {
                _context6.next = 16;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context6.next = 18;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_13__["default"].findById(sid);

            case 18:
              storecommodity = _context6.sent;

              if (storecommodity) {
                _context6.next = 21;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "该商铺商品不存在"
              }));

            case 21:
              newComment = {
                //对象数据类型
                content: content,
                target: sid,
                author: user //同时记录上讨论的作者

              };
              comment = new _model_Commentstore__WEBPACK_IMPORTED_MODULE_9__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              _context6.next = 25;
              return comment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              storecommodity.comments.push(comment);
              _context6.next = 28;
              return storecommodity.save();

            case 28:
              return _context6.abrupt("return", res.json({
                message: "新增商铺商品评论成功"
              }));

            case 31:
              _context6.prev = 31;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 34:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 31]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //获取闲聊区讨论列表
  app.get('/api/discusses', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var discusses;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              _context7.next = 3;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_4__["default"].find().populate('author', 'username avatar nickname') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 3:
              discusses = _context7.sent;
              return _context7.abrupt("return", res.json({
                data: discusses
              }));

            case 7:
              _context7.prev = 7;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 10:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 7]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }()), //获取特定讨论内容
  app.get('/api/discusses/:did', /*#__PURE__*/function () {
    var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8(req, res) {
      var did, discuss, comments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {
        while (1) {
          switch (_context8.prev = _context8.next) {
            case 0:
              _context8.prev = 0;
              did = req.params.did;

              if (did) {
                _context8.next = 4;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _context8.next = 6;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_4__["default"].findById(did).populate('author', 'username avatar description nickname') //用findById可以直接通过ID来寻找目标是否存在
              .populate('dianzans_discuss');

            case 6:
              discuss = _context8.sent;

              if (discuss) {
                _context8.next = 9;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "该讨论不存在"
              }));

            case 9:
              _context8.next = 11;
              return _model_Comment__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                target: did
              }).populate('author', 'username avatar description nickname');

            case 11:
              comments = _context8.sent;
              return _context8.abrupt("return", res.json({
                data: {
                  //要获取讨论和回复的内容，不是单个所有再加一个{}表对象
                  discuss: discuss,
                  comments: comments
                }
              }));

            case 15:
              _context8.prev = 15;
              _context8.t0 = _context8["catch"](0);
              return _context8.abrupt("return", res.status(400).json({
                message: _context8.t0.message
              }));

            case 18:
            case "end":
              return _context8.stop();
          }
        }
      }, _callee8, null, [[0, 15]]);
    }));

    return function (_x15, _x16) {
      return _ref8.apply(this, arguments);
    };
  }()), //修改讨论信息
  app.patch('/api/discusses/:did', /*#__PURE__*/function () {
    var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee9(req, res) {
      var did, _req$body7, username, token, title, content, user, discuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee9$(_context9) {
        while (1) {
          switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              did = req.params.did;

              if (did) {
                _context9.next = 4;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body7 = req.body, username = _req$body7.username, token = _req$body7.token, title = _req$body7.title, content = _req$body7.content;

              if (username) {
                _context9.next = 7;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context9.next = 9;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (title) {
                _context9.next = 11;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 11:
              if (content) {
                _context9.next = 13;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 13:
              _context9.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context9.sent;

              if (user) {
                _context9.next = 18;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context9.next = 20;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_4__["default"].findById(did);

            case 20:
              discuss = _context9.sent;

              if (discuss) {
                _context9.next = 23;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "该讨论不存在"
              }));

            case 23:
              if (!(String(user._id) !== String(discuss.author))) {
                _context9.next = 25;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "你不是该讨论的作者"
              }));

            case 25:
              discuss.title = title;
              discuss.content = content;
              _context9.next = 29;
              return discuss.save();

            case 29:
              return _context9.abrupt("return", res.json({
                message: "修改讨论内容成功"
              }));

            case 32:
              _context9.prev = 32;
              _context9.t0 = _context9["catch"](0);
              return _context9.abrupt("return", res.status(400).json({
                message: _context9.t0.message
              }));

            case 35:
            case "end":
              return _context9.stop();
          }
        }
      }, _callee9, null, [[0, 32]]);
    }));

    return function (_x17, _x18) {
      return _ref9.apply(this, arguments);
    };
  }()), //删除讨论内容
  app["delete"]('/api/discusses/:did', /*#__PURE__*/function () {
    var _ref10 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee10(req, res) {
      var did, _req$body8, username, token, user, discuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee10$(_context10) {
        while (1) {
          switch (_context10.prev = _context10.next) {
            case 0:
              _context10.prev = 0;
              did = req.params.did;

              if (did) {
                _context10.next = 4;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body8 = req.body, username = _req$body8.username, token = _req$body8.token;

              if (username) {
                _context10.next = 7;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context10.next = 9;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context10.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context10.sent;

              if (user) {
                _context10.next = 14;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context10.next = 16;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_4__["default"].findById(did);

            case 16:
              discuss = _context10.sent;

              if (discuss) {
                _context10.next = 19;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "该讨论不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(discuss.author))) {
                _context10.next = 21;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "你不是该讨论的作者"
              }));

            case 21:
              _context10.next = 23;
              return _model_Comment__WEBPACK_IMPORTED_MODULE_5__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(did)
              });

            case 23:
              user.discusses.pull(discuss);
              _context10.next = 26;
              return user.save();

            case 26:
              _context10.next = 28;
              return discuss.remove();

            case 28:
              return _context10.abrupt("return", res.json({
                message: "成功删除讨论"
              }));

            case 31:
              _context10.prev = 31;
              _context10.t0 = _context10["catch"](0);
              return _context10.abrupt("return", res.status(400).json({
                message: _context10.t0.message
              }));

            case 34:
            case "end":
              return _context10.stop();
          }
        }
      }, _callee10, null, [[0, 31]]);
    }));

    return function (_x19, _x20) {
      return _ref10.apply(this, arguments);
    };
  }()), //删除回复内容
  app["delete"]('/api/comments/:cid', /*#__PURE__*/function () {
    var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee11(req, res) {
      var cid, _req$body9, username, token, user, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee11$(_context11) {
        while (1) {
          switch (_context11.prev = _context11.next) {
            case 0:
              _context11.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context11.next = 4;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body9 = req.body, username = _req$body9.username, token = _req$body9.token;

              if (username) {
                _context11.next = 7;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context11.next = 9;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context11.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context11.sent;

              if (user) {
                _context11.next = 14;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context11.next = 16;
              return _model_Comment__WEBPACK_IMPORTED_MODULE_5__["default"].findById(cid);

            case 16:
              comment = _context11.sent;

              if (comment) {
                _context11.next = 19;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(comment.author))) {
                _context11.next = 21;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context11.next = 23;
              return comment.remove();

            case 23:
              return _context11.abrupt("return", res.json({
                message: "成功删除回复"
              }));

            case 26:
              _context11.prev = 26;
              _context11.t0 = _context11["catch"](0);
              return _context11.abrupt("return", res.status(400).json({
                message: _context11.t0.message
              }));

            case 29:
            case "end":
              return _context11.stop();
          }
        }
      }, _callee11, null, [[0, 26]]);
    }));

    return function (_x21, _x22) {
      return _ref11.apply(this, arguments);
    };
  }()), //删除针对商品的回复内容
  app["delete"]('/api/comments2/:cid', /*#__PURE__*/function () {
    var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee12(req, res) {
      var cid, _req$body10, username, token, user, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee12$(_context12) {
        while (1) {
          switch (_context12.prev = _context12.next) {
            case 0:
              _context12.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context12.next = 4;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body10 = req.body, username = _req$body10.username, token = _req$body10.token;

              if (username) {
                _context12.next = 7;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context12.next = 9;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context12.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context12.sent;

              if (user) {
                _context12.next = 14;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context12.next = 16;
              return _model_Comment2__WEBPACK_IMPORTED_MODULE_6__["default"].findById(cid);

            case 16:
              comment = _context12.sent;

              if (comment) {
                _context12.next = 19;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(comment.author))) {
                _context12.next = 21;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context12.next = 23;
              return comment.remove();

            case 23:
              return _context12.abrupt("return", res.json({
                message: "成功删除评论"
              }));

            case 26:
              _context12.prev = 26;
              _context12.t0 = _context12["catch"](0);
              return _context12.abrupt("return", res.status(400).json({
                message: _context12.t0.message
              }));

            case 29:
            case "end":
              return _context12.stop();
          }
        }
      }, _callee12, null, [[0, 26]]);
    }));

    return function (_x23, _x24) {
      return _ref12.apply(this, arguments);
    };
  }()); //删除针对商品的回复内容

  app["delete"]('/api/comments3/:cid', /*#__PURE__*/function () {
    var _ref13 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee13(req, res) {
      var cid, _req$body11, username, token, user, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee13$(_context13) {
        while (1) {
          switch (_context13.prev = _context13.next) {
            case 0:
              _context13.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context13.next = 4;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body11 = req.body, username = _req$body11.username, token = _req$body11.token;

              if (username) {
                _context13.next = 7;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context13.next = 9;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context13.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context13.sent;

              if (user) {
                _context13.next = 14;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context13.next = 16;
              return _model_Comment3__WEBPACK_IMPORTED_MODULE_7__["default"].findById(cid);

            case 16:
              comment = _context13.sent;

              if (comment) {
                _context13.next = 19;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(comment.author))) {
                _context13.next = 21;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context13.next = 23;
              return comment.remove();

            case 23:
              return _context13.abrupt("return", res.json({
                message: "成功删除评论"
              }));

            case 26:
              _context13.prev = 26;
              _context13.t0 = _context13["catch"](0);
              return _context13.abrupt("return", res.status(400).json({
                message: _context13.t0.message
              }));

            case 29:
            case "end":
              return _context13.stop();
          }
        }
      }, _callee13, null, [[0, 26]]);
    }));

    return function (_x25, _x26) {
      return _ref13.apply(this, arguments);
    };
  }()), //删除针对商品的回复内容
  app["delete"]('/api/comments4/:cid', /*#__PURE__*/function () {
    var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee14(req, res) {
      var cid, _req$body12, username, token, user, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee14$(_context14) {
        while (1) {
          switch (_context14.prev = _context14.next) {
            case 0:
              _context14.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context14.next = 4;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body12 = req.body, username = _req$body12.username, token = _req$body12.token;

              if (username) {
                _context14.next = 7;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context14.next = 9;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context14.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context14.sent;

              if (user) {
                _context14.next = 14;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context14.next = 16;
              return _model_Comment4__WEBPACK_IMPORTED_MODULE_8__["default"].findById(cid);

            case 16:
              comment = _context14.sent;

              if (comment) {
                _context14.next = 19;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(comment.author))) {
                _context14.next = 21;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context14.next = 23;
              return comment.remove();

            case 23:
              return _context14.abrupt("return", res.json({
                message: "成功删除评论"
              }));

            case 26:
              _context14.prev = 26;
              _context14.t0 = _context14["catch"](0);
              return _context14.abrupt("return", res.status(400).json({
                message: _context14.t0.message
              }));

            case 29:
            case "end":
              return _context14.stop();
          }
        }
      }, _callee14, null, [[0, 26]]);
    }));

    return function (_x27, _x28) {
      return _ref14.apply(this, arguments);
    };
  }()), //删除针对商品的回复内容
  app["delete"]('/api/commentstore/:cid', /*#__PURE__*/function () {
    var _ref15 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee15(req, res) {
      var cid, _req$body13, username, token, user, comment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee15$(_context15) {
        while (1) {
          switch (_context15.prev = _context15.next) {
            case 0:
              _context15.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context15.next = 4;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body13 = req.body, username = _req$body13.username, token = _req$body13.token;

              if (username) {
                _context15.next = 7;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context15.next = 9;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context15.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context15.sent;

              if (user) {
                _context15.next = 14;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context15.next = 16;
              return _model_Commentstore__WEBPACK_IMPORTED_MODULE_9__["default"].findById(cid);

            case 16:
              comment = _context15.sent;

              if (comment) {
                _context15.next = 19;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(comment.author))) {
                _context15.next = 21;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context15.next = 23;
              return comment.remove();

            case 23:
              return _context15.abrupt("return", res.json({
                message: "成功删除评论"
              }));

            case 26:
              _context15.prev = 26;
              _context15.t0 = _context15["catch"](0);
              return _context15.abrupt("return", res.status(400).json({
                message: _context15.t0.message
              }));

            case 29:
            case "end":
              return _context15.stop();
          }
        }
      }, _callee15, null, [[0, 26]]);
    }));

    return function (_x29, _x30) {
      return _ref15.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (discussAPIs);

/***/ }),

/***/ "./src/api/groupbuys.js":
/*!******************************!*\
  !*** ./src/api/groupbuys.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Groupbuy */ "./src/model/Groupbuy.js");
/* harmony import */ var _model_Comment3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Comment3 */ "./src/model/Comment3.js");
/* harmony import */ var _model_File__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/File */ "./src/model/File.js");
/* harmony import */ var _model_Store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../model/Store */ "./src/model/Store.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_8__);









var upload = multer__WEBPACK_IMPORTED_MODULE_8___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var groupbuyAPIs = function groupbuyAPIs(app) {
  //发布团购
  app.post('/api/groupbuys', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, category, motoprice, price, title, content, filelist, user, fl, newGroupbuy, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, category = _req$body.category, motoprice = _req$body.motoprice, price = _req$body.price, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是团购接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (category) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入团购类型"
              }));

            case 9:
              if (motoprice) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品原价"
              }));

            case 11:
              if (price) {
                _context.next = 13;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入团购价格"
              }));

            case 13:
              if (title) {
                _context.next = 15;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入团购标题"
              }));

            case 15:
              if (content) {
                _context.next = 17;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入团购内容"
              }));

            case 17:
              _context.next = 19;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 19:
              user = _context.sent;

              if (user) {
                _context.next = 22;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 22:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newGroupbuy = {
                //对象数据类型
                category: category,
                motoprice: motoprice,
                price: price,
                title: title,
                content: content,
                // number:number,
                author: user //同时记录上发布团购的作者

              };
              groupbuy = new _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"](newGroupbuy); //声明一个新的模型

              groupbuy.pictures = fl;
              _context.next = 29;
              return groupbuy.save();

            case 29:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.groupbuys.push(groupbuy);
              _context.next = 32;
              return user.save();

            case 32:
              return _context.abrupt("return", res.json({
                message: "发起团购成功"
              }));

            case 35:
              _context.prev = 35;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 38:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 35]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //发布商铺里的团购
  // app.post('/api/groupbuys/:sid',upload.array('pictures',9),async (req,res)=>{//upload.array('picture',5)
  //     try {
  //         const {sid} = req.params
  //         if(!sid){
  //             return res.status(400).json({
  //                 message:"没有输入商铺ID"
  //             })
  //         }
  //         const {username,token,storename,s_token,category,price,title,content,number} = req.body
  //         if(!username){
  //             return res.status(400).json({
  //                 message:"没有获取到用户名"
  //             })
  //         }
  //         if(!token){
  //             return res.status(400).json({
  //                 message:"没有获取到token"
  //             })
  //         }
  //         if(!storename){
  //             return res.status(400).json({
  //                 message:"没有获取到商铺名"
  //             })
  //         }
  //         if(!s_token){
  //             return res.status(400).json({
  //                 message:"没有获取到s_token"
  //             })
  //         }
  //         if(!category){
  //             return res.status(400).json({
  //                 message:"没有输入团购类型"
  //             })
  //         }
  //         if(!price){
  //             return res.status(400).json({
  //                 message:"没有输入团购价格"
  //             })
  //         }
  //         if(!title){
  //             return res.status(400).json({
  //                 message:"没有输入团购标题"
  //             })
  //         }
  //         if(!content){
  //             return res.status(400).json({
  //                 message:"没有输入团购内容"
  //             })
  //         }
  //         if(!number){
  //             return res.status(400).json({
  //                 message:"没有输入开团人数"
  //             })
  //         }
  //         const user = await User.findOne({
  //             username:username,
  //             token:token
  //         })
  //         if(!user){
  //             return res.status(400).json({
  //                 message:"token已过期，请重新登陆"
  //             })
  //         }
  //         const store = await Store.findOne({
  //             storename:storename,
  //             s_token:s_token
  //         })
  //         if(!store){
  //             return res.status(400).json({
  //                 message:"s_token已过期，请重新登陆"
  //             })
  //         }
  //         const newGroupbuy = {//对象数据类型
  //             category:category,
  //             price:price,
  //             title:title,
  //             content:content,
  //             number,
  //             author:user,//同时记录上发布团购的作者
  //             target:sid
  //         }
  //         const groupbuy = new Groupbuy(newGroupbuy)//声明一个新的模型
  //         if(req.files){
  //             req.files.forEach(async (item,index)=>{
  //                 // console.log(item);
  //                 const file = new File({
  //                     filename:item.filename,
  //                     mimetype:item.mimetype,
  //                     size:item.size,
  //                     author:user
  //                     })
  //                 groupbuy.pictures.push(file)
  //                 await file.save()
  //             })
  //         }
  //         await groupbuy.save()//save存储进数据库，因为用到数据库处理所以前面加一个await
  //         user.groupbuys.push(groupbuy)//存进user的发布团购模型里
  //         await user.save()
  //         store.cinformations.push(groupbuy)//存进store的团购信息模型里
  //         await store.save()
  //         return res.json({
  //             message:"商铺发起团购成功"
  //         })
  //     } catch (e) {
  //         return res.status(400).json({
  //             message:e.message
  //         })
  //     }
  // }),
  //获取团购列表
  app.get('/api/groupbuys', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var groupbuys;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"].find().populate('author', 'username stores') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 3:
              groupbuys = _context2.sent;
              return _context2.abrupt("return", res.json({
                data: groupbuys
              }));

            case 7:
              _context2.prev = 7;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 10:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 7]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取特定的团购内容
  app.get('/api/groupbuys/:gid', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var gid, groupbuy, comments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入团购的ID"
              }));

            case 4:
              _context3.next = 6;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"].findById(gid).populate('author', 'username avatar description nickname').populate('dianzans_groupbuy');

            case 6:
              groupbuy = _context3.sent;

              if (groupbuy) {
                _context3.next = 9;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "该团购不存在"
              }));

            case 9:
              _context3.next = 11;
              return _model_Comment3__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                target: gid
              }).populate('author', 'username avatar description nickname');

            case 11:
              comments = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: {
                  groupbuy: groupbuy,
                  comments: comments
                }
              }));

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //修改团购内容
  app.patch('/api/groupbuys/:gid', upload.array('pictures', 9), /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var gid, _req$body2, username, token, category, motoprice, price, title, content, user, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入团购ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, category = _req$body2.category, motoprice = _req$body2.motoprice, price = _req$body2.price, title = _req$body2.title, content = _req$body2.content;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (category) {
                _context5.next = 11;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入团购类型"
              }));

            case 11:
              if (motoprice) {
                _context5.next = 13;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入商品原价"
              }));

            case 13:
              if (price) {
                _context5.next = 15;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入团购价格"
              }));

            case 15:
              if (title) {
                _context5.next = 17;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入团购标题"
              }));

            case 17:
              if (content) {
                _context5.next = 19;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入团购内容"
              }));

            case 19:
              _context5.next = 21;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 21:
              user = _context5.sent;

              if (user) {
                _context5.next = 24;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 24:
              _context5.next = 26;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"].findById(gid);

            case 26:
              groupbuy = _context5.sent;

              if (gid) {
                _context5.next = 29;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该团购不存在"
              }));

            case 29:
              if (!(String(user._id) !== String(groupbuy.author))) {
                _context5.next = 31;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "你不是发布该团购的用户"
              }));

            case 31:
              if (req.files) {
                req.files.forEach( /*#__PURE__*/function () {
                  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(item, index) {
                    var file;
                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
                      while (1) {
                        switch (_context4.prev = _context4.next) {
                          case 0:
                            // console.log(item);
                            file = new _model_File__WEBPACK_IMPORTED_MODULE_6__["default"]({
                              filename: item.filename,
                              mimetype: item.mimetype,
                              size: item.size,
                              author: user
                            });
                            groupbuy.pictures.push(file);
                            _context4.next = 4;
                            return file.save();

                          case 4:
                          case "end":
                            return _context4.stop();
                        }
                      }
                    }, _callee4);
                  }));

                  return function (_x9, _x10) {
                    return _ref5.apply(this, arguments);
                  };
                }());
              }

              groupbuy.category = category;
              groupbuy.motoprice = motoprice;
              groupbuy.price = price;
              groupbuy.title = title;
              groupbuy.content = content; // groupbuy.number = number

              _context5.next = 39;
              return groupbuy.save();

            case 39:
              return _context5.abrupt("return", res.json({
                message: "修改团购内容成功"
              }));

            case 42:
              _context5.prev = 42;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 45:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 42]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //删除团购
  app["delete"]('/api/groupbuys/:gid', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var gid, _req$body3, username, token, user, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入团购ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token;

              if (username) {
                _context6.next = 7;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context6.next = 9;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context6.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context6.sent;

              if (user) {
                _context6.next = 14;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context6.next = 16;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"].findById(gid);

            case 16:
              groupbuy = _context6.sent;

              if (gid) {
                _context6.next = 19;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "该团购不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(groupbuy.author))) {
                _context6.next = 21;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "你不是发布该团购的用户"
              }));

            case 21:
              user.groupbuys.pull(groupbuy);
              _context6.next = 24;
              return user.save();

            case 24:
              _context6.next = 26;
              return groupbuy.remove();

            case 26:
              return _context6.abrupt("return", res.json({
                message: "成功删除团购"
              }));

            case 29:
              _context6.prev = 29;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 32:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 29]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //删除商铺里的团购
  app["delete"]('/api/stores/:gid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var gid, _req$body4, username, token, storename, s_token, user, store, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入团购ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token, storename = _req$body4.storename, s_token = _req$body4.s_token;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (storename) {
                _context7.next = 11;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 11:
              if (s_token) {
                _context7.next = 13;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 13:
              _context7.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context7.sent;

              if (user) {
                _context7.next = 18;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context7.next = 20;
              return _model_Store__WEBPACK_IMPORTED_MODULE_7__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 20:
              store = _context7.sent;

              if (store) {
                _context7.next = 23;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 23:
              _context7.next = 25;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"].findById(gid);

            case 25:
              groupbuy = _context7.sent;

              if (gid) {
                _context7.next = 28;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该团购不存在"
              }));

            case 28:
              if (!(String(user._id) !== String(groupbuy.author))) {
                _context7.next = 30;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你不是发布该团购的商家"
              }));

            case 30:
              _context7.next = 32;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_4__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(gid)
              });

            case 32:
              user.groupbuys.pull(groupbuy);
              _context7.next = 35;
              return user.save();

            case 35:
              _context7.next = 37;
              return groupbuy.remove();

            case 37:
              return _context7.abrupt("return", res.json({
                message: "成功删除商铺团购"
              }));

            case 40:
              _context7.prev = 40;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 43:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 40]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (groupbuyAPIs);

/***/ }),

/***/ "./src/api/helpdiscusses.js":
/*!**********************************!*\
  !*** ./src/api/helpdiscusses.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Helpcomment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Helpcomment */ "./src/model/Helpcomment.js");
/* harmony import */ var _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Helpdiscuss */ "./src/model/Helpdiscuss.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_6__);







var upload = multer__WEBPACK_IMPORTED_MODULE_6___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var HelpdisAPIs = function HelpdisAPIs(app) {
  //发表求助区帖子
  app.post('/api/helpdiscusses', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, title, content, filelist, user, fl, newDiscuss, helpdiscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是求助帖子接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (title) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 9:
              if (content) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context.sent;

              if (user) {
                _context.next = 16;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newDiscuss = {
                //对象数据类型
                title: title,
                content: content,
                author: user //同时记录上讨论的作者

              };
              helpdiscuss = new _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__["default"](newDiscuss); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              helpdiscuss.pictures = fl;
              _context.next = 23;
              return helpdiscuss.save();

            case 23:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.helpdiscusses.push(helpdiscuss);
              _context.next = 26;
              return user.save();

            case 26:
              return _context.abrupt("return", res.json({
                message: "新增求助帖子成功"
              }));

            case 29:
              _context.prev = 29;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 32:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 29]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //发布回复信息(回复求助区帖子)
  app.post('/api/helpcomments/:hid', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var hid, _req$body2, username, token, content, user, helpdiscuss, newComment, helpcomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入帖子的ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, content = _req$body2.content;

              if (username) {
                _context2.next = 7;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context2.next = 9;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context2.next = 11;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入回复内容"
              }));

            case 11:
              _context2.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context2.sent;

              if (user) {
                _context2.next = 16;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context2.next = 18;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(hid);

            case 18:
              helpdiscuss = _context2.sent;

              if (helpdiscuss) {
                _context2.next = 21;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该求助帖子不存在"
              }));

            case 21:
              newComment = {
                content: content,
                author: user,
                //同时添加上用户的名称
                target: hid //确定回复的对象

              };
              helpcomment = new _model_Helpcomment__WEBPACK_IMPORTED_MODULE_4__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化

              _context2.next = 25;
              return helpcomment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              helpdiscuss.comments.push(helpcomment);
              _context2.next = 28;
              return helpdiscuss.save();

            case 28:
              return _context2.abrupt("return", res.json({
                message: "新增回复成功"
              }));

            case 31:
              _context2.prev = 31;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 34:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 31]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取求助区讨论列表
  app.get('/api/helpdiscusses', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var helpdiscusses;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__["default"].find().populate('author', 'username avatar nickname');

            case 3:
              helpdiscusses = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: helpdiscusses
              }));

            case 7:
              _context3.prev = 7;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 10:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 7]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //获取特定求助讨论内容
  app.get('/api/helpdiscusses/:hid', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var hid, helpdiscuss, helpcomments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _context4.next = 6;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(hid).populate('author', 'username avatar description nickname') //用findById可以直接通过ID来寻找目标是否存在
              .populate('dianzans_helpdiscuss');

            case 6:
              helpdiscuss = _context4.sent;

              if (helpdiscuss) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该求助讨论不存在"
              }));

            case 9:
              _context4.next = 11;
              return _model_Helpcomment__WEBPACK_IMPORTED_MODULE_4__["default"].find({
                target: hid
              }).populate('author', 'username avatar description nickname');

            case 11:
              helpcomments = _context4.sent;
              return _context4.abrupt("return", res.json({
                data: {
                  //要获取讨论和回复的内容，不是单个所有再加一个{}表对象
                  helpdiscuss: helpdiscuss,
                  helpcomments: helpcomments
                }
              }));

            case 15:
              _context4.prev = 15;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 18:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 15]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //修改讨论信息
  app.patch('/api/helpdiscusses/:hid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var hid, _req$body3, username, token, title, content, user, helpdiscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token, title = _req$body3.title, content = _req$body3.content;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (title) {
                _context5.next = 11;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 11:
              if (content) {
                _context5.next = 13;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 13:
              _context5.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context5.sent;

              if (user) {
                _context5.next = 18;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context5.next = 20;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(hid);

            case 20:
              helpdiscuss = _context5.sent;

              if (helpdiscuss) {
                _context5.next = 23;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该求助讨论不存在"
              }));

            case 23:
              if (!(String(user._id) !== String(helpdiscuss.author))) {
                _context5.next = 25;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "你不是该求助讨论的作者"
              }));

            case 25:
              helpdiscuss.title = title;
              helpdiscuss.content = content;
              _context5.next = 29;
              return helpdiscuss.save();

            case 29:
              return _context5.abrupt("return", res.json({
                message: "修改求助讨论内容成功"
              }));

            case 32:
              _context5.prev = 32;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 35:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 32]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //删除讨论内容
  app["delete"]('/api/helpdiscusses/:hid', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var hid, _req$body4, username, token, user, helpdiscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token;

              if (username) {
                _context6.next = 7;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context6.next = 9;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context6.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context6.sent;

              if (user) {
                _context6.next = 14;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context6.next = 16;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(hid);

            case 16:
              helpdiscuss = _context6.sent;

              if (helpdiscuss) {
                _context6.next = 19;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "该求助讨论不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(helpdiscuss.author))) {
                _context6.next = 21;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "你不是该求助讨论的作者"
              }));

            case 21:
              _context6.next = 23;
              return _model_Helpcomment__WEBPACK_IMPORTED_MODULE_4__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(hid)
              });

            case 23:
              user.helpdiscusses.pull(helpdiscuss);
              _context6.next = 26;
              return user.save();

            case 26:
              _context6.next = 28;
              return helpdiscuss.remove();

            case 28:
              return _context6.abrupt("return", res.json({
                message: "成功删除求助讨论"
              }));

            case 31:
              _context6.prev = 31;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 34:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 31]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //删除回复内容
  app["delete"]('/api/helpcomments/:hid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var hid, _req$body5, username, token, user, helpcomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context7.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context7.sent;

              if (user) {
                _context7.next = 14;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context7.next = 16;
              return _model_Helpcomment__WEBPACK_IMPORTED_MODULE_4__["default"].findById(hid);

            case 16:
              helpcomment = _context7.sent;

              if (helpcomment) {
                _context7.next = 19;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(helpcomment.author))) {
                _context7.next = 21;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context7.next = 23;
              return helpcomment.remove();

            case 23:
              return _context7.abrupt("return", res.json({
                message: "成功删除回复"
              }));

            case 26:
              _context7.prev = 26;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 29:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 26]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (HelpdisAPIs);

/***/ }),

/***/ "./src/api/likediscusses.js":
/*!**********************************!*\
  !*** ./src/api/likediscusses.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Likecomment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Likecomment */ "./src/model/Likecomment.js");
/* harmony import */ var _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Likediscuss */ "./src/model/Likediscuss.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_6__);







var upload = multer__WEBPACK_IMPORTED_MODULE_6___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var likedisAPIs = function likedisAPIs(app) {
  //发表种草区帖子
  app.post('/api/likediscusses', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, title, content, filelist, user, fl, newDiscuss, likediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是种草帖子接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (title) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 9:
              if (content) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context.sent;

              if (user) {
                _context.next = 16;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newDiscuss = {
                //对象数据类型
                title: title,
                content: content,
                author: user //同时记录上讨论的作者

              };
              likediscuss = new _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__["default"](newDiscuss); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              likediscuss.pictures = fl;
              _context.next = 23;
              return likediscuss.save();

            case 23:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.likediscusses.push(likediscuss);
              _context.next = 26;
              return user.save();

            case 26:
              return _context.abrupt("return", res.json({
                message: "新增种草帖子成功"
              }));

            case 29:
              _context.prev = 29;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 32:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 29]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //发布回复信息(回复求助区帖子)
  app.post('/api/likecomments/:lid', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var lid, _req$body2, username, token, content, user, likediscuss, newComment, likecomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入帖子的ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, content = _req$body2.content;

              if (username) {
                _context2.next = 7;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context2.next = 9;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context2.next = 11;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入回复内容"
              }));

            case 11:
              _context2.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context2.sent;

              if (user) {
                _context2.next = 16;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context2.next = 18;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(lid);

            case 18:
              likediscuss = _context2.sent;

              if (likediscuss) {
                _context2.next = 21;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该种草帖子不存在"
              }));

            case 21:
              newComment = {
                content: content,
                author: user,
                //同时添加上用户的名称
                target: lid //确定回复的对象

              };
              likecomment = new _model_Likecomment__WEBPACK_IMPORTED_MODULE_4__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化

              _context2.next = 25;
              return likecomment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              likediscuss.comments.push(likecomment);
              _context2.next = 28;
              return likediscuss.save();

            case 28:
              return _context2.abrupt("return", res.json({
                message: "新增回复成功"
              }));

            case 31:
              _context2.prev = 31;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 34:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 31]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取求助区讨论列表
  app.get('/api/likediscusses', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var likediscusses;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].find().populate('author', 'username avatar nickname');

            case 3:
              likediscusses = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: likediscusses
              }));

            case 7:
              _context3.prev = 7;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 10:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 7]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //获取特定求助讨论内容
  app.get('/api/likediscusses/:lid', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var lid, likediscuss, likecomments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _context4.next = 6;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(lid).populate('author', 'username avatar description nickname') //用findById可以直接通过ID来寻找目标是否存在
              .populate('dianzans_likediscuss');

            case 6:
              likediscuss = _context4.sent;

              if (likediscuss) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该种草讨论不存在"
              }));

            case 9:
              _context4.next = 11;
              return _model_Likecomment__WEBPACK_IMPORTED_MODULE_4__["default"].find({
                target: lid
              }).populate('author', 'username avatar description nickname');

            case 11:
              likecomments = _context4.sent;
              return _context4.abrupt("return", res.json({
                data: {
                  //要获取讨论和回复的内容，不是单个所有再加一个{}表对象
                  likediscuss: likediscuss,
                  likecomments: likecomments
                }
              }));

            case 15:
              _context4.prev = 15;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 18:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 15]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //修改讨论信息
  app.patch('/api/likediscusses/:lid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var lid, _req$body3, username, token, title, content, user, likediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token, title = _req$body3.title, content = _req$body3.content;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (title) {
                _context5.next = 11;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 11:
              if (content) {
                _context5.next = 13;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 13:
              _context5.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context5.sent;

              if (user) {
                _context5.next = 18;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context5.next = 20;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(lid);

            case 20:
              likediscuss = _context5.sent;

              if (likediscuss) {
                _context5.next = 23;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该种草讨论不存在"
              }));

            case 23:
              if (!(String(user._id) !== String(likediscuss.author))) {
                _context5.next = 25;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "你不是该种草讨论的作者"
              }));

            case 25:
              likediscuss.title = title;
              likediscuss.content = content;
              _context5.next = 29;
              return likediscuss.save();

            case 29:
              return _context5.abrupt("return", res.json({
                message: "修改种草讨论内容成功"
              }));

            case 32:
              _context5.prev = 32;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 35:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 32]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //删除讨论内容
  app["delete"]('/api/likediscusses/:lid', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var lid, _req$body4, username, token, user, likediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token;

              if (username) {
                _context6.next = 7;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context6.next = 9;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context6.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context6.sent;

              if (user) {
                _context6.next = 14;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context6.next = 16;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(lid);

            case 16:
              likediscuss = _context6.sent;

              if (likediscuss) {
                _context6.next = 19;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "该种草讨论不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(likediscuss.author))) {
                _context6.next = 21;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "你不是该求助讨论的作者"
              }));

            case 21:
              _context6.next = 23;
              return _model_Likecomment__WEBPACK_IMPORTED_MODULE_4__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(lid)
              });

            case 23:
              user.likediscusses.pull(likediscuss);
              _context6.next = 26;
              return user.save();

            case 26:
              _context6.next = 28;
              return likediscuss.remove();

            case 28:
              return _context6.abrupt("return", res.json({
                message: "成功删除求助讨论"
              }));

            case 31:
              _context6.prev = 31;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 34:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 31]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //删除回复内容
  app["delete"]('/api/likecomments/:lid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var lid, _req$body5, username, token, user, likecomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context7.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context7.sent;

              if (user) {
                _context7.next = 14;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context7.next = 16;
              return _model_Likecomment__WEBPACK_IMPORTED_MODULE_4__["default"].findById(lid);

            case 16:
              likecomment = _context7.sent;

              if (likecomment) {
                _context7.next = 19;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(likecomment.author))) {
                _context7.next = 21;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context7.next = 23;
              return likecomment.remove();

            case 23:
              return _context7.abrupt("return", res.json({
                message: "成功删除回复"
              }));

            case 26:
              _context7.prev = 26;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 29:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 26]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (likedisAPIs);

/***/ }),

/***/ "./src/api/pletters.js":
/*!*****************************!*\
  !*** ./src/api/pletters.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Pcomment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Pcomment */ "./src/model/Pcomment.js");
/* harmony import */ var _model_Pletter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Pletter */ "./src/model/Pletter.js");







var plettersAPIs = function plettersAPIs(app) {
  //私聊用户
  app.post('/api/pletters/:uid', /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var uid, _req$body, username, token, content, user, target_user, newLetter, pletter;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context.next = 4;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入用户的ID"
              }));

            case 4:
              _req$body = req.body, username = _req$body.username, token = _req$body.token, content = _req$body.content;

              if (username) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context.sent;

              if (user) {
                _context.next = 16;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context.next = 18;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findById(uid);

            case 18:
              target_user = _context.sent;

              if (target_user) {
                _context.next = 21;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "私聊用户不存在"
              }));

            case 21:
              if (!(String(target_user._id) === String(user._id))) {
                _context.next = 23;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "无法私信自己"
              }));

            case 23:
              newLetter = {
                //对象数据类型
                content: content,
                author: user,
                //同时记录上讨论的作者
                target: uid
              };
              pletter = new _model_Pletter__WEBPACK_IMPORTED_MODULE_5__["default"](newLetter); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              _context.next = 27;
              return pletter.save();

            case 27:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.pletters.push(pletter);
              _context.next = 30;
              return user.save();

            case 30:
              target_user.pletters.push(pletter);
              _context.next = 33;
              return target_user.save();

            case 33:
              return _context.abrupt("return", res.json({
                message: "私聊信息发送成功"
              }));

            case 36:
              _context.prev = 36;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 39:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 36]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //私聊回复信息
  app.post('/api/pcomments/:pid', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var pid, _req$body2, username, token, content, user, pletter, newComment, pcomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              pid = req.params.pid;

              if (pid) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入回复私信的ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, content = _req$body2.content;

              if (username) {
                _context2.next = 7;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context2.next = 9;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context2.next = 11;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入回复内容"
              }));

            case 11:
              _context2.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context2.sent;

              if (user) {
                _context2.next = 16;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context2.next = 18;
              return _model_Pletter__WEBPACK_IMPORTED_MODULE_5__["default"].findById(pid);

            case 18:
              pletter = _context2.sent;

              if (pletter) {
                _context2.next = 21;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该私信回复目标不存在"
              }));

            case 21:
              newComment = {
                content: content,
                author: user,
                //同时添加上用户的名称
                target: pid //确定回复的对象

              };
              pcomment = new _model_Pcomment__WEBPACK_IMPORTED_MODULE_4__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化

              _context2.next = 25;
              return pcomment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              pletter.pcomments.push(pcomment);
              _context2.next = 28;
              return pletter.save();

            case 28:
              return _context2.abrupt("return", res.json({
                message: "私信回复成功"
              }));

            case 31:
              _context2.prev = 31;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 34:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 31]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取私信列表(私信我的)
  app.get('/api/pletters/fromsb/:uid', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var uid, user, pletters;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入用户的ID"
              }));

            case 4:
              _context3.next = 6;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findById(uid);

            case 6:
              user = _context3.sent;

              if (user) {
                _context3.next = 9;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "该用户不存在"
              }));

            case 9:
              _context3.next = 11;
              return _model_Pletter__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                target: uid
              }).populate('author', 'username avatar') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .populate('target', 'username avatar') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 11:
              pletters = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: pletters
              }));

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //获取私信列表(我私信的)
  app.get('/api/pletters/tosb/:uid', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var uid, user, pletters;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入用户的ID"
              }));

            case 4:
              _context4.next = 6;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findById(uid);

            case 6:
              user = _context4.sent;

              if (user) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该用户不存在"
              }));

            case 9:
              _context4.next = 11;
              return _model_Pletter__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                author: uid
              }).populate('author', 'username avatar') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .populate('target', 'username avatar') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 11:
              pletters = _context4.sent;
              return _context4.abrupt("return", res.json({
                data: pletters
              }));

            case 15:
              _context4.prev = 15;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 18:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 15]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //获取特定求助讨论内容
  app.get('/api/pletters/:pid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var pid, pletter, pcomments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              pid = req.params.pid;

              if (pid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _context5.next = 6;
              return _model_Pletter__WEBPACK_IMPORTED_MODULE_5__["default"].findById(pid).populate('author', 'username avatar description nickname');

            case 6:
              pletter = _context5.sent;

              if (pletter) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该私信不存在"
              }));

            case 9:
              _context5.next = 11;
              return _model_Pcomment__WEBPACK_IMPORTED_MODULE_4__["default"].find({
                target: pid
              }).populate('author', 'username avatar description nickname');

            case 11:
              pcomments = _context5.sent;
              return _context5.abrupt("return", res.json({
                data: {
                  //要获取讨论和回复的内容，不是单个所有再加一个{}表对象
                  pletter: pletter,
                  pcomments: pcomments
                }
              }));

            case 15:
              _context5.prev = 15;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 18:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 15]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //删除讨论内容
  app["delete"]('/api/pletters/:pid', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var pid, _req$body3, username, token, user, pletter;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              pid = req.params.pid;

              if (pid) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入私聊的ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token;

              if (username) {
                _context6.next = 7;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context6.next = 9;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context6.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context6.sent;

              if (user) {
                _context6.next = 14;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context6.next = 16;
              return _model_Pletter__WEBPACK_IMPORTED_MODULE_5__["default"].findById(pid);

            case 16:
              pletter = _context6.sent;

              if (pletter) {
                _context6.next = 19;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "该私信不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(pletter.author))) {
                _context6.next = 21;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "你不是该私信的作者"
              }));

            case 21:
              _context6.next = 23;
              return _model_Pcomment__WEBPACK_IMPORTED_MODULE_4__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(pid)
              });

            case 23:
              user.pletters.pull(pletter);
              _context6.next = 26;
              return user.save();

            case 26:
              _context6.next = 28;
              return pletter.remove();

            case 28:
              return _context6.abrupt("return", res.json({
                message: "成功删除私信"
              }));

            case 31:
              _context6.prev = 31;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 34:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 31]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //删除回复内容
  app["delete"]('/api/pcomments/:pid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var pid, _req$body4, username, token, user, pcomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              pid = req.params.pid;

              if (pid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context7.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context7.sent;

              if (user) {
                _context7.next = 14;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context7.next = 16;
              return _model_Pcomment__WEBPACK_IMPORTED_MODULE_4__["default"].findById(pid);

            case 16:
              pcomment = _context7.sent;

              if (pcomment) {
                _context7.next = 19;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(pcomment.author))) {
                _context7.next = 21;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context7.next = 23;
              return pcomment.remove();

            case 23:
              return _context7.abrupt("return", res.json({
                message: "撤回成功"
              }));

            case 26:
              _context7.prev = 26;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 29:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 26]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (plettersAPIs);

/***/ }),

/***/ "./src/api/secondhands.js":
/*!********************************!*\
  !*** ./src/api/secondhands.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Secondhand */ "./src/model/Secondhand.js");
/* harmony import */ var _model_Comment4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Comment4 */ "./src/model/Comment4.js");
/* harmony import */ var _model_File__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/File */ "./src/model/File.js");
/* harmony import */ var _model_Store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../model/Store */ "./src/model/Store.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_8__);









var upload = multer__WEBPACK_IMPORTED_MODULE_8___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var secondhandAPIs = function secondhandAPIs(app) {
  //发布二手
  app.post('/api/secondhands', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, category, price, title, content, number, filelist, user, fl, newSecondhand, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, category = _req$body.category, price = _req$body.price, title = _req$body.title, content = _req$body.content, number = _req$body.number, filelist = _req$body.filelist;
              console.log("这个是二手接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (category) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入二手类型"
              }));

            case 9:
              if (price) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入二手价格"
              }));

            case 11:
              if (title) {
                _context.next = 13;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入二手标题"
              }));

            case 13:
              if (content) {
                _context.next = 15;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入二手内容"
              }));

            case 15:
              if (number) {
                _context.next = 17;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入几成新"
              }));

            case 17:
              _context.next = 19;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 19:
              user = _context.sent;

              if (user) {
                _context.next = 22;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 22:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newSecondhand = {
                //对象数据类型
                category: category,
                price: price,
                title: title,
                content: content,
                number: number,
                author: user //同时记录上发布二手的作者

              };
              secondhand = new _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"](newSecondhand); //声明一个新的模型

              secondhand.pictures = fl;
              _context.next = 29;
              return secondhand.save();

            case 29:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.secondhands.push(secondhand);
              _context.next = 32;
              return user.save();

            case 32:
              return _context.abrupt("return", res.json({
                message: "发起二手成功"
              }));

            case 35:
              _context.prev = 35;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 38:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 35]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //发布商铺里的二手
  app.post('/api/secondhands/:sid', upload.array('pictures', 9), /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var sid, _req$body2, username, token, storename, s_token, category, price, title, content, number, user, store, newSecondhand, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入商铺ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, storename = _req$body2.storename, s_token = _req$body2.s_token, category = _req$body2.category, price = _req$body2.price, title = _req$body2.title, content = _req$body2.content, number = _req$body2.number;

              if (username) {
                _context3.next = 7;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context3.next = 9;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (storename) {
                _context3.next = 11;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 11:
              if (s_token) {
                _context3.next = 13;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 13:
              if (category) {
                _context3.next = 15;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入二手类型"
              }));

            case 15:
              if (price) {
                _context3.next = 17;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入二手价格"
              }));

            case 17:
              if (title) {
                _context3.next = 19;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入二手标题"
              }));

            case 19:
              if (content) {
                _context3.next = 21;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入二手内容"
              }));

            case 21:
              if (number) {
                _context3.next = 23;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入几成新"
              }));

            case 23:
              _context3.next = 25;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 25:
              user = _context3.sent;

              if (user) {
                _context3.next = 28;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 28:
              _context3.next = 30;
              return _model_Store__WEBPACK_IMPORTED_MODULE_7__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 30:
              store = _context3.sent;

              if (store) {
                _context3.next = 33;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 33:
              newSecondhand = {
                //对象数据类型
                category: category,
                price: price,
                title: title,
                content: content,
                number: number,
                author: user,
                //同时记录上发布二手的作者
                target: sid
              };
              secondhand = new _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"](newSecondhand); //声明一个新的模型

              if (req.files) {
                req.files.forEach( /*#__PURE__*/function () {
                  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(item, index) {
                    var file;
                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
                      while (1) {
                        switch (_context2.prev = _context2.next) {
                          case 0:
                            // console.log(item);
                            file = new _model_File__WEBPACK_IMPORTED_MODULE_6__["default"]({
                              filename: item.filename,
                              mimetype: item.mimetype,
                              size: item.size,
                              author: user
                            });
                            secondhand.pictures.push(file);
                            _context2.next = 4;
                            return file.save();

                          case 4:
                          case "end":
                            return _context2.stop();
                        }
                      }
                    }, _callee2);
                  }));

                  return function (_x5, _x6) {
                    return _ref3.apply(this, arguments);
                  };
                }());
              }

              _context3.next = 38;
              return secondhand.save();

            case 38:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.secondhands.push(secondhand); //存进user的发布二手模型里

              _context3.next = 41;
              return user.save();

            case 41:
              store.cinformations.push(secondhand); //存进store的二手信息模型里

              _context3.next = 44;
              return store.save();

            case 44:
              return _context3.abrupt("return", res.json({
                message: "商铺发起二手成功"
              }));

            case 47:
              _context3.prev = 47;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 50:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 47]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取二手列表
  app.get('/api/secondhands', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var secondhands;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _context4.next = 3;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"].find().populate('author', 'username stores') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 3:
              secondhands = _context4.sent;
              return _context4.abrupt("return", res.json({
                data: secondhands
              }));

            case 7:
              _context4.prev = 7;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 10:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 7]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //获取特定的二手内容
  app.get('/api/secondhands/:sid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var sid, secondhand, comments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入二手的ID"
              }));

            case 4:
              _context5.next = 6;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"].findById(sid).populate('author', 'username avatar description nickname').populate('dianzans_secondhand');

            case 6:
              secondhand = _context5.sent;

              if (secondhand) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该二手不存在"
              }));

            case 9:
              _context5.next = 11;
              return _model_Comment4__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                target: sid
              }).populate('author', 'username avatar description nickname');

            case 11:
              comments = _context5.sent;
              return _context5.abrupt("return", res.json({
                data: {
                  secondhand: secondhand,
                  comments: comments
                }
              }));

            case 15:
              _context5.prev = 15;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 18:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 15]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //修改二手内容
  app.patch('/api/secondhands/:sid', upload.array('pictures', 9), /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var sid, _req$body3, username, token, category, price, title, content, number, user, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入二手ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token, category = _req$body3.category, price = _req$body3.price, title = _req$body3.title, content = _req$body3.content, number = _req$body3.number;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (category) {
                _context7.next = 11;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入二手类型"
              }));

            case 11:
              if (price) {
                _context7.next = 13;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入二手价格"
              }));

            case 13:
              if (title) {
                _context7.next = 15;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入二手标题"
              }));

            case 15:
              if (content) {
                _context7.next = 17;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入二手内容"
              }));

            case 17:
              if (number) {
                _context7.next = 19;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入几成新"
              }));

            case 19:
              _context7.next = 21;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 21:
              user = _context7.sent;

              if (user) {
                _context7.next = 24;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 24:
              _context7.next = 26;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"].findById(sid);

            case 26:
              secondhand = _context7.sent;

              if (sid) {
                _context7.next = 29;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该二手不存在"
              }));

            case 29:
              if (!(String(user._id) !== String(secondhand.author))) {
                _context7.next = 31;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你不是发布该二手的用户"
              }));

            case 31:
              if (req.files) {
                req.files.forEach( /*#__PURE__*/function () {
                  var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(item, index) {
                    var file;
                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
                      while (1) {
                        switch (_context6.prev = _context6.next) {
                          case 0:
                            // console.log(item);
                            file = new _model_File__WEBPACK_IMPORTED_MODULE_6__["default"]({
                              filename: item.filename,
                              mimetype: item.mimetype,
                              size: item.size,
                              author: user
                            });
                            secondhand.pictures.push(file);
                            _context6.next = 4;
                            return file.save();

                          case 4:
                          case "end":
                            return _context6.stop();
                        }
                      }
                    }, _callee6);
                  }));

                  return function (_x13, _x14) {
                    return _ref7.apply(this, arguments);
                  };
                }());
              }

              secondhand.category = category;
              secondhand.price = price;
              secondhand.title = title;
              secondhand.content = content;
              secondhand.number = number;
              _context7.next = 39;
              return secondhand.save();

            case 39:
              return _context7.abrupt("return", res.json({
                message: "修改二手内容成功"
              }));

            case 42:
              _context7.prev = 42;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 45:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 42]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //删除二手
  app["delete"]('/api/secondhands/:sid', /*#__PURE__*/function () {
    var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8(req, res) {
      var sid, _req$body4, username, token, user, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {
        while (1) {
          switch (_context8.prev = _context8.next) {
            case 0:
              _context8.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context8.next = 4;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有输入二手ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token;

              if (username) {
                _context8.next = 7;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context8.next = 9;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context8.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context8.sent;

              if (user) {
                _context8.next = 14;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context8.next = 16;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"].findById(sid);

            case 16:
              secondhand = _context8.sent;

              if (sid) {
                _context8.next = 19;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "该二手不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(secondhand.author))) {
                _context8.next = 21;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "你不是发布该二手的用户"
              }));

            case 21:
              user.secondhands.pull(secondhand);
              _context8.next = 24;
              return user.save();

            case 24:
              _context8.next = 26;
              return secondhand.remove();

            case 26:
              return _context8.abrupt("return", res.json({
                message: "成功删除二手"
              }));

            case 29:
              _context8.prev = 29;
              _context8.t0 = _context8["catch"](0);
              return _context8.abrupt("return", res.status(400).json({
                message: _context8.t0.message
              }));

            case 32:
            case "end":
              return _context8.stop();
          }
        }
      }, _callee8, null, [[0, 29]]);
    }));

    return function (_x15, _x16) {
      return _ref8.apply(this, arguments);
    };
  }()), //删除商铺里的二手
  app["delete"]('/api/stores/:sid', /*#__PURE__*/function () {
    var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee9(req, res) {
      var sid, _req$body5, username, token, storename, s_token, user, store, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee9$(_context9) {
        while (1) {
          switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context9.next = 4;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有输入二手ID"
              }));

            case 4:
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token, storename = _req$body5.storename, s_token = _req$body5.s_token;

              if (username) {
                _context9.next = 7;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context9.next = 9;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (storename) {
                _context9.next = 11;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 11:
              if (s_token) {
                _context9.next = 13;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 13:
              _context9.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context9.sent;

              if (user) {
                _context9.next = 18;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context9.next = 20;
              return _model_Store__WEBPACK_IMPORTED_MODULE_7__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 20:
              store = _context9.sent;

              if (store) {
                _context9.next = 23;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 23:
              _context9.next = 25;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"].findById(sid);

            case 25:
              secondhand = _context9.sent;

              if (sid) {
                _context9.next = 28;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "该二手不存在"
              }));

            case 28:
              if (!(String(user._id) !== String(secondhand.author))) {
                _context9.next = 30;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "你不是发布该二手的商家"
              }));

            case 30:
              _context9.next = 32;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_4__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(sid)
              });

            case 32:
              user.secondhands.pull(secondhand);
              _context9.next = 35;
              return user.save();

            case 35:
              _context9.next = 37;
              return secondhand.remove();

            case 37:
              return _context9.abrupt("return", res.json({
                message: "成功删除商铺二手"
              }));

            case 40:
              _context9.prev = 40;
              _context9.t0 = _context9["catch"](0);
              return _context9.abrupt("return", res.status(400).json({
                message: _context9.t0.message
              }));

            case 43:
            case "end":
              return _context9.stop();
          }
        }
      }, _callee9, null, [[0, 40]]);
    }));

    return function (_x17, _x18) {
      return _ref9.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (secondhandAPIs);

/***/ }),

/***/ "./src/api/storecommodities.js":
/*!*************************************!*\
  !*** ./src/api/storecommodities.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Storecommodity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Storecommodity */ "./src/model/Storecommodity.js");
/* harmony import */ var _model_Commentstore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Commentstore */ "./src/model/Commentstore.js");
/* harmony import */ var _model_Store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/Store */ "./src/model/Store.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_7__);








var upload = multer__WEBPACK_IMPORTED_MODULE_7___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var storecommodityAPIs = function storecommodityAPIs(app) {
  //发布商品
  app.post('/api/storecommodities', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, storename, s_token, category, price, title, content, filelist, user, store, fl, newCommodity, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, storename = _req$body.storename, s_token = _req$body.s_token, category = _req$body.category, price = _req$body.price, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是商品接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (storename) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 9:
              if (s_token) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 11:
              if (category) {
                _context.next = 13;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品类型"
              }));

            case 13:
              if (price) {
                _context.next = 15;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品价格"
              }));

            case 15:
              if (title) {
                _context.next = 17;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品标题"
              }));

            case 17:
              if (content) {
                _context.next = 19;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商品内容"
              }));

            case 19:
              _context.next = 21;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 21:
              user = _context.sent;

              if (user) {
                _context.next = 24;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 24:
              _context.next = 26;
              return _model_Store__WEBPACK_IMPORTED_MODULE_6__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 26:
              store = _context.sent;

              if (store) {
                _context.next = 29;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 29:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newCommodity = {
                //对象数据类型
                category: category,
                price: price,
                title: title,
                content: content,
                author: store //同时记录上发布商品的作者

              };
              commodity = new _model_Storecommodity__WEBPACK_IMPORTED_MODULE_4__["default"](newCommodity); //声明一个新的模型

              commodity.pictures = fl;
              _context.next = 36;
              return commodity.save();

            case 36:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              store.storecommodities.push(commodity);
              _context.next = 39;
              return store.save();

            case 39:
              user.cinformations.push(commodity);
              _context.next = 42;
              return user.save();

            case 42:
              return _context.abrupt("return", res.json({
                message: "新增商铺商品成功"
              }));

            case 45:
              _context.prev = 45;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 48:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 45]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //获取商铺商品列表
  app.get('/api/storecommodities', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var commodities;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_4__["default"].find().populate('author', 'storename avatar') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 3:
              commodities = _context2.sent;
              return _context2.abrupt("return", res.json({
                data: commodities
              }));

            case 7:
              _context2.prev = 7;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 10:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 7]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取特定的商品内容
  app.get('/api/storecommodities/:cid', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var cid, commodity, comments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有输入商品的ID"
              }));

            case 4:
              _context3.next = 6;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_4__["default"].findById(cid).populate('author', 'storename avatar description');

            case 6:
              commodity = _context3.sent;

              if (commodity) {
                _context3.next = 9;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "该商铺商品不存在"
              }));

            case 9:
              _context3.next = 11;
              return _model_Commentstore__WEBPACK_IMPORTED_MODULE_5__["default"].find({
                target: cid
              }).populate('author', 'username avatar description nickname') //具体获取每条回复里作者的一些相关信息
              .populate('dianzans_storecommodity');

            case 11:
              comments = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: {
                  commodity: commodity,
                  comments: comments
                }
              }));

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //修改商品内容
  app.patch('/api/storecommodities/:cid', upload.array('pictures', 9), /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var cid, _req$body2, username, token, storename, s_token, category, price, title, content, user, store, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, storename = _req$body2.storename, s_token = _req$body2.s_token, category = _req$body2.category, price = _req$body2.price, title = _req$body2.title, content = _req$body2.content;

              if (username) {
                _context4.next = 7;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (storename) {
                _context4.next = 11;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 11:
              if (s_token) {
                _context4.next = 13;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 13:
              if (category) {
                _context4.next = 15;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品类型"
              }));

            case 15:
              if (price) {
                _context4.next = 17;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品价格"
              }));

            case 17:
              if (title) {
                _context4.next = 19;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品标题"
              }));

            case 19:
              if (content) {
                _context4.next = 21;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入商品内容"
              }));

            case 21:
              _context4.next = 23;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 23:
              user = _context4.sent;

              if (user) {
                _context4.next = 26;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 26:
              _context4.next = 28;
              return _model_Store__WEBPACK_IMPORTED_MODULE_6__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 28:
              store = _context4.sent;

              if (store) {
                _context4.next = 31;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 31:
              _context4.next = 33;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_4__["default"].findById(cid);

            case 33:
              commodity = _context4.sent;

              if (cid) {
                _context4.next = 36;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该商铺商品不存在"
              }));

            case 36:
              if (!(String(store._id) !== String(commodity.author))) {
                _context4.next = 38;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "你不是发布该商品的用户"
              }));

            case 38:
              commodity.category = category;
              commodity.price = price;
              commodity.title = title;
              commodity.content = content;
              _context4.next = 44;
              return commodity.save();

            case 44:
              return _context4.abrupt("return", res.json({
                message: "修改商品内容成功"
              }));

            case 47:
              _context4.prev = 47;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 50:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 47]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //删除商品
  app["delete"]('/api/storecommodities/:cid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var cid, _req$body3, username, token, storename, s_token, user, store, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入商品ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token, storename = _req$body3.storename, s_token = _req$body3.s_token;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (storename) {
                _context5.next = 11;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 11:
              if (s_token) {
                _context5.next = 13;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 13:
              _context5.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context5.sent;

              if (user) {
                _context5.next = 18;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context5.next = 20;
              return _model_Store__WEBPACK_IMPORTED_MODULE_6__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 20:
              store = _context5.sent;

              if (store) {
                _context5.next = 23;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 23:
              _context5.next = 25;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_4__["default"].findById(cid);

            case 25:
              commodity = _context5.sent;

              if (cid) {
                _context5.next = 28;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该商品不存在"
              }));

            case 28:
              if (!(String(store._id) !== String(commodity.author))) {
                _context5.next = 30;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "你不是发布该商铺商品的用户"
              }));

            case 30:
              store.storecommodities.pull(commodity);
              _context5.next = 33;
              return store.save();

            case 33:
              user.cinformations.pull(commodity);
              _context5.next = 36;
              return user.save();

            case 36:
              _context5.next = 38;
              return commodity.remove();

            case 38:
              return _context5.abrupt("return", res.json({
                message: "成功删除商品"
              }));

            case 41:
              _context5.prev = 41;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 44:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 41]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (storecommodityAPIs);

/***/ }),

/***/ "./src/api/stores.js":
/*!***************************!*\
  !*** ./src/api/stores.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_Store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/Store */ "./src/model/Store.js");
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Commodity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Commodity */ "./src/model/Commodity.js");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! crypto */ "./node_modules/crypto-browserify/index.js");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ "uuid");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_8__);









var upload = multer__WEBPACK_IMPORTED_MODULE_8___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var storeAPIs = function storeAPIs(app) {
  //申请商铺
  app.post('/api/stores', /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, storename, password, confirmpass, user, store, passwordCryp, newStore, newstore;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, storename = _req$body.storename, password = _req$body.password, confirmpass = _req$body.confirmpass;

              if (username) {
                _context.next = 4;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 4:
              if (token) {
                _context.next = 6;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 6:
              if (storename) {
                _context.next = 8;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入商铺名"
              }));

            case 8:
              if (password) {
                _context.next = 10;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入密码"
              }));

            case 10:
              if (confirmpass) {
                _context.next = 12;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入确认密码"
              }));

            case 12:
              if (!(password !== confirmpass)) {
                _context.next = 14;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "密码与确认密码不一致"
              }));

            case 14:
              _context.next = 16;
              return _model_User__WEBPACK_IMPORTED_MODULE_4__["default"].findOne({
                username: username,
                token: token
              });

            case 16:
              user = _context.sent;

              if (user) {
                _context.next = 19;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 19:
              _context.next = 21;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                storename: storename
              });

            case 21:
              store = _context.sent;

              if (!store) {
                _context.next = 24;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "该商铺名已经被占用"
              }));

            case 24:
              if (!(user.stores.length >= 1)) {
                _context.next = 26;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "你已创建过店铺,一个用户只允许建一个店铺"
              }));

            case 26:
              console.log(user.stores.length);
              passwordCryp = crypto__WEBPACK_IMPORTED_MODULE_6___default.a.createHash('sha1').update(password).digest('hex');
              newStore = {
                //商铺的对象
                storename: storename,
                password: passwordCryp,
                author: user //创建商铺的用户

              };
              newstore = new _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"](newStore); //表示用mongoose新弄一个模型，用new表示事例化

              user.stores.push(newstore); //存进user的商铺模型里

              _context.next = 33;
              return user.save();

            case 33:
              _context.next = 35;
              return newstore.save();

            case 35:
              return _context.abrupt("return", res.json({
                message: "新增商铺成功"
              }));

            case 38:
              _context.prev = 38;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 41:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 38]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //商铺登陆
  app.post('/api/stores/login', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var _req$body2, username, token, storename, password, user, passwordCryp, store, tokenstr, s_token;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, storename = _req$body2.storename, password = _req$body2.password;

              if (username) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 4:
              if (token) {
                _context2.next = 6;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 6:
              if (storename) {
                _context2.next = 8;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入商铺名"
              }));

            case 8:
              if (password) {
                _context2.next = 10;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入密码"
              }));

            case 10:
              _context2.next = 12;
              return _model_User__WEBPACK_IMPORTED_MODULE_4__["default"].findOne({
                username: username,
                token: token
              });

            case 12:
              user = _context2.sent;

              if (user) {
                _context2.next = 15;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 15:
              passwordCryp = crypto__WEBPACK_IMPORTED_MODULE_6___default.a.createHash('sha1').update(password).digest('hex');
              _context2.next = 18;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                storename: storename
              });

            case 18:
              store = _context2.sent;

              if (store) {
                _context2.next = 21;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该商铺不存在"
              }));

            case 21:
              if (!(store.password !== passwordCryp)) {
                _context2.next = 23;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "密码错误，请重新输入"
              }));

            case 23:
              if (!(String(user._id) !== String(store.author))) {
                _context2.next = 25;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "你不是该商铺的所有者"
              }));

            case 25:
              tokenstr = Object(uuid__WEBPACK_IMPORTED_MODULE_7__["v4"])(); //生成标识符

              s_token = crypto__WEBPACK_IMPORTED_MODULE_6___default.a.createHash('sha1').update(tokenstr).digest('hex');
              store.s_token = s_token;
              _context2.next = 30;
              return store.save();

            case 30:
              return _context2.abrupt("return", res.json({
                message: "登陆成功",
                data: {
                  //伴随登陆成功同时将商铺名和登陆凭证token一并返回给前端
                  _id: store._id,
                  storename: store.storename,
                  s_token: store.s_token,
                  avatar: store.avatar
                }
              }));

            case 33:
              _context2.prev = 33;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 36:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 33]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //验证接口
  app.post('/api/stores/auth', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var _req$body3, storename, s_token, store;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _req$body3 = req.body, storename = _req$body3.storename, s_token = _req$body3.s_token; // if(!username){
              //     return res.status(400).json({
              //         message:"没有获取到用户名"
              //     })
              // }
              // if(!token){
              //     return res.status(400).json({
              //         message:"没有获取到token"
              //     })
              // }

              if (storename) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 4:
              if (s_token) {
                _context3.next = 6;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 6:
              _context3.next = 8;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 8:
              store = _context3.sent;

              if (store) {
                _context3.next = 11;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 11:
              //将密码和token遮蔽保护用户隐私
              store.password = null;
              store.s_token = null;
              return _context3.abrupt("return", res.json({
                message: "验证成功",
                data: store
              }));

            case 16:
              _context3.prev = 16;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 19:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 16]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //商铺注销
  app.post('/api/stores/logout', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var _req$body4, storename, s_token, store;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _req$body4 = req.body, storename = _req$body4.storename, s_token = _req$body4.s_token; // if(!username){
              //     return res.status(400).json({
              //         message:"没有获取到用户名"
              //     })
              // }
              // if(!token){
              //     return res.status(400).json({
              //         message:"没有获取到token"
              //     })
              // }

              if (storename) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 4:
              if (s_token) {
                _context4.next = 6;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 6:
              _context4.next = 8;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 8:
              store = _context4.sent;

              if (store) {
                _context4.next = 11;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 11:
              store.s_token = null; //将s_token清空

              _context4.next = 14;
              return store.save();

            case 14:
              return _context4.abrupt("return", res.json({
                message: "成功退出商铺登陆"
              }));

            case 17:
              _context4.prev = 17;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 20:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 17]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //商铺信息修改 
  app.patch('/api/stores', upload.single('avatar'), /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var _req$body5, username, token, storename, s_token, description, user, store;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token, storename = _req$body5.storename, s_token = _req$body5.s_token, description = _req$body5.description;

              if (username) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 4:
              if (token) {
                _context5.next = 6;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 6:
              if (storename) {
                _context5.next = 8;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到商铺名"
              }));

            case 8:
              if (s_token) {
                _context5.next = 10;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到s_token"
              }));

            case 10:
              _context5.next = 12;
              return _model_User__WEBPACK_IMPORTED_MODULE_4__["default"].findOne({
                username: username,
                token: token
              });

            case 12:
              user = _context5.sent;

              if (user) {
                _context5.next = 15;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 15:
              _context5.next = 17;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                storename: storename,
                s_token: s_token
              });

            case 17:
              store = _context5.sent;

              if (store) {
                _context5.next = 20;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "s_token已过期，请重新登陆"
              }));

            case 20:
              if (req.file) {
                //判断用户是否传了文件
                store.avatar = req.file.filename; //如果传了文件就把商铺头像改为上传的文件
              }

              store.description = description; //商铺描述

              _context5.next = 24;
              return store.save();

            case 24:
              return _context5.abrupt("return", res.json({
                message: "修改商铺资料成功"
              }));

            case 27:
              _context5.prev = 27;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 30:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 27]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //获取商铺列表
  app.get('/api/stores', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var stores;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              _context6.next = 3;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].find().populate('author', 'username avatar') //不止找一个所有不用findone,并且用populate返回用户一些信息
              .sort({
                "posttime": -1
              });

            case 3:
              stores = _context6.sent;
              return _context6.abrupt("return", res.json({
                data: stores
              }));

            case 7:
              _context6.prev = 7;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 10:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 7]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //获取特定商铺信息
  app.get('/api/stores/:sid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var sid, store;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入商铺ID"
              }));

            case 4:
              _context7.next = 6;
              return _model_Store__WEBPACK_IMPORTED_MODULE_3__["default"].findById(sid).populate('author', 'username avatar description nickname').populate("storecommodities", "category title content price posttime pictures").populate("stores", 'storename posttime');

            case 6:
              store = _context7.sent;

              if (store) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该商铺不存在"
              }));

            case 9:
              store.password = null;
              store.s_token = null;
              return _context7.abrupt("return", res.json({
                data: store
              }));

            case 14:
              _context7.prev = 14;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 17:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 14]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }()); //删除商铺

  app["delete"]('/api/stores/:sid', /*#__PURE__*/function () {
    var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8(req, res) {
      var sid, _req$body6, username, token, user;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {
        while (1) {
          switch (_context8.prev = _context8.next) {
            case 0:
              _context8.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context8.next = 4;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有输入商铺ID"
              }));

            case 4:
              _req$body6 = req.body, username = _req$body6.username, token = _req$body6.token;

              if (username) {
                _context8.next = 7;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context8.next = 9;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context8.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_4__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context8.sent;

              if (user) {
                _context8.next = 14;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context8.next = 16;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_5__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(sid)
              });

            case 16:
              user.stores.pull(sid);
              _context8.next = 19;
              return user.save();

            case 19:
              return _context8.abrupt("return", res.json({
                message: "成功删除商铺"
              }));

            case 22:
              _context8.prev = 22;
              _context8.t0 = _context8["catch"](0);
              return _context8.abrupt("return", res.status(400).json({
                message: _context8.t0.message
              }));

            case 25:
            case "end":
              return _context8.stop();
          }
        }
      }, _callee8, null, [[0, 22]]);
    }));

    return function (_x15, _x16) {
      return _ref8.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (storeAPIs);

/***/ }),

/***/ "./src/api/unlikediscusses.js":
/*!************************************!*\
  !*** ./src/api/unlikediscusses.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var _model_Unlikecomment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/Unlikecomment */ "./src/model/Unlikecomment.js");
/* harmony import */ var _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/Unlikediscuss */ "./src/model/Unlikediscuss.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_6__);







var upload = multer__WEBPACK_IMPORTED_MODULE_6___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var unlikedisAPIs = function unlikedisAPIs(app) {
  //发表踩雷区帖子
  app.post('/api/unlikediscusses', upload.array('pictures'), /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, token, title, content, filelist, user, fl, newDiscuss, unlikediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, token = _req$body.token, title = _req$body.title, content = _req$body.content, filelist = _req$body.filelist;
              console.log("这个是踩雷帖子接口里的fileList:", filelist);

              if (username) {
                _context.next = 5;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              if (title) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 9:
              if (content) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 11:
              _context.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context.sent;

              if (user) {
                _context.next = 16;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              fl = filelist.flat(Infinity);
              console.log(fl);
              newDiscuss = {
                //对象数据类型
                title: title,
                content: content,
                author: user //同时记录上讨论的作者

              };
              unlikediscuss = new _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__["default"](newDiscuss); //表示用mongoose新弄一个模型，用new表示事例化(新讨论模型)

              unlikediscuss.pictures = fl;
              _context.next = 23;
              return unlikediscuss.save();

            case 23:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              user.unlikediscusses.push(unlikediscuss);
              _context.next = 26;
              return user.save();

            case 26:
              return _context.abrupt("return", res.json({
                message: "新增踩雷帖子成功"
              }));

            case 29:
              _context.prev = 29;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 32:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 29]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()), //发布回复信息(回复求助区帖子)
  app.post('/api/unlikecomments/:uid', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var uid, _req$body2, username, token, content, user, unlikediscuss, newComment, unlikecomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入帖子的ID"
              }));

            case 4:
              _req$body2 = req.body, username = _req$body2.username, token = _req$body2.token, content = _req$body2.content;

              if (username) {
                _context2.next = 7;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context2.next = 9;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (content) {
                _context2.next = 11;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入回复内容"
              }));

            case 11:
              _context2.next = 13;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 13:
              user = _context2.sent;

              if (user) {
                _context2.next = 16;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 16:
              _context2.next = 18;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(uid);

            case 18:
              unlikediscuss = _context2.sent;

              if (unlikediscuss) {
                _context2.next = 21;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该踩雷帖子不存在"
              }));

            case 21:
              newComment = {
                content: content,
                author: user,
                //同时添加上用户的名称
                target: uid //确定回复的对象

              };
              unlikecomment = new _model_Unlikecomment__WEBPACK_IMPORTED_MODULE_4__["default"](newComment); //表示用mongoose新弄一个模型，用new表示事例化

              _context2.next = 25;
              return unlikecomment.save();

            case 25:
              //save存储进数据库，因为用到数据库处理所以前面加一个await
              unlikediscuss.comments.push(unlikecomment);
              _context2.next = 28;
              return unlikediscuss.save();

            case 28:
              return _context2.abrupt("return", res.json({
                message: "新增回复成功"
              }));

            case 31:
              _context2.prev = 31;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 34:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 31]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //获取求助区讨论列表
  app.get('/api/unlikediscusses', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var unlikediscusses;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].find().populate('author', 'username avatar nickname');

            case 3:
              unlikediscusses = _context3.sent;
              return _context3.abrupt("return", res.json({
                data: unlikediscusses
              }));

            case 7:
              _context3.prev = 7;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 10:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 7]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //获取特定求助讨论内容
  app.get('/api/unlikediscusses/:uid', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var uid, unlikediscuss, unlikecomments;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _context4.next = 6;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(uid).populate('author', 'username avatar description nickname') //用findById可以直接通过ID来寻找目标是否存在
              .populate('dianzans_unlikediscuss');

            case 6:
              unlikediscuss = _context4.sent;

              if (unlikediscuss) {
                _context4.next = 9;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "该踩雷讨论不存在"
              }));

            case 9:
              _context4.next = 11;
              return _model_Unlikecomment__WEBPACK_IMPORTED_MODULE_4__["default"].find({
                target: uid
              }).populate('author', 'username avatar description nickname');

            case 11:
              unlikecomments = _context4.sent;
              return _context4.abrupt("return", res.json({
                data: {
                  //要获取讨论和回复的内容，不是单个所有再加一个{}表对象
                  unlikediscuss: unlikediscuss,
                  unlikecomments: unlikecomments
                }
              }));

            case 15:
              _context4.prev = 15;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 18:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 15]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //修改讨论信息
  app.patch('/api/unlikediscusses/:uid', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var uid, _req$body3, username, token, title, content, user, unlikediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context5.next = 4;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token, title = _req$body3.title, content = _req$body3.content;

              if (username) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context5.next = 9;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              if (title) {
                _context5.next = 11;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论标题"
              }));

            case 11:
              if (content) {
                _context5.next = 13;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有输入讨论内容"
              }));

            case 13:
              _context5.next = 15;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 15:
              user = _context5.sent;

              if (user) {
                _context5.next = 18;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 18:
              _context5.next = 20;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(uid);

            case 20:
              unlikediscuss = _context5.sent;

              if (unlikediscuss) {
                _context5.next = 23;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "该踩雷讨论不存在"
              }));

            case 23:
              if (!(String(user._id) !== String(unlikediscuss.author))) {
                _context5.next = 25;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "你不是该踩雷讨论的作者"
              }));

            case 25:
              unlikediscuss.title = title;
              unlikediscuss.content = content;
              _context5.next = 29;
              return unlikediscuss.save();

            case 29:
              return _context5.abrupt("return", res.json({
                message: "修改踩雷讨论内容成功"
              }));

            case 32:
              _context5.prev = 32;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 35:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 32]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //删除讨论内容
  app["delete"]('/api/unlikediscusses/:uid', /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var uid, _req$body4, username, token, user, unlikediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有输入讨论的ID"
              }));

            case 4:
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token;

              if (username) {
                _context6.next = 7;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context6.next = 9;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context6.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context6.sent;

              if (user) {
                _context6.next = 14;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context6.next = 16;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_5__["default"].findById(uid);

            case 16:
              unlikediscuss = _context6.sent;

              if (unlikediscuss) {
                _context6.next = 19;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "该踩雷讨论不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(unlikediscuss.author))) {
                _context6.next = 21;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "你不是该讨论的作者"
              }));

            case 21:
              _context6.next = 23;
              return _model_Unlikecomment__WEBPACK_IMPORTED_MODULE_4__["default"].deleteMany({
                target: mongoose__WEBPACK_IMPORTED_MODULE_2___default.a.Types.ObjectId(uid)
              });

            case 23:
              user.unlikediscusses.pull(unlikediscuss);
              _context6.next = 26;
              return user.save();

            case 26:
              _context6.next = 28;
              return unlikediscuss.remove();

            case 28:
              return _context6.abrupt("return", res.json({
                message: "成功删除求助讨论"
              }));

            case 31:
              _context6.prev = 31;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 34:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 31]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //删除回复内容
  app["delete"]('/api/unlikecomments/:uid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var uid, _req$body5, username, token, user, unlikecomment;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有输入回复的ID"
              }));

            case 4:
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context7.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_3__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context7.sent;

              if (user) {
                _context7.next = 14;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context7.next = 16;
              return _model_Unlikecomment__WEBPACK_IMPORTED_MODULE_4__["default"].findById(uid);

            case 16:
              unlikecomment = _context7.sent;

              if (unlikecomment) {
                _context7.next = 19;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "该回复不存在"
              }));

            case 19:
              if (!(String(user._id) !== String(unlikecomment.author))) {
                _context7.next = 21;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你不是该回复的作者"
              }));

            case 21:
              _context7.next = 23;
              return unlikecomment.remove();

            case 23:
              return _context7.abrupt("return", res.json({
                message: "成功删除回复"
              }));

            case 26:
              _context7.prev = 26;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 29:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 26]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (unlikedisAPIs);

/***/ }),

/***/ "./src/api/users.js":
/*!**************************!*\
  !*** ./src/api/users.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/User */ "./src/model/User.js");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ "./node_modules/crypto-browserify/index.js");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ "uuid");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _model_Commodity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/Commodity */ "./src/model/Commodity.js");
/* harmony import */ var _model_Groupbuy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../model/Groupbuy */ "./src/model/Groupbuy.js");
/* harmony import */ var _model_Secondhand__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/Secondhand */ "./src/model/Secondhand.js");
/* harmony import */ var _model_Discuss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/Discuss */ "./src/model/Discuss.js");
/* harmony import */ var _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../model/Helpdiscuss */ "./src/model/Helpdiscuss.js");
/* harmony import */ var _model_Likediscuss__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../model/Likediscuss */ "./src/model/Likediscuss.js");
/* harmony import */ var _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../model/Unlikediscuss */ "./src/model/Unlikediscuss.js");
/* harmony import */ var _model_Store__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../model/Store */ "./src/model/Store.js");
/* harmony import */ var _model_Storecommodity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../model/Storecommodity */ "./src/model/Storecommodity.js");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! fs */ "fs");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_15__);
















var upload = multer__WEBPACK_IMPORTED_MODULE_5___default()({
  //上传图片文件都存到static里边的upload
  dest: './static/upload'
});

var userAPIs = function userAPIs(app) {
  //注册接口
  app.post('/api/users', /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res) {
      var _req$body, username, password, confirmpass, user, passwordCryp, newUser, newuser;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _req$body = req.body, username = _req$body.username, password = _req$body.password, confirmpass = _req$body.confirmpass;

              if (username) {
                _context.next = 4;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入用户名"
              }));

            case 4:
              if (password) {
                _context.next = 6;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入密码"
              }));

            case 6:
              if (confirmpass) {
                _context.next = 8;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "没有输入确认密码"
              }));

            case 8:
              if (!(password !== confirmpass)) {
                _context.next = 10;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "密码与确认密码不一致"
              }));

            case 10:
              _context.next = 12;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username
              });

            case 12:
              user = _context.sent;

              if (!user) {
                _context.next = 15;
                break;
              }

              return _context.abrupt("return", res.status(400).json({
                message: "该用户名已经被占用"
              }));

            case 15:
              passwordCryp = crypto__WEBPACK_IMPORTED_MODULE_3___default.a.createHash('sha1').update(password).digest('hex');
              newUser = {
                //用户的对象
                username: username,
                password: passwordCryp
              };
              newuser = new _model_User__WEBPACK_IMPORTED_MODULE_2__["default"](newUser); //表示用mongoose新弄一个模型，用new表示实例化

              _context.next = 20;
              return newuser.save();

            case 20:
              return _context.abrupt("return", res.json({
                message: "新增用户成功"
              }));

            case 23:
              _context.prev = 23;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", res.status(400).json({
                message: _context.t0.message
              }));

            case 26:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 23]]);
    }));

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }()); //登陆接口

  app.post('/api/users/login', /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res) {
      var _req$body2, username, password, passwordCryp, user, tokenstr, token;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _req$body2 = req.body, username = _req$body2.username, password = _req$body2.password;

              if (username) {
                _context2.next = 4;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入用户名"
              }));

            case 4:
              if (password) {
                _context2.next = 6;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "没有输入密码"
              }));

            case 6:
              passwordCryp = crypto__WEBPACK_IMPORTED_MODULE_3___default.a.createHash('sha1').update(password).digest('hex');
              _context2.next = 9;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username
              });

            case 9:
              user = _context2.sent;

              if (user) {
                _context2.next = 12;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "该用户不存在"
              }));

            case 12:
              if (!(user.password !== passwordCryp)) {
                _context2.next = 14;
                break;
              }

              return _context2.abrupt("return", res.status(400).json({
                message: "密码错误，请重新输入"
              }));

            case 14:
              tokenstr = Object(uuid__WEBPACK_IMPORTED_MODULE_4__["v4"])(); //生成标识符

              token = crypto__WEBPACK_IMPORTED_MODULE_3___default.a.createHash('sha1').update(tokenstr).digest('hex');
              user.token = token;
              _context2.next = 19;
              return user.save();

            case 19:
              return _context2.abrupt("return", res.json({
                message: "登陆成功",
                data: {
                  //伴随登陆成功同时将用户名和登陆凭证token一并返回给前端
                  _id: user._id,
                  username: user.username,
                  token: user.token,
                  avatar: user.avatar
                }
              }));

            case 22:
              _context2.prev = 22;
              _context2.t0 = _context2["catch"](0);
              return _context2.abrupt("return", res.status(400).json({
                message: _context2.t0.message
              }));

            case 25:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 22]]);
    }));

    return function (_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }()), //验证接口
  app.post('/api/users/auth', /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res) {
      var _req$body3, username, token, user;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _req$body3 = req.body, username = _req$body3.username, token = _req$body3.token;

              if (username) {
                _context3.next = 4;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 4:
              if (token) {
                _context3.next = 6;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 6:
              _context3.next = 8;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 8:
              user = _context3.sent;

              if (user) {
                _context3.next = 11;
                break;
              }

              return _context3.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 11:
              //将密码和token遮蔽保护用户隐私
              user.password = null;
              user.token = null;
              return _context3.abrupt("return", res.json({
                message: "验证成功",
                data: user
              }));

            case 16:
              _context3.prev = 16;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", res.status(400).json({
                message: _context3.t0.message
              }));

            case 19:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 16]]);
    }));

    return function (_x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }()), //注销接口
  app.post('/api/users/logout', /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(req, res) {
      var _req$body4, username, token, user;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _req$body4 = req.body, username = _req$body4.username, token = _req$body4.token;

              if (username) {
                _context4.next = 4;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 4:
              if (token) {
                _context4.next = 6;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 6:
              _context4.next = 8;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 8:
              user = _context4.sent;

              if (user) {
                _context4.next = 11;
                break;
              }

              return _context4.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 11:
              user.token = null; //将token清空在user.save一下

              _context4.next = 14;
              return user.save();

            case 14:
              return _context4.abrupt("return", res.json({
                message: "成功退出登陆"
              }));

            case 17:
              _context4.prev = 17;
              _context4.t0 = _context4["catch"](0);
              return _context4.abrupt("return", res.status(400).json({
                message: _context4.t0.message
              }));

            case 20:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 17]]);
    }));

    return function (_x7, _x8) {
      return _ref4.apply(this, arguments);
    };
  }()), //个人中心页壁纸
  app.post('/api/users/wallpaper', /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(req, res) {
      var _req$body5, username, token, filelist, user, fl;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              _req$body5 = req.body, username = _req$body5.username, token = _req$body5.token, filelist = _req$body5.filelist;
              console.log("这个是个人主页壁纸接口里的fileList:", filelist);

              if (username) {
                _context5.next = 5;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 5:
              if (token) {
                _context5.next = 7;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 7:
              _context5.next = 9;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 9:
              user = _context5.sent;

              if (user) {
                _context5.next = 12;
                break;
              }

              return _context5.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 12:
              fl = filelist.flat(Infinity);
              console.log(fl);
              user.wallpaper = fl;
              _context5.next = 17;
              return user.save();

            case 17:
              return _context5.abrupt("return", res.json({
                message: "上传壁纸成功"
              }));

            case 20:
              _context5.prev = 20;
              _context5.t0 = _context5["catch"](0);
              return _context5.abrupt("return", res.status(400).json({
                message: _context5.t0.message
              }));

            case 23:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5, null, [[0, 20]]);
    }));

    return function (_x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }()), //修改用户信息接口
  app.patch('/api/users', upload.single('avatar'), /*#__PURE__*/function () {
    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(req, res) {
      var _req$body6, username, token, nickname, description, user;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.prev = 0;
              _req$body6 = req.body, username = _req$body6.username, token = _req$body6.token, nickname = _req$body6.nickname, description = _req$body6.description;

              if (username) {
                _context6.next = 4;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 4:
              if (token) {
                _context6.next = 6;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 6:
              _context6.next = 8;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 8:
              user = _context6.sent;

              if (user) {
                _context6.next = 11;
                break;
              }

              return _context6.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 11:
              // if(String(user._id)!==String(user.author)){
              //     return res.status(400).json({
              //         message:"您没有权限修改他人的信息"
              //     })
              // }
              if (req.file) {
                //判断用户是否传了文件
                user.avatar = req.file.filename; //如果传了文件就把用户头像改为上传的文件
              }

              user.nickname = nickname; //个人昵称

              user.description = description; //个人描述
              // user.username = username

              _context6.next = 16;
              return user.save();

            case 16:
              return _context6.abrupt("return", res.json({
                message: "修改用户资料成功"
              }));

            case 19:
              _context6.prev = 19;
              _context6.t0 = _context6["catch"](0);
              return _context6.abrupt("return", res.status(400).json({
                message: _context6.t0.message
              }));

            case 22:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6, null, [[0, 19]]);
    }));

    return function (_x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }()), //用户关注
  app.patch('/api/users/followers/:uid', /*#__PURE__*/function () {
    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(req, res) {
      var uid, _req$body7, username, token, user, follower;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context7.next = 4;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户id"
              }));

            case 4:
              _req$body7 = req.body, username = _req$body7.username, token = _req$body7.token;

              if (username) {
                _context7.next = 7;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context7.next = 9;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context7.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context7.sent;

              if (user) {
                _context7.next = 14;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context7.next = 16;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findById(uid);

            case 16:
              follower = _context7.sent;

              if (follower) {
                _context7.next = 19;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "待关注用户不存在"
              }));

            case 19:
              if (!(String(follower._id) === String(user._id))) {
                _context7.next = 21;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "不能关注自己"
              }));

            case 21:
              if (!(user.followers.includes(follower._id) && follower.fans.includes(user._id))) {
                _context7.next = 23;
                break;
              }

              return _context7.abrupt("return", res.status(400).json({
                message: "你已经关注过该用户"
              }));

            case 23:
              user.followers.push(follower);
              follower.fans.push(user);
              _context7.next = 27;
              return user.save();

            case 27:
              _context7.next = 29;
              return follower.save();

            case 29:
              return _context7.abrupt("return", res.json({
                message: "成功关注用户",
                data: user
              }));

            case 32:
              _context7.prev = 32;
              _context7.t0 = _context7["catch"](0);
              return _context7.abrupt("return", res.status(400).json({
                message: _context7.t0.message
              }));

            case 35:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, null, [[0, 32]]);
    }));

    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }()), //用户取关
  app.patch('/api/users/unfollowers/:uid', /*#__PURE__*/function () {
    var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8(req, res) {
      var uid, _req$body8, username, token, user, follower;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {
        while (1) {
          switch (_context8.prev = _context8.next) {
            case 0:
              _context8.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context8.next = 4;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到用户id"
              }));

            case 4:
              _req$body8 = req.body, username = _req$body8.username, token = _req$body8.token;

              if (username) {
                _context8.next = 7;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context8.next = 9;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context8.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context8.sent;

              if (user) {
                _context8.next = 14;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context8.next = 16;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findById(uid);

            case 16:
              follower = _context8.sent;

              if (follower) {
                _context8.next = 19;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "该关注用户不存在"
              }));

            case 19:
              if (!(!user.followers.includes(follower._id) && !follower.fans.includes(user._id))) {
                _context8.next = 21;
                break;
              }

              return _context8.abrupt("return", res.status(400).json({
                message: "你没关注过该用户"
              }));

            case 21:
              user.followers.pull(follower);
              follower.fans.pull(user);
              _context8.next = 25;
              return user.save();

            case 25:
              _context8.next = 27;
              return follower.save();

            case 27:
              return _context8.abrupt("return", res.json({
                message: "成功取关该用户",
                data: user
              }));

            case 30:
              _context8.prev = 30;
              _context8.t0 = _context8["catch"](0);
              return _context8.abrupt("return", res.status(400).json({
                message: _context8.t0.message
              }));

            case 33:
            case "end":
              return _context8.stop();
          }
        }
      }, _callee8, null, [[0, 30]]);
    }));

    return function (_x15, _x16) {
      return _ref8.apply(this, arguments);
    };
  }()), //商铺关注
  app.patch('/api/users/followers2/:sid', /*#__PURE__*/function () {
    var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee9(req, res) {
      var sid, _req$body9, username, token, user, follower2;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee9$(_context9) {
        while (1) {
          switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context9.next = 4;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到商铺id"
              }));

            case 4:
              _req$body9 = req.body, username = _req$body9.username, token = _req$body9.token;

              if (username) {
                _context9.next = 7;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context9.next = 9;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context9.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context9.sent;

              if (user) {
                _context9.next = 14;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context9.next = 16;
              return _model_Store__WEBPACK_IMPORTED_MODULE_13__["default"].findById(sid);

            case 16:
              follower2 = _context9.sent;

              if (follower2) {
                _context9.next = 19;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "待关注商铺不存在"
              }));

            case 19:
              if (!(String(follower2.author._id) === String(user._id))) {
                _context9.next = 21;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "不能关注自己商铺"
              }));

            case 21:
              if (!user.followers2.includes(follower2._id)) {
                _context9.next = 23;
                break;
              }

              return _context9.abrupt("return", res.status(400).json({
                message: "你已经关注过该商铺"
              }));

            case 23:
              user.followers2.push(follower2);
              _context9.next = 26;
              return user.save();

            case 26:
              return _context9.abrupt("return", res.json({
                message: "成功关注商铺",
                data: user
              }));

            case 29:
              _context9.prev = 29;
              _context9.t0 = _context9["catch"](0);
              return _context9.abrupt("return", res.status(400).json({
                message: _context9.t0.message
              }));

            case 32:
            case "end":
              return _context9.stop();
          }
        }
      }, _callee9, null, [[0, 29]]);
    }));

    return function (_x17, _x18) {
      return _ref9.apply(this, arguments);
    };
  }()), //商铺取关
  app.patch('/api/users/unfollowers2/:sid', /*#__PURE__*/function () {
    var _ref10 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee10(req, res) {
      var sid, _req$body10, username, token, user, follower2;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee10$(_context10) {
        while (1) {
          switch (_context10.prev = _context10.next) {
            case 0:
              _context10.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context10.next = 4;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "没有获取到商铺id"
              }));

            case 4:
              _req$body10 = req.body, username = _req$body10.username, token = _req$body10.token;

              if (username) {
                _context10.next = 7;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context10.next = 9;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context10.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context10.sent;

              if (user) {
                _context10.next = 14;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context10.next = 16;
              return _model_Store__WEBPACK_IMPORTED_MODULE_13__["default"].findById(sid);

            case 16:
              follower2 = _context10.sent;

              if (follower2) {
                _context10.next = 19;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "该关注商铺不存在"
              }));

            case 19:
              if (user.followers2.includes(follower2._id)) {
                _context10.next = 21;
                break;
              }

              return _context10.abrupt("return", res.status(400).json({
                message: "你没关注过该商铺"
              }));

            case 21:
              user.followers2.pull(follower2);
              _context10.next = 24;
              return user.save();

            case 24:
              return _context10.abrupt("return", res.json({
                message: "成功取关该商铺",
                data: user
              }));

            case 27:
              _context10.prev = 27;
              _context10.t0 = _context10["catch"](0);
              return _context10.abrupt("return", res.status(400).json({
                message: _context10.t0.message
              }));

            case 30:
            case "end":
              return _context10.stop();
          }
        }
      }, _callee10, null, [[0, 27]]);
    }));

    return function (_x19, _x20) {
      return _ref10.apply(this, arguments);
    };
  }()), //用户收藏商品
  app.patch('/api/users/collects/:cid', /*#__PURE__*/function () {
    var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee11(req, res) {
      var cid, _req$body11, username, token, user, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee11$(_context11) {
        while (1) {
          switch (_context11.prev = _context11.next) {
            case 0:
              _context11.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context11.next = 4;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "没有获取到商品id"
              }));

            case 4:
              _req$body11 = req.body, username = _req$body11.username, token = _req$body11.token;

              if (username) {
                _context11.next = 7;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context11.next = 9;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context11.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context11.sent;

              if (user) {
                _context11.next = 14;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context11.next = 16;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_6__["default"].findById(cid);

            case 16:
              commodity = _context11.sent;

              if (commodity) {
                _context11.next = 19;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "待收藏商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(commodity.author))) {
                _context11.next = 21;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "不能收藏自己的商品"
              }));

            case 21:
              if (!(user.collects.includes(commodity._id) && commodity.dianzans_commodity.includes(user._id))) {
                _context11.next = 23;
                break;
              }

              return _context11.abrupt("return", res.status(400).json({
                message: "你已经收藏过该商品"
              }));

            case 23:
              user.collects.push(commodity);
              _context11.next = 26;
              return user.save();

            case 26:
              commodity.dianzans_commodity.push(user);
              _context11.next = 29;
              return commodity.save();

            case 29:
              return _context11.abrupt("return", res.json({
                message: "成功收藏商品",
                data: user
              }));

            case 32:
              _context11.prev = 32;
              _context11.t0 = _context11["catch"](0);
              return _context11.abrupt("return", res.status(400).json({
                message: _context11.t0.message
              }));

            case 35:
            case "end":
              return _context11.stop();
          }
        }
      }, _callee11, null, [[0, 32]]);
    }));

    return function (_x21, _x22) {
      return _ref11.apply(this, arguments);
    };
  }()), //用户取消商品收藏
  app.patch('/api/users/uncollects/:cid', /*#__PURE__*/function () {
    var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee12(req, res) {
      var cid, _req$body12, username, token, user, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee12$(_context12) {
        while (1) {
          switch (_context12.prev = _context12.next) {
            case 0:
              _context12.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context12.next = 4;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "没有获取到商品id"
              }));

            case 4:
              _req$body12 = req.body, username = _req$body12.username, token = _req$body12.token;

              if (username) {
                _context12.next = 7;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context12.next = 9;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context12.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context12.sent;

              if (user) {
                _context12.next = 14;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context12.next = 16;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_6__["default"].findById(cid);

            case 16:
              commodity = _context12.sent;

              if (commodity) {
                _context12.next = 19;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "该收藏商品不存在"
              }));

            case 19:
              if (!(!user.collects.includes(commodity._id) && !commodity.dianzans_commodity.includes(user._id))) {
                _context12.next = 21;
                break;
              }

              return _context12.abrupt("return", res.status(400).json({
                message: "你没收藏过该商品"
              }));

            case 21:
              user.collects.pull(commodity);
              _context12.next = 24;
              return user.save();

            case 24:
              commodity.dianzans_commodity.pull(user);
              _context12.next = 27;
              return commodity.save();

            case 27:
              return _context12.abrupt("return", res.json({
                message: "成功取消商品收藏",
                data: user
              }));

            case 30:
              _context12.prev = 30;
              _context12.t0 = _context12["catch"](0);
              return _context12.abrupt("return", res.status(400).json({
                message: _context12.t0.message
              }));

            case 33:
            case "end":
              return _context12.stop();
          }
        }
      }, _callee12, null, [[0, 30]]);
    }));

    return function (_x23, _x24) {
      return _ref12.apply(this, arguments);
    };
  }()), //用户收藏二手商品
  app.patch('/api/users/collects2/:sid', /*#__PURE__*/function () {
    var _ref13 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee13(req, res) {
      var sid, _req$body13, username, token, user, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee13$(_context13) {
        while (1) {
          switch (_context13.prev = _context13.next) {
            case 0:
              _context13.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context13.next = 4;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "没有获取到二手商品id"
              }));

            case 4:
              _req$body13 = req.body, username = _req$body13.username, token = _req$body13.token;

              if (username) {
                _context13.next = 7;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context13.next = 9;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context13.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context13.sent;

              if (user) {
                _context13.next = 14;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context13.next = 16;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_8__["default"].findById(sid);

            case 16:
              secondhand = _context13.sent;

              if (secondhand) {
                _context13.next = 19;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "待收藏二手商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(secondhand.author))) {
                _context13.next = 21;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "不能收藏自己的二手商品"
              }));

            case 21:
              if (!(user.collects2.includes(secondhand._id) && secondhand.dianzans_secondhand.includes(user._id))) {
                _context13.next = 23;
                break;
              }

              return _context13.abrupt("return", res.status(400).json({
                message: "你已经收藏过该二手商品"
              }));

            case 23:
              user.collects2.push(secondhand);
              _context13.next = 26;
              return user.save();

            case 26:
              secondhand.dianzans_secondhand.push(user);
              _context13.next = 29;
              return secondhand.save();

            case 29:
              return _context13.abrupt("return", res.json({
                message: "成功收藏二手商品",
                data: user
              }));

            case 32:
              _context13.prev = 32;
              _context13.t0 = _context13["catch"](0);
              return _context13.abrupt("return", res.status(400).json({
                message: _context13.t0.message
              }));

            case 35:
            case "end":
              return _context13.stop();
          }
        }
      }, _callee13, null, [[0, 32]]);
    }));

    return function (_x25, _x26) {
      return _ref13.apply(this, arguments);
    };
  }()), //用户取消二手商品收藏
  app.patch('/api/users/uncollects2/:sid', /*#__PURE__*/function () {
    var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee14(req, res) {
      var sid, _req$body14, username, token, user, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee14$(_context14) {
        while (1) {
          switch (_context14.prev = _context14.next) {
            case 0:
              _context14.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context14.next = 4;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "没有获取到二手商品id"
              }));

            case 4:
              _req$body14 = req.body, username = _req$body14.username, token = _req$body14.token;

              if (username) {
                _context14.next = 7;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context14.next = 9;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context14.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context14.sent;

              if (user) {
                _context14.next = 14;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context14.next = 16;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_8__["default"].findById(sid);

            case 16:
              secondhand = _context14.sent;

              if (secondhand) {
                _context14.next = 19;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "该收藏二手商品不存在"
              }));

            case 19:
              if (!(!user.collects2.includes(secondhand._id) && !secondhand.dianzans_secondhand.includes(user._id))) {
                _context14.next = 21;
                break;
              }

              return _context14.abrupt("return", res.status(400).json({
                message: "你没收藏过该二手商品"
              }));

            case 21:
              user.collects2.pull(secondhand);
              _context14.next = 24;
              return user.save();

            case 24:
              secondhand.dianzans_secondhand.pull(user);
              _context14.next = 27;
              return secondhand.save();

            case 27:
              return _context14.abrupt("return", res.json({
                message: "成功取消二手商品收藏",
                data: user
              }));

            case 30:
              _context14.prev = 30;
              _context14.t0 = _context14["catch"](0);
              return _context14.abrupt("return", res.status(400).json({
                message: _context14.t0.message
              }));

            case 33:
            case "end":
              return _context14.stop();
          }
        }
      }, _callee14, null, [[0, 30]]);
    }));

    return function (_x27, _x28) {
      return _ref14.apply(this, arguments);
    };
  }()), //用户收藏团购商品
  app.patch('/api/users/collects3/:gid', /*#__PURE__*/function () {
    var _ref15 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee15(req, res) {
      var gid, _req$body15, username, token, user, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee15$(_context15) {
        while (1) {
          switch (_context15.prev = _context15.next) {
            case 0:
              _context15.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context15.next = 4;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "没有获取到团购商品id"
              }));

            case 4:
              _req$body15 = req.body, username = _req$body15.username, token = _req$body15.token;

              if (username) {
                _context15.next = 7;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context15.next = 9;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context15.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context15.sent;

              if (user) {
                _context15.next = 14;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context15.next = 16;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_7__["default"].findById(gid);

            case 16:
              groupbuy = _context15.sent;

              if (groupbuy) {
                _context15.next = 19;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "待收藏团购商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(groupbuy.author))) {
                _context15.next = 21;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "不能收藏自己的团购商品"
              }));

            case 21:
              if (!(user.collects3.includes(groupbuy._id) && groupbuy.dianzans_groupbuy.includes(user._id))) {
                _context15.next = 23;
                break;
              }

              return _context15.abrupt("return", res.status(400).json({
                message: "你已经收藏过该团购商品"
              }));

            case 23:
              user.collects3.push(groupbuy);
              _context15.next = 26;
              return user.save();

            case 26:
              groupbuy.dianzans_groupbuy.push(user);
              _context15.next = 29;
              return groupbuy.save();

            case 29:
              return _context15.abrupt("return", res.json({
                message: "成功收藏团购商品",
                data: user
              }));

            case 32:
              _context15.prev = 32;
              _context15.t0 = _context15["catch"](0);
              return _context15.abrupt("return", res.status(400).json({
                message: _context15.t0.message
              }));

            case 35:
            case "end":
              return _context15.stop();
          }
        }
      }, _callee15, null, [[0, 32]]);
    }));

    return function (_x29, _x30) {
      return _ref15.apply(this, arguments);
    };
  }()), //用户取消团购商品收藏
  app.patch('/api/users/uncollects3/:gid', /*#__PURE__*/function () {
    var _ref16 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee16(req, res) {
      var gid, _req$body16, username, token, user, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee16$(_context16) {
        while (1) {
          switch (_context16.prev = _context16.next) {
            case 0:
              _context16.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context16.next = 4;
                break;
              }

              return _context16.abrupt("return", res.status(400).json({
                message: "没有获取到团购商品id"
              }));

            case 4:
              _req$body16 = req.body, username = _req$body16.username, token = _req$body16.token;

              if (username) {
                _context16.next = 7;
                break;
              }

              return _context16.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context16.next = 9;
                break;
              }

              return _context16.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context16.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context16.sent;

              if (user) {
                _context16.next = 14;
                break;
              }

              return _context16.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context16.next = 16;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_7__["default"].findById(gid);

            case 16:
              groupbuy = _context16.sent;

              if (groupbuy) {
                _context16.next = 19;
                break;
              }

              return _context16.abrupt("return", res.status(400).json({
                message: "该收藏团购商品不存在"
              }));

            case 19:
              if (!(!user.collects3.includes(groupbuy._id) && !groupbuy.dianzans_groupbuy.includes(user._id))) {
                _context16.next = 21;
                break;
              }

              return _context16.abrupt("return", res.status(400).json({
                message: "你没收藏过该团购商品"
              }));

            case 21:
              user.collects3.pull(groupbuy);
              _context16.next = 24;
              return user.save();

            case 24:
              groupbuy.dianzans_groupbuy.pull(user);
              _context16.next = 27;
              return groupbuy.save();

            case 27:
              return _context16.abrupt("return", res.json({
                message: "成功取消团购商品收藏",
                data: user
              }));

            case 30:
              _context16.prev = 30;
              _context16.t0 = _context16["catch"](0);
              return _context16.abrupt("return", res.status(400).json({
                message: _context16.t0.message
              }));

            case 33:
            case "end":
              return _context16.stop();
          }
        }
      }, _callee16, null, [[0, 30]]);
    }));

    return function (_x31, _x32) {
      return _ref16.apply(this, arguments);
    };
  }()), //用户收藏商铺商品
  app.patch('/api/users/collects4/:sid', /*#__PURE__*/function () {
    var _ref17 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee17(req, res) {
      var sid, _req$body17, username, token, user, storecommodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee17$(_context17) {
        while (1) {
          switch (_context17.prev = _context17.next) {
            case 0:
              _context17.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context17.next = 4;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "没有获取到商铺商品id"
              }));

            case 4:
              _req$body17 = req.body, username = _req$body17.username, token = _req$body17.token;

              if (username) {
                _context17.next = 7;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context17.next = 9;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context17.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context17.sent;

              if (user) {
                _context17.next = 14;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context17.next = 16;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_14__["default"].findById(sid);

            case 16:
              storecommodity = _context17.sent;

              if (storecommodity) {
                _context17.next = 19;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "待收藏商铺商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(storecommodity.author.author))) {
                _context17.next = 21;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "不能收藏自己的商品"
              }));

            case 21:
              if (!(user.collects4.includes(storecommodity._id) && storecommodity.dianzans_storecommodity.includes(user._id))) {
                _context17.next = 23;
                break;
              }

              return _context17.abrupt("return", res.status(400).json({
                message: "你已经收藏过该商铺商品"
              }));

            case 23:
              user.collects4.push(storecommodity);
              _context17.next = 26;
              return user.save();

            case 26:
              storecommodity.dianzans_storecommodity.push(user);
              _context17.next = 29;
              return storecommodity.save();

            case 29:
              return _context17.abrupt("return", res.json({
                message: "成功收藏商铺商品",
                data: user
              }));

            case 32:
              _context17.prev = 32;
              _context17.t0 = _context17["catch"](0);
              return _context17.abrupt("return", res.status(400).json({
                message: _context17.t0.message
              }));

            case 35:
            case "end":
              return _context17.stop();
          }
        }
      }, _callee17, null, [[0, 32]]);
    }));

    return function (_x33, _x34) {
      return _ref17.apply(this, arguments);
    };
  }()), //用户取消商品收藏
  app.patch('/api/users/uncollects4/:sid', /*#__PURE__*/function () {
    var _ref18 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee18(req, res) {
      var sid, _req$body18, username, token, user, storecommodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee18$(_context18) {
        while (1) {
          switch (_context18.prev = _context18.next) {
            case 0:
              _context18.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context18.next = 4;
                break;
              }

              return _context18.abrupt("return", res.status(400).json({
                message: "没有获取到商铺商品id"
              }));

            case 4:
              _req$body18 = req.body, username = _req$body18.username, token = _req$body18.token;

              if (username) {
                _context18.next = 7;
                break;
              }

              return _context18.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context18.next = 9;
                break;
              }

              return _context18.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context18.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context18.sent;

              if (user) {
                _context18.next = 14;
                break;
              }

              return _context18.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context18.next = 16;
              return _model_Storecommodity__WEBPACK_IMPORTED_MODULE_14__["default"].findById(sid);

            case 16:
              storecommodity = _context18.sent;

              if (storecommodity) {
                _context18.next = 19;
                break;
              }

              return _context18.abrupt("return", res.status(400).json({
                message: "该收藏商铺商品不存在"
              }));

            case 19:
              if (!(!user.collects4.includes(storecommodity._id) && !storecommodity.dianzans_storecommodity.includes(user._id))) {
                _context18.next = 21;
                break;
              }

              return _context18.abrupt("return", res.status(400).json({
                message: "你没收藏过该商铺商品"
              }));

            case 21:
              user.collects4.pull(storecommodity);
              _context18.next = 24;
              return user.save();

            case 24:
              storecommodity.dianzans_storecommodity.pull(user);
              _context18.next = 27;
              return storecommodity.save();

            case 27:
              return _context18.abrupt("return", res.json({
                message: "成功取消商品收藏",
                data: user
              }));

            case 30:
              _context18.prev = 30;
              _context18.t0 = _context18["catch"](0);
              return _context18.abrupt("return", res.status(400).json({
                message: _context18.t0.message
              }));

            case 33:
            case "end":
              return _context18.stop();
          }
        }
      }, _callee18, null, [[0, 30]]);
    }));

    return function (_x35, _x36) {
      return _ref18.apply(this, arguments);
    };
  }()), //商品加入购物车
  app.patch('/api/shoppingcarts/putin/:cid', /*#__PURE__*/function () {
    var _ref19 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee19(req, res) {
      var cid, _req$body19, username, token, user, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee19$(_context19) {
        while (1) {
          switch (_context19.prev = _context19.next) {
            case 0:
              _context19.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context19.next = 4;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "没有获取到商品id"
              }));

            case 4:
              _req$body19 = req.body, username = _req$body19.username, token = _req$body19.token;

              if (username) {
                _context19.next = 7;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context19.next = 9;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context19.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context19.sent;

              if (user) {
                _context19.next = 14;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context19.next = 16;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_6__["default"].findById(cid);

            case 16:
              commodity = _context19.sent;

              if (commodity) {
                _context19.next = 19;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "待加入购物车商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(commodity.author))) {
                _context19.next = 21;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "你是该商品的发布者无法购买该商品"
              }));

            case 21:
              if (!user.shoppingcarts.includes(commodity._id)) {
                _context19.next = 23;
                break;
              }

              return _context19.abrupt("return", res.status(400).json({
                message: "该商品已经在购物车里了哟~"
              }));

            case 23:
              user.shoppingcarts.push(commodity);
              _context19.next = 26;
              return user.save();

            case 26:
              return _context19.abrupt("return", res.json({
                message: "商品成功加入购物车",
                data: user
              }));

            case 29:
              _context19.prev = 29;
              _context19.t0 = _context19["catch"](0);
              return _context19.abrupt("return", res.status(400).json({
                message: _context19.t0.message
              }));

            case 32:
            case "end":
              return _context19.stop();
          }
        }
      }, _callee19, null, [[0, 29]]);
    }));

    return function (_x37, _x38) {
      return _ref19.apply(this, arguments);
    };
  }()), //商品移出购物车
  app.patch('/api/shoppingcarts/takeout/:cid', /*#__PURE__*/function () {
    var _ref20 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee20(req, res) {
      var cid, _req$body20, username, token, user, commodity;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee20$(_context20) {
        while (1) {
          switch (_context20.prev = _context20.next) {
            case 0:
              _context20.prev = 0;
              cid = req.params.cid;

              if (cid) {
                _context20.next = 4;
                break;
              }

              return _context20.abrupt("return", res.status(400).json({
                message: "没有获取到商品id"
              }));

            case 4:
              _req$body20 = req.body, username = _req$body20.username, token = _req$body20.token;

              if (username) {
                _context20.next = 7;
                break;
              }

              return _context20.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context20.next = 9;
                break;
              }

              return _context20.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context20.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context20.sent;

              if (user) {
                _context20.next = 14;
                break;
              }

              return _context20.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context20.next = 16;
              return _model_Commodity__WEBPACK_IMPORTED_MODULE_6__["default"].findById(cid);

            case 16:
              commodity = _context20.sent;

              if (commodity) {
                _context20.next = 19;
                break;
              }

              return _context20.abrupt("return", res.status(400).json({
                message: "该商品不存在"
              }));

            case 19:
              if (user.shoppingcarts.includes(commodity._id)) {
                _context20.next = 21;
                break;
              }

              return _context20.abrupt("return", res.status(400).json({
                message: "该商品您未加入过购物车"
              }));

            case 21:
              user.shoppingcarts.pull(commodity);
              _context20.next = 24;
              return user.save();

            case 24:
              return _context20.abrupt("return", res.json({
                message: "成功将商品移出购物车",
                data: user
              }));

            case 27:
              _context20.prev = 27;
              _context20.t0 = _context20["catch"](0);
              return _context20.abrupt("return", res.status(400).json({
                message: _context20.t0.message
              }));

            case 30:
            case "end":
              return _context20.stop();
          }
        }
      }, _callee20, null, [[0, 27]]);
    }));

    return function (_x39, _x40) {
      return _ref20.apply(this, arguments);
    };
  }()), //二手商品加入购物车
  app.patch('/api/shoppingcarts2/putin/:sid', /*#__PURE__*/function () {
    var _ref21 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee21(req, res) {
      var sid, _req$body21, username, token, user, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee21$(_context21) {
        while (1) {
          switch (_context21.prev = _context21.next) {
            case 0:
              _context21.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context21.next = 4;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "没有获取到二手商品id"
              }));

            case 4:
              _req$body21 = req.body, username = _req$body21.username, token = _req$body21.token;

              if (username) {
                _context21.next = 7;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context21.next = 9;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context21.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context21.sent;

              if (user) {
                _context21.next = 14;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context21.next = 16;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_8__["default"].findById(sid);

            case 16:
              secondhand = _context21.sent;

              if (secondhand) {
                _context21.next = 19;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "待加入购物车的二手商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(secondhand.author))) {
                _context21.next = 21;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "你是该二手商品的发布者无法购买该商品"
              }));

            case 21:
              if (!user.shoppingcarts2.includes(secondhand._id)) {
                _context21.next = 23;
                break;
              }

              return _context21.abrupt("return", res.status(400).json({
                message: "该二手商品您已经加入过购物车了"
              }));

            case 23:
              user.shoppingcarts2.push(secondhand);
              _context21.next = 26;
              return user.save();

            case 26:
              return _context21.abrupt("return", res.json({
                message: "二手商品成功加入购物车",
                data: user
              }));

            case 29:
              _context21.prev = 29;
              _context21.t0 = _context21["catch"](0);
              return _context21.abrupt("return", res.status(400).json({
                message: _context21.t0.message
              }));

            case 32:
            case "end":
              return _context21.stop();
          }
        }
      }, _callee21, null, [[0, 29]]);
    }));

    return function (_x41, _x42) {
      return _ref21.apply(this, arguments);
    };
  }()), //二手商品移出购物车
  app.patch('/api/shoppingcarts2/takeout/:sid', /*#__PURE__*/function () {
    var _ref22 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee22(req, res) {
      var sid, _req$body22, username, token, user, secondhand;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee22$(_context22) {
        while (1) {
          switch (_context22.prev = _context22.next) {
            case 0:
              _context22.prev = 0;
              sid = req.params.sid;

              if (sid) {
                _context22.next = 4;
                break;
              }

              return _context22.abrupt("return", res.status(400).json({
                message: "没有获取到二手商品id"
              }));

            case 4:
              _req$body22 = req.body, username = _req$body22.username, token = _req$body22.token;

              if (username) {
                _context22.next = 7;
                break;
              }

              return _context22.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context22.next = 9;
                break;
              }

              return _context22.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context22.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context22.sent;

              if (user) {
                _context22.next = 14;
                break;
              }

              return _context22.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context22.next = 16;
              return _model_Secondhand__WEBPACK_IMPORTED_MODULE_8__["default"].findById(sid);

            case 16:
              secondhand = _context22.sent;

              if (secondhand) {
                _context22.next = 19;
                break;
              }

              return _context22.abrupt("return", res.status(400).json({
                message: "该二手商品不存在"
              }));

            case 19:
              if (user.shoppingcarts2.includes(secondhand._id)) {
                _context22.next = 21;
                break;
              }

              return _context22.abrupt("return", res.status(400).json({
                message: "该二手商品您未加入过购物车"
              }));

            case 21:
              user.shoppingcarts2.pull(secondhand);
              _context22.next = 24;
              return user.save();

            case 24:
              return _context22.abrupt("return", res.json({
                message: "成功将二手商品移出购物车",
                data: user
              }));

            case 27:
              _context22.prev = 27;
              _context22.t0 = _context22["catch"](0);
              return _context22.abrupt("return", res.status(400).json({
                message: _context22.t0.message
              }));

            case 30:
            case "end":
              return _context22.stop();
          }
        }
      }, _callee22, null, [[0, 27]]);
    }));

    return function (_x43, _x44) {
      return _ref22.apply(this, arguments);
    };
  }()), //团购商品加入购物车
  app.patch('/api/shoppingcarts3/putin/:gid', /*#__PURE__*/function () {
    var _ref23 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee23(req, res) {
      var gid, _req$body23, username, token, user, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee23$(_context23) {
        while (1) {
          switch (_context23.prev = _context23.next) {
            case 0:
              _context23.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context23.next = 4;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "没有获取到团购商品id"
              }));

            case 4:
              _req$body23 = req.body, username = _req$body23.username, token = _req$body23.token;

              if (username) {
                _context23.next = 7;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context23.next = 9;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context23.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context23.sent;

              if (user) {
                _context23.next = 14;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context23.next = 16;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_7__["default"].findById(gid);

            case 16:
              groupbuy = _context23.sent;

              if (groupbuy) {
                _context23.next = 19;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "待加入购物车的团购商品不存在"
              }));

            case 19:
              if (!(String(user._id) === String(groupbuy.author))) {
                _context23.next = 21;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "你是该团购商品的发布者无法购买该商品"
              }));

            case 21:
              if (!user.shoppingcarts3.includes(groupbuy._id)) {
                _context23.next = 23;
                break;
              }

              return _context23.abrupt("return", res.status(400).json({
                message: "该团购商品您已经加入过购物车了"
              }));

            case 23:
              user.shoppingcarts3.push(groupbuy);
              _context23.next = 26;
              return user.save();

            case 26:
              return _context23.abrupt("return", res.json({
                message: "团购商品成功加入购物车",
                data: user
              }));

            case 29:
              _context23.prev = 29;
              _context23.t0 = _context23["catch"](0);
              return _context23.abrupt("return", res.status(400).json({
                message: _context23.t0.message
              }));

            case 32:
            case "end":
              return _context23.stop();
          }
        }
      }, _callee23, null, [[0, 29]]);
    }));

    return function (_x45, _x46) {
      return _ref23.apply(this, arguments);
    };
  }()), //团购商品移出购物车
  app.patch('/api/shoppingcarts3/takeout/:gid', /*#__PURE__*/function () {
    var _ref24 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee24(req, res) {
      var gid, _req$body24, username, token, user, groupbuy;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee24$(_context24) {
        while (1) {
          switch (_context24.prev = _context24.next) {
            case 0:
              _context24.prev = 0;
              gid = req.params.gid;

              if (gid) {
                _context24.next = 4;
                break;
              }

              return _context24.abrupt("return", res.status(400).json({
                message: "没有获取到团购商品id"
              }));

            case 4:
              _req$body24 = req.body, username = _req$body24.username, token = _req$body24.token;

              if (username) {
                _context24.next = 7;
                break;
              }

              return _context24.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context24.next = 9;
                break;
              }

              return _context24.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context24.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context24.sent;

              if (user) {
                _context24.next = 14;
                break;
              }

              return _context24.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context24.next = 16;
              return _model_Groupbuy__WEBPACK_IMPORTED_MODULE_7__["default"].findById(gid);

            case 16:
              groupbuy = _context24.sent;

              if (groupbuy) {
                _context24.next = 19;
                break;
              }

              return _context24.abrupt("return", res.status(400).json({
                message: "该团购商品不存在"
              }));

            case 19:
              if (user.shoppingcarts3.includes(groupbuy._id)) {
                _context24.next = 21;
                break;
              }

              return _context24.abrupt("return", res.status(400).json({
                message: "该团购商品您未加入过购物车"
              }));

            case 21:
              user.shoppingcarts3.pull(groupbuy);
              _context24.next = 24;
              return user.save();

            case 24:
              return _context24.abrupt("return", res.json({
                message: "成功将团购商品移出购物车",
                data: user
              }));

            case 27:
              _context24.prev = 27;
              _context24.t0 = _context24["catch"](0);
              return _context24.abrupt("return", res.status(400).json({
                message: _context24.t0.message
              }));

            case 30:
            case "end":
              return _context24.stop();
          }
        }
      }, _callee24, null, [[0, 27]]);
    }));

    return function (_x47, _x48) {
      return _ref24.apply(this, arguments);
    };
  }()), //用户点赞闲聊
  app.patch('/api/users/likes/:did', /*#__PURE__*/function () {
    var _ref25 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee25(req, res) {
      var did, _req$body25, username, token, user, discuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee25$(_context25) {
        while (1) {
          switch (_context25.prev = _context25.next) {
            case 0:
              _context25.prev = 0;
              did = req.params.did;

              if (did) {
                _context25.next = 4;
                break;
              }

              return _context25.abrupt("return", res.status(400).json({
                message: "没有获取到闲聊帖子id"
              }));

            case 4:
              _req$body25 = req.body, username = _req$body25.username, token = _req$body25.token;

              if (username) {
                _context25.next = 7;
                break;
              }

              return _context25.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context25.next = 9;
                break;
              }

              return _context25.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context25.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context25.sent;

              if (user) {
                _context25.next = 14;
                break;
              }

              return _context25.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context25.next = 16;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_9__["default"].findById(did);

            case 16:
              discuss = _context25.sent;

              if (discuss) {
                _context25.next = 19;
                break;
              }

              return _context25.abrupt("return", res.status(400).json({
                message: "待点赞帖子不存在"
              }));

            case 19:
              if (!(user.likesd.includes(discuss._id) && discuss.dianzans_discuss.includes(user._id))) {
                _context25.next = 21;
                break;
              }

              return _context25.abrupt("return", res.status(400).json({
                message: "你已经点赞过该帖子"
              }));

            case 21:
              user.likesd.push(discuss);
              _context25.next = 24;
              return user.save();

            case 24:
              discuss.dianzans_discuss.push(user);
              _context25.next = 27;
              return discuss.save();

            case 27:
              return _context25.abrupt("return", res.json({
                message: "点赞成功~",
                data: user
              }));

            case 30:
              _context25.prev = 30;
              _context25.t0 = _context25["catch"](0);
              return _context25.abrupt("return", res.status(400).json({
                message: _context25.t0.message
              }));

            case 33:
            case "end":
              return _context25.stop();
          }
        }
      }, _callee25, null, [[0, 30]]);
    }));

    return function (_x49, _x50) {
      return _ref25.apply(this, arguments);
    };
  }()), //用户取消点赞
  app.patch('/api/users/unlikes/:did', /*#__PURE__*/function () {
    var _ref26 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee26(req, res) {
      var did, _req$body26, username, token, user, discuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee26$(_context26) {
        while (1) {
          switch (_context26.prev = _context26.next) {
            case 0:
              _context26.prev = 0;
              did = req.params.did;

              if (did) {
                _context26.next = 4;
                break;
              }

              return _context26.abrupt("return", res.status(400).json({
                message: "没有获取到闲聊帖子id"
              }));

            case 4:
              _req$body26 = req.body, username = _req$body26.username, token = _req$body26.token;

              if (username) {
                _context26.next = 7;
                break;
              }

              return _context26.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context26.next = 9;
                break;
              }

              return _context26.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context26.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context26.sent;

              if (user) {
                _context26.next = 14;
                break;
              }

              return _context26.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context26.next = 16;
              return _model_Discuss__WEBPACK_IMPORTED_MODULE_9__["default"].findById(did);

            case 16:
              discuss = _context26.sent;

              if (discuss) {
                _context26.next = 19;
                break;
              }

              return _context26.abrupt("return", res.status(400).json({
                message: "该点赞帖子不存在"
              }));

            case 19:
              if (!(!user.likesd.includes(discuss._id) && !discuss.dianzans_discuss.includes(user._id))) {
                _context26.next = 21;
                break;
              }

              return _context26.abrupt("return", res.status(400).json({
                message: "你没点赞过该用户"
              }));

            case 21:
              user.likesd.pull(discuss);
              _context26.next = 24;
              return user.save();

            case 24:
              discuss.dianzans_discuss.pull(user);
              _context26.next = 27;
              return discuss.save();

            case 27:
              return _context26.abrupt("return", res.json({
                message: "取消点赞",
                data: user
              }));

            case 30:
              _context26.prev = 30;
              _context26.t0 = _context26["catch"](0);
              return _context26.abrupt("return", res.status(400).json({
                message: _context26.t0.message
              }));

            case 33:
            case "end":
              return _context26.stop();
          }
        }
      }, _callee26, null, [[0, 30]]);
    }));

    return function (_x51, _x52) {
      return _ref26.apply(this, arguments);
    };
  }()), //用户点赞求助
  app.patch('/api/users/likes2/:hid', /*#__PURE__*/function () {
    var _ref27 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee27(req, res) {
      var hid, _req$body27, username, token, user, helpdiscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee27$(_context27) {
        while (1) {
          switch (_context27.prev = _context27.next) {
            case 0:
              _context27.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context27.next = 4;
                break;
              }

              return _context27.abrupt("return", res.status(400).json({
                message: "没有获取到求助帖子id"
              }));

            case 4:
              _req$body27 = req.body, username = _req$body27.username, token = _req$body27.token;

              if (username) {
                _context27.next = 7;
                break;
              }

              return _context27.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context27.next = 9;
                break;
              }

              return _context27.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context27.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context27.sent;

              if (user) {
                _context27.next = 14;
                break;
              }

              return _context27.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context27.next = 16;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_10__["default"].findById(hid);

            case 16:
              helpdiscuss = _context27.sent;

              if (helpdiscuss) {
                _context27.next = 19;
                break;
              }

              return _context27.abrupt("return", res.status(400).json({
                message: "待点赞帖子不存在"
              }));

            case 19:
              if (!(user.likesh.includes(helpdiscuss._id) && helpdiscuss.dianzans_helpdiscuss.includes(user._id))) {
                _context27.next = 21;
                break;
              }

              return _context27.abrupt("return", res.status(400).json({
                message: "你已经点赞过该帖子"
              }));

            case 21:
              user.likesh.push(helpdiscuss);
              _context27.next = 24;
              return user.save();

            case 24:
              helpdiscuss.dianzans_helpdiscuss.push(user);
              _context27.next = 27;
              return helpdiscuss.save();

            case 27:
              return _context27.abrupt("return", res.json({
                message: "点赞成功~",
                data: user
              }));

            case 30:
              _context27.prev = 30;
              _context27.t0 = _context27["catch"](0);
              return _context27.abrupt("return", res.status(400).json({
                message: _context27.t0.message
              }));

            case 33:
            case "end":
              return _context27.stop();
          }
        }
      }, _callee27, null, [[0, 30]]);
    }));

    return function (_x53, _x54) {
      return _ref27.apply(this, arguments);
    };
  }()), //用户取消点赞
  app.patch('/api/users/unlikes2/:hid', /*#__PURE__*/function () {
    var _ref28 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee28(req, res) {
      var hid, _req$body28, username, token, user, helpdiscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee28$(_context28) {
        while (1) {
          switch (_context28.prev = _context28.next) {
            case 0:
              _context28.prev = 0;
              hid = req.params.hid;

              if (hid) {
                _context28.next = 4;
                break;
              }

              return _context28.abrupt("return", res.status(400).json({
                message: "没有获取到求助帖子id"
              }));

            case 4:
              _req$body28 = req.body, username = _req$body28.username, token = _req$body28.token;

              if (username) {
                _context28.next = 7;
                break;
              }

              return _context28.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context28.next = 9;
                break;
              }

              return _context28.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context28.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context28.sent;

              if (user) {
                _context28.next = 14;
                break;
              }

              return _context28.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context28.next = 16;
              return _model_Helpdiscuss__WEBPACK_IMPORTED_MODULE_10__["default"].findById(hid);

            case 16:
              helpdiscuss = _context28.sent;

              if (helpdiscuss) {
                _context28.next = 19;
                break;
              }

              return _context28.abrupt("return", res.status(400).json({
                message: "该点赞帖子不存在"
              }));

            case 19:
              if (!(!user.likesh.includes(helpdiscuss._id) && !helpdiscuss.dianzans_helpdiscuss.includes(user._id))) {
                _context28.next = 21;
                break;
              }

              return _context28.abrupt("return", res.status(400).json({
                message: "你没点赞过该用户"
              }));

            case 21:
              user.likesh.pull(helpdiscuss);
              _context28.next = 24;
              return user.save();

            case 24:
              helpdiscuss.dianzans_helpdiscuss.pull(user);
              _context28.next = 27;
              return helpdiscuss.save();

            case 27:
              return _context28.abrupt("return", res.json({
                message: "取消点赞",
                data: user
              }));

            case 30:
              _context28.prev = 30;
              _context28.t0 = _context28["catch"](0);
              return _context28.abrupt("return", res.status(400).json({
                message: _context28.t0.message
              }));

            case 33:
            case "end":
              return _context28.stop();
          }
        }
      }, _callee28, null, [[0, 30]]);
    }));

    return function (_x55, _x56) {
      return _ref28.apply(this, arguments);
    };
  }()), //用户点赞种草
  app.patch('/api/users/likes3/:lid', /*#__PURE__*/function () {
    var _ref29 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee29(req, res) {
      var lid, _req$body29, username, token, user, likediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee29$(_context29) {
        while (1) {
          switch (_context29.prev = _context29.next) {
            case 0:
              _context29.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context29.next = 4;
                break;
              }

              return _context29.abrupt("return", res.status(400).json({
                message: "没有获取到种草帖子id"
              }));

            case 4:
              _req$body29 = req.body, username = _req$body29.username, token = _req$body29.token;

              if (username) {
                _context29.next = 7;
                break;
              }

              return _context29.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context29.next = 9;
                break;
              }

              return _context29.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context29.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context29.sent;

              if (user) {
                _context29.next = 14;
                break;
              }

              return _context29.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context29.next = 16;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_11__["default"].findById(lid);

            case 16:
              likediscuss = _context29.sent;

              if (likediscuss) {
                _context29.next = 19;
                break;
              }

              return _context29.abrupt("return", res.status(400).json({
                message: "待点赞帖子不存在"
              }));

            case 19:
              if (!(user.likesl.includes(likediscuss._id) && likediscuss.dianzans_likediscuss.includes(user._id))) {
                _context29.next = 21;
                break;
              }

              return _context29.abrupt("return", res.status(400).json({
                message: "你已经点赞过该帖子"
              }));

            case 21:
              user.likesl.push(likediscuss);
              _context29.next = 24;
              return user.save();

            case 24:
              likediscuss.dianzans_likediscuss.push(user);
              _context29.next = 27;
              return likediscuss.save();

            case 27:
              return _context29.abrupt("return", res.json({
                message: "点赞成功~",
                data: user
              }));

            case 30:
              _context29.prev = 30;
              _context29.t0 = _context29["catch"](0);
              return _context29.abrupt("return", res.status(400).json({
                message: _context29.t0.message
              }));

            case 33:
            case "end":
              return _context29.stop();
          }
        }
      }, _callee29, null, [[0, 30]]);
    }));

    return function (_x57, _x58) {
      return _ref29.apply(this, arguments);
    };
  }()), //用户取消点赞
  app.patch('/api/users/unlikes3/:lid', /*#__PURE__*/function () {
    var _ref30 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee30(req, res) {
      var lid, _req$body30, username, token, user, likediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee30$(_context30) {
        while (1) {
          switch (_context30.prev = _context30.next) {
            case 0:
              _context30.prev = 0;
              lid = req.params.lid;

              if (lid) {
                _context30.next = 4;
                break;
              }

              return _context30.abrupt("return", res.status(400).json({
                message: "没有获取到求助帖子id"
              }));

            case 4:
              _req$body30 = req.body, username = _req$body30.username, token = _req$body30.token;

              if (username) {
                _context30.next = 7;
                break;
              }

              return _context30.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context30.next = 9;
                break;
              }

              return _context30.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context30.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context30.sent;

              if (user) {
                _context30.next = 14;
                break;
              }

              return _context30.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context30.next = 16;
              return _model_Likediscuss__WEBPACK_IMPORTED_MODULE_11__["default"].findById(lid);

            case 16:
              likediscuss = _context30.sent;

              if (likediscuss) {
                _context30.next = 19;
                break;
              }

              return _context30.abrupt("return", res.status(400).json({
                message: "该点赞帖子不存在"
              }));

            case 19:
              if (!(!user.likesl.includes(likediscuss._id) && !likediscuss.dianzans_likediscuss.includes(user._id))) {
                _context30.next = 21;
                break;
              }

              return _context30.abrupt("return", res.status(400).json({
                message: "你没点赞过该用户"
              }));

            case 21:
              user.likesl.pull(likediscuss);
              _context30.next = 24;
              return user.save();

            case 24:
              likediscuss.dianzans_likediscuss.pull(user);
              _context30.next = 27;
              return likediscuss.save();

            case 27:
              return _context30.abrupt("return", res.json({
                message: "取消点赞",
                data: user
              }));

            case 30:
              _context30.prev = 30;
              _context30.t0 = _context30["catch"](0);
              return _context30.abrupt("return", res.status(400).json({
                message: _context30.t0.message
              }));

            case 33:
            case "end":
              return _context30.stop();
          }
        }
      }, _callee30, null, [[0, 30]]);
    }));

    return function (_x59, _x60) {
      return _ref30.apply(this, arguments);
    };
  }()), //用户点赞种草
  app.patch('/api/users/likes4/:uid', /*#__PURE__*/function () {
    var _ref31 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee31(req, res) {
      var uid, _req$body31, username, token, user, unlikediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee31$(_context31) {
        while (1) {
          switch (_context31.prev = _context31.next) {
            case 0:
              _context31.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context31.next = 4;
                break;
              }

              return _context31.abrupt("return", res.status(400).json({
                message: "没有获取到拔草帖子id"
              }));

            case 4:
              _req$body31 = req.body, username = _req$body31.username, token = _req$body31.token;

              if (username) {
                _context31.next = 7;
                break;
              }

              return _context31.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context31.next = 9;
                break;
              }

              return _context31.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context31.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context31.sent;

              if (user) {
                _context31.next = 14;
                break;
              }

              return _context31.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context31.next = 16;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_12__["default"].findById(uid);

            case 16:
              unlikediscuss = _context31.sent;

              if (unlikediscuss) {
                _context31.next = 19;
                break;
              }

              return _context31.abrupt("return", res.status(400).json({
                message: "待点赞帖子不存在"
              }));

            case 19:
              if (!(user.likesu.includes(unlikediscuss._id) && unlikediscuss.dianzans_unlikediscuss.includes(user._id))) {
                _context31.next = 21;
                break;
              }

              return _context31.abrupt("return", res.status(400).json({
                message: "你已经点赞过该帖子"
              }));

            case 21:
              user.likesu.push(unlikediscuss);
              _context31.next = 24;
              return user.save();

            case 24:
              unlikediscuss.dianzans_unlikediscuss.push(user);
              _context31.next = 27;
              return unlikediscuss.save();

            case 27:
              return _context31.abrupt("return", res.json({
                message: "点赞成功~",
                data: user
              }));

            case 30:
              _context31.prev = 30;
              _context31.t0 = _context31["catch"](0);
              return _context31.abrupt("return", res.status(400).json({
                message: _context31.t0.message
              }));

            case 33:
            case "end":
              return _context31.stop();
          }
        }
      }, _callee31, null, [[0, 30]]);
    }));

    return function (_x61, _x62) {
      return _ref31.apply(this, arguments);
    };
  }()), //用户取消点赞
  app.patch('/api/users/unlikes4/:uid', /*#__PURE__*/function () {
    var _ref32 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee32(req, res) {
      var uid, _req$body32, username, token, user, unlikediscuss;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee32$(_context32) {
        while (1) {
          switch (_context32.prev = _context32.next) {
            case 0:
              _context32.prev = 0;
              uid = req.params.uid;

              if (uid) {
                _context32.next = 4;
                break;
              }

              return _context32.abrupt("return", res.status(400).json({
                message: "没有获取到求助帖子id"
              }));

            case 4:
              _req$body32 = req.body, username = _req$body32.username, token = _req$body32.token;

              if (username) {
                _context32.next = 7;
                break;
              }

              return _context32.abrupt("return", res.status(400).json({
                message: "没有获取到用户名"
              }));

            case 7:
              if (token) {
                _context32.next = 9;
                break;
              }

              return _context32.abrupt("return", res.status(400).json({
                message: "没有获取到token"
              }));

            case 9:
              _context32.next = 11;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findOne({
                username: username,
                token: token
              });

            case 11:
              user = _context32.sent;

              if (user) {
                _context32.next = 14;
                break;
              }

              return _context32.abrupt("return", res.status(400).json({
                message: "token已过期，请重新登陆"
              }));

            case 14:
              _context32.next = 16;
              return _model_Unlikediscuss__WEBPACK_IMPORTED_MODULE_12__["default"].findById(uid);

            case 16:
              unlikediscuss = _context32.sent;

              if (unlikediscuss) {
                _context32.next = 19;
                break;
              }

              return _context32.abrupt("return", res.status(400).json({
                message: "该点赞帖子不存在"
              }));

            case 19:
              if (!(!user.likesu.includes(unlikediscuss._id) && !unlikediscuss.dianzans_unlikediscuss.includes(user._id))) {
                _context32.next = 21;
                break;
              }

              return _context32.abrupt("return", res.status(400).json({
                message: "你没点赞过该用户"
              }));

            case 21:
              user.likesu.pull(unlikediscuss);
              _context32.next = 24;
              return user.save();

            case 24:
              unlikediscuss.dianzans_unlikediscuss.pull(user);
              _context32.next = 27;
              return unlikediscuss.save();

            case 27:
              return _context32.abrupt("return", res.json({
                message: "取消点赞",
                data: user
              }));

            case 30:
              _context32.prev = 30;
              _context32.t0 = _context32["catch"](0);
              return _context32.abrupt("return", res.status(400).json({
                message: _context32.t0.message
              }));

            case 33:
            case "end":
              return _context32.stop();
          }
        }
      }, _callee32, null, [[0, 30]]);
    }));

    return function (_x63, _x64) {
      return _ref32.apply(this, arguments);
    };
  }()), //获取用户信息接口
  app.get('/api/users/:uid', /*#__PURE__*/function () {
    var _ref33 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee33(req, res) {
      var uid, user;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee33$(_context33) {
        while (1) {
          switch (_context33.prev = _context33.next) {
            case 0:
              _context33.prev = 0;
              uid = req.params.uid; //根据参数获取uid

              if (uid) {
                _context33.next = 4;
                break;
              }

              return _context33.abrupt("return", res.status(400).json({
                message: "没有输入用户的ID"
              }));

            case 4:
              _context33.next = 6;
              return _model_User__WEBPACK_IMPORTED_MODULE_2__["default"].findById(uid) // 链式写法，获取相关模型信息
              .populate("discusses", 'title content posttime pictures').populate("helpdiscusses", 'title content posttime pictures').populate("likediscusses", 'title content posttime pictures').populate("unlikediscusses", 'title content posttime pictures').populate("mcommodities", 'category title content posttime pictures').populate("cinformations", 'category title content posttime pictures').populate("stores").populate("groupbuys", 'category title content posttime pictures').populate("secondhands", 'category title content posttime pictures').populate("collects").populate("collects2").populate("collects3").populate("collects4").populate("shoppingcarts", "category title content price posttime pictures").populate("shoppingcarts2", "category title content price posttime pictures").populate("shoppingcarts3", "category title content price posttime pictures").populate("followers").populate("fans").populate("followers2").populate("likesd").populate("likesh").populate("likesl").populate("likesu").populate("pletters");

            case 6:
              user = _context33.sent;

              if (user) {
                _context33.next = 9;
                break;
              }

              return _context33.abrupt("return", res.status(400).json({
                message: "该用户不存在"
              }));

            case 9:
              user.password = null;
              user.token = null;
              return _context33.abrupt("return", res.json({
                data: user
              }));

            case 14:
              _context33.prev = 14;
              _context33.t0 = _context33["catch"](0);
              return _context33.abrupt("return", res.status(400).json({
                message: _context33.t0.message
              }));

            case 17:
            case "end":
              return _context33.stop();
          }
        }
      }, _callee33, null, [[0, 14]]);
    }));

    return function (_x65, _x66) {
      return _ref33.apply(this, arguments);
    };
  }());
};

/* harmony default export */ __webpack_exports__["default"] = (userAPIs);

/***/ }),

/***/ "./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/
/*! exports provided: HOST, PORT, DOMAIN, DOMAIN2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HOST", function() { return HOST; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PORT", function() { return PORT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMAIN", function() { return DOMAIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMAIN2", function() { return DOMAIN2; });
var HOST = 'http://localhost';
var PORT = 3000;
var DOMAIN = 'SYM';
var DOMAIN2 = 'SYM2';

/***/ }),

/***/ "./src/jsx/App.jsx":
/*!*************************!*\
  !*** ./src/jsx/App.jsx ***!
  \*************************/
/*! exports provided: userContext, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userContext", function() { return userContext; });
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Header */ "./src/jsx/Header.jsx");
/* harmony import */ var _Footer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Footer */ "./src/jsx/Footer.jsx");
/* harmony import */ var _HomePage_HomePage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./HomePage/HomePage */ "./src/jsx/HomePage/HomePage.jsx");
/* harmony import */ var _CommodityListPage_Headerleft__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./CommodityListPage/Headerleft */ "./src/jsx/CommodityListPage/Headerleft.jsx");
/* harmony import */ var _CommodityListPage_Postcommodity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./CommodityListPage/Postcommodity */ "./src/jsx/CommodityListPage/Postcommodity.jsx");
/* harmony import */ var _Mystore_Postcommodity_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Mystore/Postcommodity_store */ "./src/jsx/Mystore/Postcommodity_store.jsx");
/* harmony import */ var _SecondhandPage_Postsecondhand__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./SecondhandPage/Postsecondhand */ "./src/jsx/SecondhandPage/Postsecondhand.jsx");
/* harmony import */ var _GroupbuyPage_Postgroupbuy__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./GroupbuyPage/Postgroupbuy */ "./src/jsx/GroupbuyPage/Postgroupbuy.jsx");
/* harmony import */ var _DiscussPage_Postdiscuss__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./DiscussPage/Postdiscuss */ "./src/jsx/DiscussPage/Postdiscuss.jsx");
/* harmony import */ var _HelpDisPage_Posthelpdiscuss__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./HelpDisPage/Posthelpdiscuss */ "./src/jsx/HelpDisPage/Posthelpdiscuss.jsx");
/* harmony import */ var _LikeDisPage_Postlikediscuss__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./LikeDisPage/Postlikediscuss */ "./src/jsx/LikeDisPage/Postlikediscuss.jsx");
/* harmony import */ var _UnlikeDisPage_Postunlikediscuss__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./UnlikeDisPage/Postunlikediscuss */ "./src/jsx/UnlikeDisPage/Postunlikediscuss.jsx");
/* harmony import */ var _ProfilePageclick_ProfilePageclick__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ProfilePageclick/ProfilePageclick */ "./src/jsx/ProfilePageclick/ProfilePageclick.jsx");
/* harmony import */ var _ProfileStorePageclick_ProfileStorePageclick__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ProfileStorePageclick/ProfileStorePageclick */ "./src/jsx/ProfileStorePageclick/ProfileStorePageclick.jsx");
/* harmony import */ var _ProfilePage_ProfilePage__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./ProfilePage/ProfilePage */ "./src/jsx/ProfilePage/ProfilePage.jsx");
/* harmony import */ var _ProfilePage_ProfilePage_followers__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ProfilePage/ProfilePage_followers */ "./src/jsx/ProfilePage/ProfilePage_followers.jsx");
/* harmony import */ var _ProfilePage_ProfilePage_fans__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ProfilePage/ProfilePage_fans */ "./src/jsx/ProfilePage/ProfilePage_fans.jsx");
/* harmony import */ var _ProfilePage_ProfileStorePage2__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ProfilePage/ProfileStorePage2 */ "./src/jsx/ProfilePage/ProfileStorePage2.jsx");
/* harmony import */ var _ProfilePage_SettingPage__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ProfilePage/SettingPage */ "./src/jsx/ProfilePage/SettingPage.jsx");
/* harmony import */ var _ProfilePage_PletterPage__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ProfilePage/PletterPage */ "./src/jsx/ProfilePage/PletterPage.jsx");
/* harmony import */ var _ProfileStorePage_SettingStorePage__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./ProfileStorePage/SettingStorePage */ "./src/jsx/ProfileStorePage/SettingStorePage.jsx");
/* harmony import */ var _ProfileStorePage_ProfileStorePage__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ProfileStorePage/ProfileStorePage */ "./src/jsx/ProfileStorePage/ProfileStorePage.jsx");
/* harmony import */ var _ProfilePage_ProfilePletter__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./ProfilePage/ProfilePletter */ "./src/jsx/ProfilePage/ProfilePletter.jsx");
/* harmony import */ var _DiscussPage_Headerleft2__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./DiscussPage/Headerleft2 */ "./src/jsx/DiscussPage/Headerleft2.jsx");
/* harmony import */ var _ProfilePage_ShoppingCart2__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./ProfilePage/ShoppingCart2 */ "./src/jsx/ProfilePage/ShoppingCart2.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../config */ "./src/config.js");































var userContext = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_3__["createContext"])({
  user: {},
  setUser: function setUser() {},
  store: {},
  setStore: function setStore() {},
  auth: false,
  setAuth: function setAuth() {},
  auth2: false,
  setAuth2: function setAuth2() {}
});

var App = function App() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      user = _useState2[0],
      setUser = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      store = _useState4[0],
      setStore = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      auth = _useState6[0],
      setAuth = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      auth2 = _useState8[0],
      setAuth2 = _useState8[1];

  var authenticate = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var data, res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_30__["DOMAIN"]);

            case 3:
              data = _context.sent;
              _context.next = 6;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_30__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_30__["PORT"], "/api/users/auth"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: data
              });

            case 6:
              res = _context.sent;
              _context.next = 9;
              return res.json();

            case 9:
              result = _context.sent;

              if (res.ok) {
                setAuth(true);
                setUser(result.data);
              }

              _context.next = 16;
              break;

            case 13:
              _context.prev = 13;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 16:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 13]]);
    }));

    return function authenticate() {
      return _ref.apply(this, arguments);
    };
  }();

  var authenticate2 = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var data, res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_30__["DOMAIN2"]);

            case 3:
              data = _context2.sent;
              _context2.next = 6;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_30__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_30__["PORT"], "/api/stores/auth"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: data
              });

            case 6:
              res = _context2.sent;
              _context2.next = 9;
              return res.json();

            case 9:
              result = _context2.sent;

              if (res.ok) {
                setAuth2(true);
                setStore(result.data);
              }

              _context2.next = 16;
              break;

            case 13:
              _context2.prev = 13;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 16:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 13]]);
    }));

    return function authenticate2() {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    authenticate();
    authenticate2();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(userContext.Provider, {
    value: {
      user: user,
      setUser: setUser,
      store: store,
      setStore: setStore,
      auth: auth,
      setAuth: setAuth,
      auth2: auth2,
      setAuth2: setAuth2
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Header__WEBPACK_IMPORTED_MODULE_5__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/",
    component: _HomePage_HomePage__WEBPACK_IMPORTED_MODULE_7__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/home",
    component: _HomePage_HomePage__WEBPACK_IMPORTED_MODULE_7__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/postcommodity",
    component: _CommodityListPage_Postcommodity__WEBPACK_IMPORTED_MODULE_9__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/poststorecommodity",
    component: _Mystore_Postcommodity_store__WEBPACK_IMPORTED_MODULE_10__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/postsecondhand",
    component: _SecondhandPage_Postsecondhand__WEBPACK_IMPORTED_MODULE_11__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/postgroupbuy",
    component: _GroupbuyPage_Postgroupbuy__WEBPACK_IMPORTED_MODULE_12__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/postdiscuss",
    component: _DiscussPage_Postdiscuss__WEBPACK_IMPORTED_MODULE_13__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/posthelpdiscuss",
    component: _HelpDisPage_Posthelpdiscuss__WEBPACK_IMPORTED_MODULE_14__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/postlikediscuss",
    component: _LikeDisPage_Postlikediscuss__WEBPACK_IMPORTED_MODULE_15__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/postunlikediscuss",
    component: _UnlikeDisPage_Postunlikediscuss__WEBPACK_IMPORTED_MODULE_16__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/profileclick/:uid",
    component: _ProfilePageclick_ProfilePageclick__WEBPACK_IMPORTED_MODULE_17__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/profilestoreinfoclick/:sid",
    component: _ProfileStorePageclick_ProfileStorePageclick__WEBPACK_IMPORTED_MODULE_18__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/commodities",
    component: _CommodityListPage_Headerleft__WEBPACK_IMPORTED_MODULE_8__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/secondhands",
    component: _CommodityListPage_Headerleft__WEBPACK_IMPORTED_MODULE_8__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/groupbuys",
    component: _CommodityListPage_Headerleft__WEBPACK_IMPORTED_MODULE_8__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/stores",
    component: _CommodityListPage_Headerleft__WEBPACK_IMPORTED_MODULE_8__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/storecommodities",
    component: _CommodityListPage_Headerleft__WEBPACK_IMPORTED_MODULE_8__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/discusses",
    component: _DiscussPage_Headerleft2__WEBPACK_IMPORTED_MODULE_28__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/helpdiscusses",
    component: _DiscussPage_Headerleft2__WEBPACK_IMPORTED_MODULE_28__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/likediscusses",
    component: _DiscussPage_Headerleft2__WEBPACK_IMPORTED_MODULE_28__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/unlikediscusses",
    component: _DiscussPage_Headerleft2__WEBPACK_IMPORTED_MODULE_28__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/shoppingcart/:uid",
    component: _ProfilePage_ShoppingCart2__WEBPACK_IMPORTED_MODULE_29__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/profile/:uid",
    component: _ProfilePage_ProfilePage__WEBPACK_IMPORTED_MODULE_19__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/followers/:uid",
    component: _ProfilePage_ProfilePage_followers__WEBPACK_IMPORTED_MODULE_20__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/fans/:uid",
    component: _ProfilePage_ProfilePage_fans__WEBPACK_IMPORTED_MODULE_21__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/followers_store/:uid",
    component: _ProfilePage_ProfileStorePage2__WEBPACK_IMPORTED_MODULE_22__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/setting/:uid",
    component: _ProfilePage_SettingPage__WEBPACK_IMPORTED_MODULE_23__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/settingstore/:sid",
    component: _ProfileStorePage_SettingStorePage__WEBPACK_IMPORTED_MODULE_25__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/profilestore/:sid",
    component: _ProfileStorePage_ProfileStorePage__WEBPACK_IMPORTED_MODULE_26__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/profilepletter/:uid",
    component: _ProfilePage_ProfilePletter__WEBPACK_IMPORTED_MODULE_27__["default"]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    path: "/pletter/:pid",
    component: _ProfilePage_PletterPage__WEBPACK_IMPORTED_MODULE_24__["default"]
  })));
};


/* harmony default export */ __webpack_exports__["default"] = (App);

/***/ }),

/***/ "./src/jsx/CommodityListPage/Carousels.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/CommodityListPage/Carousels.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var commodity = props.commodity;
  if (!commodity.pictures) return null;
  var pictures = commodity.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var Carousels = function Carousels(props) {
  var commodity = props.commodity,
      loadCommodity = props.loadCommodity;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadCommodity();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    commodity: commodity
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Carousels);

/***/ }),

/***/ "./src/jsx/CommodityListPage/Commodity.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/CommodityListPage/Commodity.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _DeleteCButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DeleteCButton */ "./src/jsx/CommodityListPage/DeleteCButton.jsx");











var UserCard = function UserCard(props) {
  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_8__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser,
      auth = _useContext.auth;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var collect = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/collects/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function collect(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var uncollect = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/uncollects/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function uncollect(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.collects) return null;
  var button = user.collects.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return uncollect(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return collect(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));

  var putin = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(target) {
      var storage, _JSON$parse3, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context3.sent;
              //storage是字符串形式
              _JSON$parse3 = JSON.parse(storage), username = _JSON$parse3.username, token = _JSON$parse3.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context3.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/shoppingcarts/putin/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context3.sent;
              _context3.next = 11;
              return res.json();

            case 11:
              result = _context3.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context3.next = 18;
              break;

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context3.t0.message);

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function putin(_x3) {
      return _ref3.apply(this, arguments);
    };
  }();

  if (!user.shoppingcarts) return;
  var shoppingcart = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return putin(floor._id);
    }
  }, "\u52A0\u5165\u8D2D\u7269\u8F66");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "orangered",
      fontSize: "28px"
    }
  }, "\uFFE5", floor.price) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, button, " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_commodity.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orange",
      borderRadius: "10px 0px 0px 10px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, shoppingcart)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orangered",
      borderRadius: "0px 10px 10px 0px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, "\u7ACB\u5373\u8D2D\u4E70"))) : null), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteCButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    cid: floor._id
  })) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var CPart = function CPart(props) {
  var commodity = props.commodity;
  if (!commodity.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: commodity.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: commodity,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var comment = props.comment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: comment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: comment
  })));
};

var CommentPart = function CommentPart(props) {
  var comments = props.comments;
  var floors = comments.map(function (comment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      comment: comment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Commodity = function Commodity(props) {
  var commodity = props.commodity,
      loadCommodity = props.loadCommodity,
      comments = props.comments;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadCommodity();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CPart, {
    commodity: commodity
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "red",
      fontSize: "18px",
      textAlign: "center"
    }
  }, "\u2193\u8BC4\u8BBA\u533A\u2193"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CommentPart, {
    comments: comments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Commodity);

/***/ }),

/***/ "./src/jsx/CommodityListPage/CommodityCard.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/CommodityListPage/CommodityCard.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var RowCard = function RowCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_4__["userContext"]),
      auth = _useContext.auth,
      user = _useContext.user,
      setUser = _useContext.setUser;

  var commodity = props.commodity;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"], {
    style: {
      width: "10rem"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/commodities/".concat(commodity._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Img, {
    variant: "top",
    src: "/upload/".concat(commodity.pictures[0]),
    style: {
      height: "140px"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Title, {
    className: "pl-2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      fontSize: "11px"
    }
  }, commodity.title.length >= 11 ? commodity.title[0] + commodity.title[1] + commodity.title[2] + commodity.title[3] + commodity.title[4] + commodity.title[5] + commodity.title[6] + commodity.title[7] + commodity.title[8] + commodity.title[9] + commodity.title[10] + "..." : commodity.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Text, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "8px",
      paddingLeft: "7px"
    }
  }, "\uFFE5"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "14px"
    }
  }, commodity.price, "\u5143"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    className: "d-flex justify-content-end text-muted"
  }, commodity.author.stores.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/profilestoreinfoclick/".concat(commodity.author.stores[0])
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["ShopOutlined"], {
    style: {
      fontSize: "20px",
      color: "#0A8ADB",
      paddingRight: "3px"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["ShopOutlined"], {
    style: {
      fontSize: "20px",
      color: "white",
      paddingRight: "3px"
    }
  })))))));
};

var CommodityCard = function CommodityCard(props) {
  var loadCommodities = props.loadCommodities,
      commodities = props.commodities;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadCommodities();
  }, []);
  var rows = commodities.map(function (commodity, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
      xs: 12,
      sm: 6,
      md: 2,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RowCard, {
      commodity: commodity
    })));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], {
    style: {
      alignContent: "stretch",
      alignItems: "stretch"
    }
  }, rows)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityCard);

/***/ }),

/***/ "./src/jsx/CommodityListPage/CommodityListPage.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/CommodityListPage/CommodityListPage.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _CommodityCard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CommodityCard */ "./src/jsx/CommodityListPage/CommodityCard.jsx");
/* harmony import */ var _CommodityPage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./CommodityPage */ "./src/jsx/CommodityListPage/CommodityPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");












var CommodityListTable = function CommodityListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      commodities = _useState2[0],
      setCommodities = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_10__["userContext"]),
      auth = _useContext.auth;

  var loadCommodities = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_9__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_9__["PORT"], "/api/commodities"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodities(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodities() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u5546\u54C1\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/postcommodity"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      color: "#0A8ADB"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CommodityCard__WEBPACK_IMPORTED_MODULE_7__["default"], {
    loadCommodities: loadCommodities,
    commodities: commodities
  }));
};

var CommodityListPage = function CommodityListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/commodities",
    component: CommodityListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/commodities/:cid",
    component: _CommodityPage__WEBPACK_IMPORTED_MODULE_8__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityListPage);

/***/ }),

/***/ "./src/jsx/CommodityListPage/CommodityPage.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/CommodityListPage/CommodityPage.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Carousels__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Carousels */ "./src/jsx/CommodityListPage/Carousels.jsx");
/* harmony import */ var _Commodity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Commodity */ "./src/jsx/CommodityListPage/Commodity.jsx");
/* harmony import */ var _PostButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PostButton */ "./src/jsx/CommodityListPage/PostButton.jsx");
/* harmony import */ var _ModifyCButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyCButton */ "./src/jsx/CommodityListPage/ModifyCButton.jsx");
/* harmony import */ var _DeleteCommodityButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteCommodityButton */ "./src/jsx/CommodityListPage/DeleteCommodityButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var CommodityPage = function CommodityPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var cid = props.match.params.cid; //从浏览器地址栏匹配到cid

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      commodity = _useState2[0],
      setCommodity = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      comments = _useState4[0],
      setComments = _useState4[1];

  var loadCommodity = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/commodities/").concat(cid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodity(result.data.commodity);
                setComments(result.data.comments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodity() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Carousels__WEBPACK_IMPORTED_MODULE_6__["default"], {
    cid: cid,
    loadCommodity: loadCommodity,
    commodity: commodity
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, commodity.author && user.username === commodity.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyCButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    cid: cid,
    loadCommodity: loadCommodity
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteCommodityButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    cid: cid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Commodity__WEBPACK_IMPORTED_MODULE_7__["default"], {
    cid: cid,
    loadCommodity: loadCommodity,
    commodity: commodity,
    comments: comments
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_PostButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    cid: cid,
    loadCommodity: loadCommodity
  }) : null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityPage);

/***/ }),

/***/ "./src/jsx/CommodityListPage/DeleteCButton.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/CommodityListPage/DeleteCButton.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteCButton = function DeleteCButton(props) {
  var cid = props.cid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/comments2/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除评论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  cid: cid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteCButton));

/***/ }),

/***/ "./src/jsx/CommodityListPage/DeleteCommodityButton.jsx":
/*!*************************************************************!*\
  !*** ./src/jsx/CommodityListPage/DeleteCommodityButton.jsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteCommodityButton = function DeleteCommodityButton(props) {
  var cid = props.cid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/commodities/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/commodities');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该商品吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  cid: cid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteCommodityButton));

/***/ }),

/***/ "./src/jsx/CommodityListPage/Headerleft.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/CommodityListPage/Headerleft.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _CommodityListPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CommodityListPage */ "./src/jsx/CommodityListPage/CommodityListPage.jsx");
/* harmony import */ var _SecondhandPage_SecondhandListPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../SecondhandPage/SecondhandListPage */ "./src/jsx/SecondhandPage/SecondhandListPage.jsx");
/* harmony import */ var _GroupbuyPage_GroupbuyListPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../GroupbuyPage/GroupbuyListPage */ "./src/jsx/GroupbuyPage/GroupbuyListPage.jsx");
/* harmony import */ var _StoreListPage_StoreListPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../StoreListPage/StoreListPage */ "./src/jsx/StoreListPage/StoreListPage.jsx");
/* harmony import */ var _Mystore_CommodityListPage_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Mystore/CommodityListPage_store */ "./src/jsx/Mystore/CommodityListPage_store.jsx");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__);










var Content = antd__WEBPACK_IMPORTED_MODULE_2__["Layout"].Content,
    Sider = antd__WEBPACK_IMPORTED_MODULE_2__["Layout"].Sider;

var Headerleft = function Headerleft() {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_1__["userContext"]),
      auth2 = _useContext.auth2,
      store = _useContext.store;

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Layout"], {
    theme: "light"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Content, {
    style: {
      padding: '0 50px'
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Layout"], {
    style: {
      padding: '24px 0'
    },
    theme: "light"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Sider, {
    width: 200
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Menu"], {
    mode: "inline",
    defaultSelectedKeys: ['1'],
    defaultOpenKeys: ['sub1'],
    style: {
      height: '100%'
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Menu"].Item, {
    key: "1",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__["AppstoreOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/commodities/"
  }, "\u5546\u54C1\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Menu"].Item, {
    key: "2",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__["UserSwitchOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/secondhands/"
  }, "\u4E8C\u624B\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Menu"].Item, {
    key: "3",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__["TeamOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/groupbuys/"
  }, "\u56E2\u8D2D\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Menu"].Item, {
    key: "4",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__["ShopOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/stores/"
  }, "\u5546\u94FA\u533A")), auth2 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Menu"].Item, {
    key: "5",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__["SmileOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/storecommodities/"
  }, "\u5546\u94FA\u5546\u54C1\u533A")) : null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Content, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CommodityListPage__WEBPACK_IMPORTED_MODULE_4__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SecondhandPage_SecondhandListPage__WEBPACK_IMPORTED_MODULE_5__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GroupbuyPage_GroupbuyListPage__WEBPACK_IMPORTED_MODULE_6__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StoreListPage_StoreListPage__WEBPACK_IMPORTED_MODULE_7__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Mystore_CommodityListPage_store__WEBPACK_IMPORTED_MODULE_8__["default"], null))))));
};

/* harmony default export */ __webpack_exports__["default"] = (Headerleft);

/***/ }),

/***/ "./src/jsx/CommodityListPage/ModifyCButton.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/CommodityListPage/ModifyCButton.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var cid = props.cid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      settings = _useState2[0],
      setSettings = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      title = _useState4[0],
      setTitle = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      content = _useState6[0],
      setContent = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      category = _useState8[0],
      setCategory = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
      price = _useState10[0],
      setPrice = _useState10[1]; // const [pictures,setPictures] = useState([])


  var loadDiscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/commodities/").concat(cid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.commodity.title);
                setContent(result.data.commodity.content);
                setCategory(result.data.commodity.category);
                setPrice(result.data.commodity.price); // setPictures(result.data.commodity.pictures)
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadDiscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadDiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifycForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "category"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u7C7B\u522B"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u7C7B\u522B",
    defaultValue: category
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "price"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4EF7\u683C"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C",
    defaultValue: price
  })));
};

var ModifyCButton = function ModifyCButton(props) {
  var cid = props.cid,
      loadCommodity = props.loadCommodity;

  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
      show = _useState12[0],
      setShow = _useState12[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var storage, _JSON$parse, username, token, title, content, category, price, formData, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              title = body.title, content = body.content, category = body.category, price = body.price;
              formData = new FormData(); //实例化声明formData

              _context2.next = 9;
              return formData.append('username', username);

            case 9:
              _context2.next = 11;
              return formData.append('token', token);

            case 11:
              _context2.next = 13;
              return formData.append('title', title);

            case 13:
              _context2.next = 15;
              return formData.append('content', content);

            case 15:
              _context2.next = 17;
              return formData.append('category', category);

            case 17:
              _context2.next = 19;
              return formData.append('price', price);

            case 19:
              _context2.next = 21;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/commodities/").concat(cid), {
                method: "PATCH",
                body: formData
              });

            case 21:
              res = _context2.sent;
              _context2.next = 24;
              return res.json();

            case 24:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadCommodity();
              } else {
                alert(result.message);
              }

              _context2.next = 31;
              break;

            case 28:
              _context2.prev = 28;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 31:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 28]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse2, username, token, form, title, content, category, price, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token;
              form = document.forms.modifycForm;
              title = form.title.value;
              content = form.content.value;
              category = form.category.value;
              price = form.price.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content,
                category: category,
                price: price
              }; //用body将三个变量封装到body里，相当于请求体

              modify(body);

            case 11:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u5546\u54C1")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    cid: cid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyCButton);

/***/ }),

/***/ "./src/jsx/CommodityListPage/PostButton.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/CommodityListPage/PostButton.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var PostForm = function PostForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "postForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })));
};

var PostButton = function PostButton(props) {
  var cid = props.cid,
      loadCommodity = props.loadCommodity;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var post = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/comments2/").concat(cid), {
                //根据商品发布讨论
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交讨论，自动关闭模态框

                loadCommodity();
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function post(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handlePost = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 2:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              form = document.forms.postForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              post(body);

            case 8:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handlePost() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-success",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u53D1\u5E03\u8BC4\u8BBA"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u53D1\u5E03\u8BC4\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PostForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (PostButton);

/***/ }),

/***/ "./src/jsx/CommodityListPage/Postcommodity.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/CommodityListPage/Postcommodity.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postcommodity = function Postcommodity(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      commodities = _useState10[0],
      setCommodities = _useState10[1];

  var loadCommodities = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/commodities"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodities(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodities() {
      return _ref.apply(this, arguments);
    };
  }();

  var postcommodity = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/commodities"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadCommodities();
                history.push('/commodities');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postcommodity(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadCommodities();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, category, price, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content, category = values.category, price = values.price;
              body = {
                title: title,
                content: content,
                category: category,
                price: price,
                filelist: filelist,
                username: username,
                token: token
              };
              postcommodity(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }(); // const handleChange = ({ fileList }) => {
  //   console.log("这个是jsx里的fileList:",fileList)
  //   setFileList(fileList)
  // }


  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u53D1\u5E03\u5546\u54C1"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入商品标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入商品内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u7C7B\u578B",
    name: "category",
    rules: [{
      required: true,
      message: "请输入商品类型"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u4EF7\u683C",
    name: "price",
    rules: [{
      required: true,
      message: "请输入商品价格"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postcommodity);

/***/ }),

/***/ "./src/jsx/DiscussPage/CarouselsD.jsx":
/*!********************************************!*\
  !*** ./src/jsx/DiscussPage/CarouselsD.jsx ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var discuss = props.discuss;
  if (!discuss.pictures) return null;
  var pictures = discuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var CarouselsD = function CarouselsD(props) {
  var discuss = props.discuss,
      loadDiscuss = props.loadDiscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadDiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    discuss: discuss
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CarouselsD);

/***/ }),

/***/ "./src/jsx/DiscussPage/DeleteCommentButton.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/DiscussPage/DeleteCommentButton.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var DeleteCommentButton = function DeleteCommentButton(props) {
  var cid = props.cid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/comments/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该回复吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  cid: cid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (DeleteCommentButton);

/***/ }),

/***/ "./src/jsx/DiscussPage/DeleteDiscussButton.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/DiscussPage/DeleteDiscussButton.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteDiscussButton = function DeleteDiscussButton(props) {
  var did = props.did,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/discusses/").concat(did), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/discusses');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该讨论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  did: did
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteDiscussButton));

/***/ }),

/***/ "./src/jsx/DiscussPage/Discuss.jsx":
/*!*****************************************!*\
  !*** ./src/jsx/DiscussPage/Discuss.jsx ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _DeleteCommentButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DeleteCommentButton */ "./src/jsx/DiscussPage/DeleteCommentButton.jsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_9__);











var UserCard = function UserCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      auth = _useContext.auth;

  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_9__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      user = _useContext2.user,
      auth = _useContext2.auth,
      setUser = _useContext2.setUser;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var like = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/likes/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function like(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var unlike = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/unlikes/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function unlike(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.likesd) return null;
  var likebutton = user.likesd.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return unlike(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return like(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteCommentButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    cid: floor._id
  })) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, likebutton, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_discuss.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var DPart = function DPart(props) {
  var discuss = props.discuss;
  if (!discuss.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: discuss.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: discuss,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var comment = props.comment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: comment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: comment
  })));
};

var CPart = function CPart(props) {
  var comments = props.comments;
  var floors = comments.map(function (comment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      comment: comment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Discuss = function Discuss(props) {
  var comments = props.comments,
      discuss = props.discuss,
      loadDiscuss = props.loadDiscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadDiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(DPart, {
    discuss: discuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CPart, {
    comments: comments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Discuss);

/***/ }),

/***/ "./src/jsx/DiscussPage/DiscussList.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/DiscussPage/DiscussList.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "85px",
    width: "105px",
    src: "/upload/".concat(picture),
    style: {
      "float": "left",
      width: "30.33%",
      paddingRight: "2px",
      paddingBottom: "5px",
      paddingLeft: "2px",
      borderRadius: "12px 12px 12px 12px"
    }
  }));
};

var Row1 = function Row1(props) {
  var discuss = props.discuss;
  if (!discuss.pictures) return null;
  var pictures = discuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__["Card"], {
    style: {
      width: 333
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    width: 32,
    height: 32,
    className: "mr-3 rounded-circle",
    src: discuss.author.avatar ? "/upload/".concat(discuss.author.avatar) : '/img/avatar.jpg',
    alt: discuss.author.nickname ? discuss.author.nickname : discuss.author.username
  }), discuss.author.nickname ? discuss.author.nickname : discuss.author.username, "\xA0\xA0", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      fontSize: "11px",
      color: "gray"
    }
  }, "(", new Date(discuss.posttime).toLocaleString(), ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      fontSize: "15px"
    }
  }, discuss.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      paddingBottom: "15px"
    }
  }, discuss.content), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], {
    to: "/discusses/".concat(discuss._id)
  }, floors)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: "/img/1.png",
    height: "35px"
  })));
};

var DiscussList = function DiscussList(props) {
  var loadDiscusses = props.loadDiscusses,
      discusses = props.discusses;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadDiscusses();
  }, []); //数据转换成每行的视图

  var rows = discusses.map(function (discuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
      md: 4,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Row1, {
      discuss: discuss
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], null, rows));
};

/* harmony default export */ __webpack_exports__["default"] = (DiscussList);

/***/ }),

/***/ "./src/jsx/DiscussPage/DiscussListPage.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/DiscussPage/DiscussListPage.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _DiscussList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DiscussList */ "./src/jsx/DiscussPage/DiscussList.jsx");
/* harmony import */ var _DiscussPage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DiscussPage */ "./src/jsx/DiscussPage/DiscussPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");







 // import PostDiscussesButton from './PostDiscussesButton'






var DiscussListTable = function DiscussListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      discusses = _useState2[0],
      setDiscusses = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_11__["userContext"]),
      auth = _useContext.auth;

  var loadDiscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_10__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_10__["PORT"], "/api/discusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setDiscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadDiscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u95F2\u804A\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/postdiscuss"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      paddingBottom: "30px",
      color: "green"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DiscussList__WEBPACK_IMPORTED_MODULE_8__["default"], {
    loadDiscusses: loadDiscusses,
    discusses: discusses
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__["BackTop"], null));
};

var DiscussListPage = function DiscussListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/discusses",
    component: DiscussListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/discusses/:did",
    component: _DiscussPage__WEBPACK_IMPORTED_MODULE_9__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (DiscussListPage);

/***/ }),

/***/ "./src/jsx/DiscussPage/DiscussPage.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/DiscussPage/DiscussPage.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Discuss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Discuss */ "./src/jsx/DiscussPage/Discuss.jsx");
/* harmony import */ var _CarouselsD__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CarouselsD */ "./src/jsx/DiscussPage/CarouselsD.jsx");
/* harmony import */ var _ReplyForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ReplyForm */ "./src/jsx/DiscussPage/ReplyForm.jsx");
/* harmony import */ var _ModifyButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyButton */ "./src/jsx/DiscussPage/ModifyButton.jsx");
/* harmony import */ var _DeleteDiscussButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteDiscussButton */ "./src/jsx/DiscussPage/DeleteDiscussButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var DiscussPage = function DiscussPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var did = props.match.params.did; //从浏览器地址栏匹配到did

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      discuss = _useState2[0],
      setDiscuss = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      comments = _useState4[0],
      setComments = _useState4[1];

  var loadDiscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/discusses/").concat(did));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setDiscuss(result.data.discuss);
                setComments(result.data.comments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadDiscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CarouselsD__WEBPACK_IMPORTED_MODULE_7__["default"], {
    did: did,
    loadDiscuss: loadDiscuss,
    discuss: discuss
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, discuss.author && user.username === discuss.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    did: did,
    loadDiscuss: loadDiscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteDiscussButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    did: did
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Discuss__WEBPACK_IMPORTED_MODULE_6__["default"], {
    did: did,
    loadDiscuss: loadDiscuss,
    comments: comments,
    discuss: discuss
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ReplyForm__WEBPACK_IMPORTED_MODULE_8__["default"], {
    did: did,
    loadDiscuss: loadDiscuss
  }) : null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (DiscussPage);

/***/ }),

/***/ "./src/jsx/DiscussPage/Headerleft2.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/DiscussPage/Headerleft2.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _DiscussListPage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DiscussListPage */ "./src/jsx/DiscussPage/DiscussListPage.jsx");
/* harmony import */ var _HelpDisPage_HelpdiscussListPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../HelpDisPage/HelpdiscussListPage */ "./src/jsx/HelpDisPage/HelpdiscussListPage.jsx");
/* harmony import */ var _LikeDisPage_LikediscussListPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../LikeDisPage/LikediscussListPage */ "./src/jsx/LikeDisPage/LikediscussListPage.jsx");
/* harmony import */ var _UnlikeDisPage_UnlikediscussListPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../UnlikeDisPage/UnlikediscussListPage */ "./src/jsx/UnlikeDisPage/UnlikediscussListPage.jsx");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__);








var Header = antd__WEBPACK_IMPORTED_MODULE_0__["Layout"].Header,
    Content = antd__WEBPACK_IMPORTED_MODULE_0__["Layout"].Content,
    Sider = antd__WEBPACK_IMPORTED_MODULE_0__["Layout"].Sider;

var Headerleft2 = function Headerleft2() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Layout"], {
    theme: "light"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Content, {
    style: {
      padding: '0 50px'
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Layout"], {
    style: {
      padding: '24px 0'
    },
    theme: "light"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Sider, {
    width: 200
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Menu"], {
    mode: "inline",
    defaultSelectedKeys: ['1'],
    defaultOpenKeys: ['sub1'],
    style: {
      height: '100%'
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Menu"].Item, {
    key: "1",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["CoffeeOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], {
    to: "/discusses/"
  }, "\u95F2\u8C08\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Menu"].Item, {
    key: "2",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["SoundOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], {
    to: "/helpdiscusses/"
  }, "\u6C42\u52A9\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Menu"].Item, {
    key: "3",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], {
    to: "/likediscusses/"
  }, "\u79CD\u8349\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Menu"].Item, {
    key: "4",
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["DislikeOutlined"], null)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], {
    to: "/unlikediscusses/"
  }, "\u8E29\u96F7\u533A")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Content, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_DiscussListPage__WEBPACK_IMPORTED_MODULE_2__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_HelpDisPage_HelpdiscussListPage__WEBPACK_IMPORTED_MODULE_3__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_LikeDisPage_LikediscussListPage__WEBPACK_IMPORTED_MODULE_4__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_UnlikeDisPage_UnlikediscussListPage__WEBPACK_IMPORTED_MODULE_5__["default"], null))))));
};

/* harmony default export */ __webpack_exports__["default"] = (Headerleft2);

/***/ }),

/***/ "./src/jsx/DiscussPage/ModifyButton.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/DiscussPage/ModifyButton.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var did = props.did; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      title = _useState2[0],
      setTitle = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      content = _useState4[0],
      setContent = _useState4[1];

  var loadDiscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/discusses/").concat(did), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.discuss.title);
                setContent(result.data.discuss.content);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadDiscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadDiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifyForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u8BA8\u8BBA\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })));
};

var ModifyButton = function ModifyButton(props) {
  var did = props.did,
      loadDiscuss = props.loadDiscuss;

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      show = _useState6[0],
      setShow = _useState6[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/discusses/").concat(did), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadDiscuss();
              } else {
                alert(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse, username, token, form, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.modifyForm;
              title = form.title.value;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content
              };
              modify(body);

            case 9:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u8BA8\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    did: did
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyButton);

/***/ }),

/***/ "./src/jsx/DiscussPage/Postdiscuss.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/DiscussPage/Postdiscuss.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postdiscuss = function Postdiscuss(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      discusses = _useState10[0],
      setDiscusses = _useState10[1];

  var loadDiscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/discusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setDiscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadDiscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  var postdiscuss = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/discusses"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadDiscusses();
                history.push('/discusses');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postdiscuss(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadDiscusses();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content;
              body = {
                title: title,
                content: content,
                filelist: filelist,
                username: username,
                token: token
              };
              postdiscuss(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }();

  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u95F2\u804A\u5E16"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入帖子标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入帖子内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postdiscuss);

/***/ }),

/***/ "./src/jsx/DiscussPage/ReplyForm.jsx":
/*!*******************************************!*\
  !*** ./src/jsx/DiscussPage/ReplyForm.jsx ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");






var ReplyForm = function ReplyForm(props) {
  var did = props.did,
      loadDiscuss = props.loadDiscuss;

  var reply = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_4__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_4__["PORT"], "/api/comments/").concat(did), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body) //将body转化为字符串来调用接口

              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                loadDiscuss();
                document.forms.replyForm.content.value = "";
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function reply(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleReply = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(e) {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              e.preventDefault(); //阻止页面刷新

              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_4__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.replyForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              reply(body);

            case 9:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleReply(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"], {
    id: "replyForm",
    className: "p-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Label, null, "\u56DE\u590D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Button"], {
    variant: "primary",
    type: "submit",
    onClick: function onClick(e) {
      return handleReply(e);
    }
  }, "\u63D0\u4EA4"));
};

/* harmony default export */ __webpack_exports__["default"] = (ReplyForm);

/***/ }),

/***/ "./src/jsx/Footer.jsx":
/*!****************************!*\
  !*** ./src/jsx/Footer.jsx ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);


var Footer = function Footer() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("footer", {
    className: "mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("center", null, "Copyright \xA9 2020 JYTB", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), "All Right Reserved"));
};

/* harmony default export */ __webpack_exports__["default"] = (Footer);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/Carousels3.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/GroupbuyPage/Carousels3.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var groupbuy = props.groupbuy;
  if (!groupbuy.pictures) return null;
  var pictures = groupbuy.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var Carousels3 = function Carousels3(props) {
  var groupbuy = props.groupbuy,
      loadGroupbuy = props.loadGroupbuy;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadGroupbuy();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    groupbuy: groupbuy
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Carousels3);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/DeleteCButton.jsx":
/*!************************************************!*\
  !*** ./src/jsx/GroupbuyPage/DeleteCButton.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteCButton = function DeleteCButton(props) {
  var cid = props.cid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/comments3/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除评论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  cid: cid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteCButton));

/***/ }),

/***/ "./src/jsx/GroupbuyPage/DeleteGButton.jsx":
/*!************************************************!*\
  !*** ./src/jsx/GroupbuyPage/DeleteGButton.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteGButton = function DeleteGButton(props) {
  var gid = props.gid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/groupbuys/").concat(gid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/groupbuys');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该团购吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  gid: gid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteGButton));

/***/ }),

/***/ "./src/jsx/GroupbuyPage/Groupbuy.jsx":
/*!*******************************************!*\
  !*** ./src/jsx/GroupbuyPage/Groupbuy.jsx ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _DeleteCButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DeleteCButton */ "./src/jsx/GroupbuyPage/DeleteCButton.jsx");











var UserCard = function UserCard(props) {
  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_8__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser,
      auth = _useContext.auth;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var collect3 = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/collects3/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function collect3(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var uncollect3 = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/uncollects3/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function uncollect3(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.collects3) return null;
  var button = user.collects3.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return uncollect3(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return collect3(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));

  var putin = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(target) {
      var storage, _JSON$parse3, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context3.sent;
              //storage是字符串形式
              _JSON$parse3 = JSON.parse(storage), username = _JSON$parse3.username, token = _JSON$parse3.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context3.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/shoppingcarts3/putin/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context3.sent;
              _context3.next = 11;
              return res.json();

            case 11:
              result = _context3.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context3.next = 18;
              break;

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context3.t0.message);

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function putin(_x3) {
      return _ref3.apply(this, arguments);
    };
  }();

  if (!user.shoppingcarts3) return;
  var shoppingcart = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return putin(floor._id);
    }
  }, "\u52A0\u5165\u8D2D\u7269\u8F66");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "orangered",
      fontSize: "28px"
    }
  }, "\uFFE5", floor.price) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, button, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_groupbuy.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orange",
      borderRadius: "10px 0px 0px 10px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, shoppingcart)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orangered",
      borderRadius: "0px 10px 10px 0px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, "\u7ACB\u5373\u8D2D\u4E70"))) : null) : null), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteCButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    cid: floor._id
  })) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var GPart = function GPart(props) {
  var groupbuy = props.groupbuy;
  if (!groupbuy.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: groupbuy.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: groupbuy,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var comment = props.comment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: comment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: comment
  })));
};

var CommentPart = function CommentPart(props) {
  var comments = props.comments;
  var floors = comments.map(function (comment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      comment: comment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Groupbuy = function Groupbuy(props) {
  var groupbuy = props.groupbuy,
      loadGroupbuy = props.loadGroupbuy,
      comments = props.comments;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadGroupbuy();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(GPart, {
    groupbuy: groupbuy
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "red",
      fontSize: "18px",
      textAlign: "center"
    }
  }, "\u2193\u8BC4\u8BBA\u533A\u2193"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CommentPart, {
    comments: comments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Groupbuy);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/GroupbuyCard.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/GroupbuyPage/GroupbuyCard.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_7__);










var RowCard = function RowCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_5__["userContext"]),
      auth = _useContext.auth;

  var groupbuy = props.groupbuy;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState, 2),
      num = _useState2[0],
      setNum = _useState2[1];

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Card"], {
    style: {
      width: "10rem"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/groupbuys/".concat(groupbuy._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Card"].Img, {
    variant: "top",
    src: "/upload/".concat(groupbuy.pictures[0]),
    style: {
      height: "140px"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Card"].Title, {
    className: "pl-2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      fontSize: "11px"
    }
  }, groupbuy.title.length >= 11 ? groupbuy.title[0] + groupbuy.title[1] + groupbuy.title[2] + groupbuy.title[3] + groupbuy.title[4] + groupbuy.title[5] + groupbuy.title[6] + groupbuy.title[7] + groupbuy.title[8] + groupbuy.title[9] + groupbuy.title[10] + "..." : groupbuy.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Card"].Text, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      color: "gray",
      textDecoration: "line-through",
      fontSize: "8px",
      paddingLeft: "8px"
    }
  }, "\uFFE5"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      color: "gray",
      textDecoration: "line-through",
      fontSize: "10px"
    }
  }, groupbuy.motoprice, "\u5143"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "8px",
      paddingLeft: "8px"
    }
  }, "\uFFE5"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "14px"
    }
  }, groupbuy.price, "\u5143"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    className: "d-flex justify-content-end text-muted"
  }, groupbuy.author.stores.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/profilestoreinfoclick/".concat(groupbuy.author.stores[0])
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["ShopOutlined"], {
    style: {
      fontSize: "18px",
      color: "#0A8ADB",
      paddingRight: "3px"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["ShopOutlined"], {
    style: {
      fontSize: "18px",
      color: "white",
      paddingRight: "3px"
    }
  })))))));
};

var GroupbuyCard = function GroupbuyCard(props) {
  var loadGroupbuys = props.loadGroupbuys,
      groupbuys = props.groupbuys;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadGroupbuys();
  }, []);
  var rows = groupbuys.map(function (groupbuy, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Col"], {
      xs: 12,
      sm: 6,
      md: 2,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(RowCard, {
      groupbuy: groupbuy
    })));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Row"], {
    style: {
      alignContent: "stretch",
      alignItems: "stretch"
    }
  }, rows)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (GroupbuyCard);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/GroupbuyListPage.jsx":
/*!***************************************************!*\
  !*** ./src/jsx/GroupbuyPage/GroupbuyListPage.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _GroupbuyCard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./GroupbuyCard */ "./src/jsx/GroupbuyPage/GroupbuyCard.jsx");
/* harmony import */ var _GroupbuyPage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./GroupbuyPage */ "./src/jsx/GroupbuyPage/GroupbuyPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");












var GroupbuyListTable = function GroupbuyListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      groupbuys = _useState2[0],
      setGroupbuys = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_10__["userContext"]),
      auth = _useContext.auth;

  var loadGroupbuys = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_9__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_9__["PORT"], "/api/groupbuys"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setGroupbuys(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadGroupbuys() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u56E2\u8D2D\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/postgroupbuy"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      color: "#0A8ADB"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_GroupbuyCard__WEBPACK_IMPORTED_MODULE_7__["default"], {
    loadGroupbuys: loadGroupbuys,
    groupbuys: groupbuys
  }));
};

var GroupbuyListPage = function GroupbuyListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/groupbuys",
    component: GroupbuyListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/groupbuys/:gid",
    component: _GroupbuyPage__WEBPACK_IMPORTED_MODULE_8__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (GroupbuyListPage);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/GroupbuyPage.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/GroupbuyPage/GroupbuyPage.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Carousels3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Carousels3 */ "./src/jsx/GroupbuyPage/Carousels3.jsx");
/* harmony import */ var _Groupbuy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Groupbuy */ "./src/jsx/GroupbuyPage/Groupbuy.jsx");
/* harmony import */ var _PostGButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PostGButton */ "./src/jsx/GroupbuyPage/PostGButton.jsx");
/* harmony import */ var _ModifyGButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyGButton */ "./src/jsx/GroupbuyPage/ModifyGButton.jsx");
/* harmony import */ var _DeleteGButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteGButton */ "./src/jsx/GroupbuyPage/DeleteGButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var GroupbuyPage = function GroupbuyPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var gid = props.match.params.gid; //从浏览器地址栏匹配到cid

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      groupbuy = _useState2[0],
      setGroupbuy = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      comments = _useState4[0],
      setComments = _useState4[1];

  var loadGroupbuy = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/groupbuys/").concat(gid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setGroupbuy(result.data.groupbuy);
                setComments(result.data.comments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadGroupbuy() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Carousels3__WEBPACK_IMPORTED_MODULE_6__["default"], {
    gid: gid,
    loadGroupbuy: loadGroupbuy,
    groupbuy: groupbuy
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, groupbuy.author && user.username === groupbuy.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyGButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    gid: gid,
    loadGroupbuy: loadGroupbuy
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteGButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    gid: gid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Groupbuy__WEBPACK_IMPORTED_MODULE_7__["default"], {
    gid: gid,
    loadGroupbuy: loadGroupbuy,
    groupbuy: groupbuy,
    comments: comments
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_PostGButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    gid: gid,
    loadGroupbuy: loadGroupbuy
  }) : null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (GroupbuyPage);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/ModifyGButton.jsx":
/*!************************************************!*\
  !*** ./src/jsx/GroupbuyPage/ModifyGButton.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var gid = props.gid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      settings = _useState2[0],
      setSettings = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      title = _useState4[0],
      setTitle = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      content = _useState6[0],
      setContent = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      category = _useState8[0],
      setCategory = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
      motoprice = _useState10[0],
      setMotoprice = _useState10[1];

  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
      price = _useState12[0],
      setPrice = _useState12[1];

  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState13, 2),
      number = _useState14[0],
      setNumber = _useState14[1];

  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState15, 2),
      pictures = _useState16[0],
      setPictures = _useState16[1];

  var loadGroupbuy = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/groupbuys/").concat(gid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.groupbuy.title);
                setContent(result.data.groupbuy.content);
                setCategory(result.data.groupbuy.category);
                setMotoprice(result.data.groupbuy.motoprice);
                setPrice(result.data.groupbuy.price);
                setNumber(result.data.groupbuy.number);
                setPictures(result.data.groupbuy.pictures);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadGroupbuy() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadGroupbuy();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifygForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u56E2\u8D2D\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "category"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u7C7B\u522B"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u56E2\u8D2D\u7C7B\u522B",
    defaultValue: category
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "motoprice"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u539F\u4EF7"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u539F\u4EF7",
    defaultValue: motoprice
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "price"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u56E2\u8D2D\u4EF7"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u56E2\u8D2D\u4EF7\u683C",
    defaultValue: price
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "number"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4EBA\u6570"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5F00\u56E2\u4EBA\u6570",
    defaultValue: number
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "uploader"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4E0A\u4F20\u56FE\u7247"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: settings.pictures ? "/upload/".concat(settings.pictures) : '/img/avatar.jpg',
    alt: "\u56E2\u8D2D\u56FE\u7247"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "file",
    placeholder: "\u8BF7\u4E0A\u4F20\u56FE\u7247",
    defaultValue: pictures
  })));
};

var ModifyGButton = function ModifyGButton(props) {
  var gid = props.gid,
      loadGroupbuy = props.loadGroupbuy;

  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState18 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState17, 2),
      show = _useState18[0],
      setShow = _useState18[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var storage, _JSON$parse, username, token, title, content, category, motoprice, price, number, formData, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              title = body.title, content = body.content, category = body.category, motoprice = body.motoprice, price = body.price, number = body.number;
              formData = new FormData(); //实例化声明formData

              _context2.next = 9;
              return formData.append('username', username);

            case 9:
              _context2.next = 11;
              return formData.append('token', token);

            case 11:
              _context2.next = 13;
              return formData.append('title', title);

            case 13:
              _context2.next = 15;
              return formData.append('content', content);

            case 15:
              _context2.next = 17;
              return formData.append('category', category);

            case 17:
              _context2.next = 19;
              return formData.append('motoprice', motoprice);

            case 19:
              _context2.next = 21;
              return formData.append('price', price);

            case 21:
              _context2.next = 23;
              return formData.append('number', number);

            case 23:
              _context2.next = 25;
              return formData.append('pictures', document.querySelector('#uploader').files[0]);

            case 25:
              _context2.next = 27;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/groupbuys/").concat(gid), {
                method: "PATCH",
                body: formData
              });

            case 27:
              res = _context2.sent;
              _context2.next = 30;
              return res.json();

            case 30:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadGroupbuy();
              } else {
                alert(result.message);
              }

              _context2.next = 37;
              break;

            case 34:
              _context2.prev = 34;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 37:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 34]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse2, username, token, form, title, content, category, motoprice, price, number, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token;
              form = document.forms.modifygForm;
              title = form.title.value;
              content = form.content.value;
              category = form.category.value;
              motoprice = form.motoprice.value;
              price = form.price.value;
              number = form.number.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content,
                category: category,
                motoprice: motoprice,
                price: price,
                number: number
              }; //用body将三个变量封装到body里，相当于请求体

              modify(body);

            case 13:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u56E2\u8D2D")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    gid: gid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyGButton);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/PostGButton.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/GroupbuyPage/PostGButton.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var PostForm = function PostForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "postForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })));
};

var PostGButton = function PostGButton(props) {
  var gid = props.gid,
      loadGroupbuy = props.loadGroupbuy;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var post = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/comments3/").concat(gid), {
                //根据商品发布讨论
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交讨论，自动关闭模态框

                loadGroupbuy();
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function post(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handlePost = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 2:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              form = document.forms.postForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              post(body);

            case 8:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handlePost() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-success",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u53D1\u5E03\u8BC4\u8BBA"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u53D1\u5E03\u8BC4\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PostForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (PostGButton);

/***/ }),

/***/ "./src/jsx/GroupbuyPage/Postgroupbuy.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/GroupbuyPage/Postgroupbuy.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postgroupbuy = function Postgroupbuy(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      groupbuys = _useState10[0],
      setGroupbuys = _useState10[1];

  var loadGroupbuys = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/groupbuys"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setGroupbuys(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadGroupbuys() {
      return _ref.apply(this, arguments);
    };
  }();

  var postgroupbuy = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/groupbuys"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadGroupbuys();
                history.push('/groupbuys');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postgroupbuy(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadGroupbuys();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, category, motoprice, price, number, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content, category = values.category, motoprice = values.motoprice, price = values.price, number = values.number;
              body = {
                title: title,
                content: content,
                category: category,
                motoprice: motoprice,
                price: price,
                number: number,
                filelist: filelist,
                username: username,
                token: token
              };
              postgroupbuy(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }(); // const handleChange = ({ fileList }) => {
  //   console.log("这个是jsx里的fileList:",fileList)
  //   setFileList(fileList)
  // }


  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传图片样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u53D1\u8D77\u56E2\u8D2D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u56E2\u8D2D\u5546\u54C1\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入商品标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u56E2\u8D2D\u5546\u54C1\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入商品内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u56E2\u8D2D\u5546\u54C1\u7C7B\u578B",
    name: "category",
    rules: [{
      required: true,
      message: "请输入商品类型"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u539F\u4EF7",
    name: "motoprice",
    rules: [{
      required: true,
      message: "请输入商品原价"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u56E2\u8D2D\u4EF7\u683C",
    name: "price",
    rules: [{
      required: true,
      message: "请输入商品团购价"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postgroupbuy);

/***/ }),

/***/ "./src/jsx/Header.jsx":
/*!****************************!*\
  !*** ./src/jsx/Header.jsx ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-bootstrap */ "react-router-bootstrap");
/* harmony import */ var react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config */ "./src/config.js");
/* harmony import */ var _LoginButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LoginButton */ "./src/jsx/LoginButton.jsx");
/* harmony import */ var _LoginStoreButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./LoginStoreButton */ "./src/jsx/LoginStoreButton.jsx");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./App */ "./src/jsx/App.jsx");











var Header = function Header(props) {
  var history = props.history; //浏览记录

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_9__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser,
      store = _useContext.store,
      setStore = _useContext.setStore,
      auth = _useContext.auth,
      setAuth = _useContext.setAuth,
      auth2 = _useContext.auth2,
      setAuth2 = _useContext.setAuth2;

  var logout = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var data, res, result, _data;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 3:
              data = _context.sent;
              _context.next = 6;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/users/logout"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: data
              });

            case 6:
              res = _context.sent;
              _context.next = 9;
              return res.json();

            case 9:
              result = _context.sent;

              if (!res.ok) {
                _context.next = 22;
                break;
              }

              alert(result.message);
              _data = {
                s_token: null
              }; //从响应体中获取用户名和token

              _context.next = 15;
              return localStorage.setItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN2"], JSON.stringify(_data));

            case 15:
              //将data存到用户的浏览器setItem(a,b)里的a代表键，b代表值
              setAuth(false);
              setAuth2(false);
              setUser({});
              setStore({});
              history.push('/');
              _context.next = 23;
              break;

            case 22:
              alert(result.message);

            case 23:
              _context.next = 28;
              break;

            case 25:
              _context.prev = 25;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 28:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 25]]);
    }));

    return function logout() {
      return _ref.apply(this, arguments);
    };
  }();

  var logout2 = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var data, res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN2"]);

            case 3:
              data = _context2.sent;
              _context2.next = 6;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/stores/logout"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: data
              });

            case 6:
              res = _context2.sent;
              _context2.next = 9;
              return res.json();

            case 9:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                setAuth2(false);
                setStore({});
                history.push('/');
              } else {
                alert(result.message);
              }

              _context2.next = 16;
              break;

            case 13:
              _context2.prev = 13;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 16:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 13]]);
    }));

    return function logout2() {
      return _ref2.apply(this, arguments);
    };
  }();

  var Avatar = function Avatar() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
      src: user.avatar ? "/upload/".concat(user.avatar) : '/img/avatar.jpg',
      alt: "\u5934\u50CF",
      width: 32,
      height: 32,
      className: "rounded"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
      style: {
        color: "black"
      },
      onClick: function onClick() {
        return logout();
      }
    }, "\u9000\u51FA"));
  };

  var Avatar2 = function Avatar2() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
      src: store.avatar ? "/upload/".concat(store.avatar) : '/img/avatar.jpg',
      alt: "\u5934\u50CF",
      width: 32,
      height: 32,
      className: "rounded"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
      style: {
        color: "black"
      },
      onClick: function onClick() {
        return logout2();
      }
    }, "\u9000\u51FA"));
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Navbar"], {
    bg: "light ",
    variant: "light",
    expand: "lg"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Navbar"].Brand, {
    href: "#"
  }, "Pocket TKK"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Navbar"].Toggle, {
    "aria-controls": "basic-navbar-nav"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Navbar"].Collapse, {
    id: "basic-navbar-nav"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Nav"], {
    className: "mr-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__["LinkContainer"], {
    to: "/home/"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Nav"].Link, null, "\u9996\u9875")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__["LinkContainer"], {
    to: "/commodities/"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Nav"].Link, null, "\u5546\u54C1")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__["LinkContainer"], {
    to: "/discusses/"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Nav"].Link, null, "\u8BA8\u8BBA\u533A")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__["LinkContainer"], {
    to: "/shoppingcart/".concat(user._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Nav"].Link, null, "\u8D2D\u7269\u8F66")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["NavDropdown"], {
    title: "\u4E2A\u4EBA\u4E2D\u5FC3",
    id: "basic-navbar-dropdown"
  }, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__["LinkContainer"], {
    to: "/profile/".concat(user._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["NavDropdown"].Item, null, "\u4E2A\u4EBA\u4FE1\u606F")) : null, auth2 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_5__["LinkContainer"], {
    to: "/profilestore/".concat(store._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["NavDropdown"].Item, null, "\u4E2A\u4EBA\u5546\u94FA")) : null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: "ml-auto"
  }, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Avatar, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_LoginButton__WEBPACK_IMPORTED_MODULE_7__["default"], null)), auth2 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Avatar2, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_LoginStoreButton__WEBPACK_IMPORTED_MODULE_8__["default"], null)));
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(Header));

/***/ }),

/***/ "./src/jsx/HelpDisPage/CarouselsH.jsx":
/*!********************************************!*\
  !*** ./src/jsx/HelpDisPage/CarouselsH.jsx ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var helpdiscuss = props.helpdiscuss;
  if (!helpdiscuss.pictures) return null;
  var pictures = helpdiscuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var CarouselsH = function CarouselsH(props) {
  var helpdiscuss = props.helpdiscuss,
      loadHelpdiscuss = props.loadHelpdiscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadHelpdiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    helpdiscuss: helpdiscuss
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CarouselsH);

/***/ }),

/***/ "./src/jsx/HelpDisPage/DeleteHelpcommentButton.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/HelpDisPage/DeleteHelpcommentButton.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var DeleteHelpcommentButton = function DeleteHelpcommentButton(props) {
  var hid = props.hid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/helpcomments/").concat(hid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该回复吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  hid: hid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (DeleteHelpcommentButton);

/***/ }),

/***/ "./src/jsx/HelpDisPage/DeleteHelpdiscussButton.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/HelpDisPage/DeleteHelpdiscussButton.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteHelpdiscussButton = function DeleteHelpdiscussButton(props) {
  var hid = props.hid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/helpdiscusses/").concat(hid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/helpdiscusses');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该求助讨论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  hid: hid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteHelpdiscussButton));

/***/ }),

/***/ "./src/jsx/HelpDisPage/Helpdiscuss.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/HelpDisPage/Helpdiscuss.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _DeleteHelpcommentButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DeleteHelpcommentButton */ "./src/jsx/HelpDisPage/DeleteHelpcommentButton.jsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_9__);











var UserCard = function UserCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      auth = _useContext.auth;

  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_9__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      user = _useContext2.user,
      auth = _useContext2.auth,
      setUser = _useContext2.setUser;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var like = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/likes2/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function like(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var unlike = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/unlikes2/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function unlike(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.likesh) return null;
  var likebutton = user.likesh.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return unlike(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return like(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteHelpcommentButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    hid: floor._id
  })) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, likebutton, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_helpdiscuss.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var HPart = function HPart(props) {
  var helpdiscuss = props.helpdiscuss;
  if (!helpdiscuss.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: helpdiscuss.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: helpdiscuss,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var helpcomment = props.helpcomment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: helpcomment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: helpcomment
  })));
};

var CPart = function CPart(props) {
  var helpcomments = props.helpcomments;
  var floors = helpcomments.map(function (helpcomment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      helpcomment: helpcomment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Helpdiscuss = function Helpdiscuss(props) {
  var helpcomments = props.helpcomments,
      helpdiscuss = props.helpdiscuss,
      loadHelpdiscuss = props.loadHelpdiscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadHelpdiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(HPart, {
    helpdiscuss: helpdiscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CPart, {
    helpcomments: helpcomments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Helpdiscuss);

/***/ }),

/***/ "./src/jsx/HelpDisPage/HelpdiscussList.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/HelpDisPage/HelpdiscussList.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");





var Meta = antd__WEBPACK_IMPORTED_MODULE_2__["Card"].Meta;

var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "85px",
    width: "105px",
    src: "/upload/".concat(picture),
    style: {
      "float": "left",
      width: "30.33%",
      paddingRight: "2px",
      paddingBottom: "5px",
      paddingLeft: "2px",
      borderRadius: "10px 10px 10px 10px"
    }
  }));
};

var Row1 = function Row1(props) {
  var helpdiscuss = props.helpdiscuss;
  if (!helpdiscuss.pictures) return null;
  var pictures = helpdiscuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["Card"], {
    style: {
      width: 333
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    width: 32,
    height: 32,
    className: "mr-3 rounded-circle",
    src: helpdiscuss.author.avatar ? "/upload/".concat(helpdiscuss.author.avatar) : '/img/avatar.jpg',
    alt: helpdiscuss.author.nickname ? helpdiscuss.author.nickname : helpdiscuss.author.username
  }), helpdiscuss.author.nickname ? helpdiscuss.author.nickname : helpdiscuss.author.username, "\xA0\xA0", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      fontSize: "11px",
      color: "gray"
    }
  }, "(", new Date(helpdiscuss.posttime).toLocaleString(), ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      fontSize: "15px"
    }
  }, helpdiscuss.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      paddingBottom: "15px"
    }
  }, helpdiscuss.content), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/helpdiscusses/".concat(helpdiscuss._id)
  }, floors)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: "/img/1.png",
    height: "35px"
  })));
};

var HelpdiscussList = function HelpdiscussList(props) {
  var loadHelpdiscusses = props.loadHelpdiscusses,
      helpdiscusses = props.helpdiscusses;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadHelpdiscusses();
  }, []); //数据转换成每行的视图

  var rows = helpdiscusses.map(function (helpdiscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
      sm: 12,
      md: 4,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Row1, {
      helpdiscuss: helpdiscuss
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], null, rows));
};

/* harmony default export */ __webpack_exports__["default"] = (HelpdiscussList);

/***/ }),

/***/ "./src/jsx/HelpDisPage/HelpdiscussListPage.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/HelpDisPage/HelpdiscussListPage.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _HelpdiscussList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./HelpdiscussList */ "./src/jsx/HelpDisPage/HelpdiscussList.jsx");
/* harmony import */ var _HelpdiscussPage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./HelpdiscussPage */ "./src/jsx/HelpDisPage/HelpdiscussPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");







 // import PostHelpdiscussesButton from './PostHelpdiscussesButton'






var HelpdiscussListTable = function HelpdiscussListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      helpdiscusses = _useState2[0],
      setHelpdiscusses = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_11__["userContext"]),
      auth = _useContext.auth;

  var loadHelpdiscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_10__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_10__["PORT"], "/api/helpdiscusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setHelpdiscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadHelpdiscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u6C42\u52A9\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/posthelpdiscuss"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      paddingBottom: "30px",
      color: "red"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_HelpdiscussList__WEBPACK_IMPORTED_MODULE_8__["default"], {
    loadHelpdiscusses: loadHelpdiscusses,
    helpdiscusses: helpdiscusses
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__["BackTop"], null));
};

var HelpdiscussListPage = function HelpdiscussListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/helpdiscusses",
    component: HelpdiscussListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/helpdiscusses/:hid",
    component: _HelpdiscussPage__WEBPACK_IMPORTED_MODULE_9__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (HelpdiscussListPage);

/***/ }),

/***/ "./src/jsx/HelpDisPage/HelpdiscussPage.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/HelpDisPage/HelpdiscussPage.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Helpdiscuss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Helpdiscuss */ "./src/jsx/HelpDisPage/Helpdiscuss.jsx");
/* harmony import */ var _CarouselsH__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CarouselsH */ "./src/jsx/HelpDisPage/CarouselsH.jsx");
/* harmony import */ var _ReplyForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ReplyForm */ "./src/jsx/HelpDisPage/ReplyForm.jsx");
/* harmony import */ var _ModifyButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyButton */ "./src/jsx/HelpDisPage/ModifyButton.jsx");
/* harmony import */ var _DeleteHelpdiscussButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteHelpdiscussButton */ "./src/jsx/HelpDisPage/DeleteHelpdiscussButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var HelpdiscussPage = function HelpdiscussPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var hid = props.match.params.hid; //从浏览器地址栏匹配到did

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      helpdiscuss = _useState2[0],
      setHelpdiscuss = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      helpcomments = _useState4[0],
      setHelpcomments = _useState4[1];

  var loadHelpdiscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/helpdiscusses/").concat(hid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setHelpdiscuss(result.data.helpdiscuss);
                setHelpcomments(result.data.helpcomments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadHelpdiscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CarouselsH__WEBPACK_IMPORTED_MODULE_7__["default"], {
    hid: hid,
    loadHelpdiscuss: loadHelpdiscuss,
    helpdiscuss: helpdiscuss
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, helpdiscuss.author && user.username === helpdiscuss.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    hid: hid,
    loadHelpdiscuss: loadHelpdiscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteHelpdiscussButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    hid: hid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Helpdiscuss__WEBPACK_IMPORTED_MODULE_6__["default"], {
    hid: hid,
    loadHelpdiscuss: loadHelpdiscuss,
    helpcomments: helpcomments,
    helpdiscuss: helpdiscuss
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ReplyForm__WEBPACK_IMPORTED_MODULE_8__["default"], {
    hid: hid,
    loadHelpdiscuss: loadHelpdiscuss
  }) : null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (HelpdiscussPage);

/***/ }),

/***/ "./src/jsx/HelpDisPage/ModifyButton.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/HelpDisPage/ModifyButton.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var hid = props.hid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      title = _useState2[0],
      setTitle = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      content = _useState4[0],
      setContent = _useState4[1];

  var loadHelpdiscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/helpdiscusses/").concat(hid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.helpdiscuss.title);
                setContent(result.data.helpdiscuss.content);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadHelpdiscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadHelpdiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifyForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u8BA8\u8BBA\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })));
};

var ModifyButton = function ModifyButton(props) {
  var hid = props.hid,
      loadHelpdiscuss = props.loadHelpdiscuss;

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      show = _useState6[0],
      setShow = _useState6[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/helpdiscusses/").concat(hid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadHelpdiscuss();
              } else {
                alert(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse, username, token, form, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.modifyForm;
              title = form.title.value;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content
              };
              modify(body);

            case 9:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u8BA8\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    hid: hid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyButton);

/***/ }),

/***/ "./src/jsx/HelpDisPage/Posthelpdiscuss.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/HelpDisPage/Posthelpdiscuss.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Posthelpdiscuss = function Posthelpdiscuss(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      helpdiscusses = _useState10[0],
      setHelpdiscusses = _useState10[1];

  var loadHelpdiscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/helpdiscusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setHelpdiscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadHelpdiscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  var posthelpdiscuss = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/helpdiscusses"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadHelpdiscusses();
                history.push('/helpdiscusses');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function posthelpdiscuss(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadHelpdiscusses();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content;
              body = {
                title: title,
                content: content,
                filelist: filelist,
                username: username,
                token: token
              };
              posthelpdiscuss(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }();

  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u6C42\u52A9\u5E16"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入帖子标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入帖子内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Posthelpdiscuss);

/***/ }),

/***/ "./src/jsx/HelpDisPage/ReplyForm.jsx":
/*!*******************************************!*\
  !*** ./src/jsx/HelpDisPage/ReplyForm.jsx ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");






var ReplyForm = function ReplyForm(props) {
  var hid = props.hid,
      loadHelpdiscuss = props.loadHelpdiscuss;

  var reply = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_4__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_4__["PORT"], "/api/helpcomments/").concat(hid), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body) //将body转化为字符串来调用接口

              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                loadHelpdiscuss();
                document.forms.replyForm.content.value = "";
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function reply(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleReply = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(e) {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              e.preventDefault(); //阻止页面刷新

              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_4__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.replyForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              reply(body);

            case 9:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleReply(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"], {
    id: "replyForm",
    className: "p-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Label, null, "\u56DE\u590D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Button"], {
    variant: "primary",
    type: "submit",
    onClick: function onClick(e) {
      return handleReply(e);
    }
  }, "\u63D0\u4EA4"));
};

/* harmony default export */ __webpack_exports__["default"] = (ReplyForm);

/***/ }),

/***/ "./src/jsx/HomePage/CommodityListPage2.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/HomePage/CommodityListPage2.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _CommodityListPage_CommodityCard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../CommodityListPage/CommodityCard */ "./src/jsx/CommodityListPage/CommodityCard.jsx");
/* harmony import */ var _CommodityListPage_CommodityPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../CommodityListPage/CommodityPage */ "./src/jsx/CommodityListPage/CommodityPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");










var CommodityListTable = function CommodityListTable(props) {
  var rows = props;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      commodities = _useState2[0],
      setCommodities = _useState2[1];

  var loadCommodities = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/commodities"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodities(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodities() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, rows >= 4 ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CommodityListPage_CommodityCard__WEBPACK_IMPORTED_MODULE_6__["default"], {
    loadCommodities: loadCommodities,
    commodities: commodities
  }));
};

var CommodityListPage2 = function CommodityListPage2() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/",
    component: CommodityListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/home",
    component: CommodityListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/commodities/:cid",
    component: _CommodityListPage_CommodityPage__WEBPACK_IMPORTED_MODULE_7__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityListPage2);

/***/ }),

/***/ "./src/jsx/HomePage/GroupbuyListPage2.jsx":
/*!************************************************!*\
  !*** ./src/jsx/HomePage/GroupbuyListPage2.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _GroupbuyPage_GroupbuyCard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../GroupbuyPage/GroupbuyCard */ "./src/jsx/GroupbuyPage/GroupbuyCard.jsx");
/* harmony import */ var _GroupbuyPage_GroupbuyPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../GroupbuyPage/GroupbuyPage */ "./src/jsx/GroupbuyPage/GroupbuyPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");











var GroupbuyListTable = function GroupbuyListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      groupbuys = _useState2[0],
      setGroupbuys = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_9__["userContext"]),
      auth = _useContext.auth;

  var loadGroupbuys = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/groupbuys"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setGroupbuys(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadGroupbuys() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_GroupbuyPage_GroupbuyCard__WEBPACK_IMPORTED_MODULE_6__["default"], {
    loadGroupbuys: loadGroupbuys,
    groupbuys: groupbuys
  }));
};

var GroupbuyListPage2 = function GroupbuyListPage2() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/",
    component: GroupbuyListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/home",
    component: GroupbuyListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/groupbuys/:gid",
    component: _GroupbuyPage_GroupbuyPage__WEBPACK_IMPORTED_MODULE_7__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (GroupbuyListPage2);

/***/ }),

/***/ "./src/jsx/HomePage/HomePage.jsx":
/*!***************************************!*\
  !*** ./src/jsx/HomePage/HomePage.jsx ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Introduction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Introduction */ "./src/jsx/HomePage/Introduction.jsx");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _CommodityListPage2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CommodityListPage2 */ "./src/jsx/HomePage/CommodityListPage2.jsx");
/* harmony import */ var _SecondhandListPage2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SecondhandListPage2 */ "./src/jsx/HomePage/SecondhandListPage2.jsx");
/* harmony import */ var _GroupbuyListPage2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./GroupbuyListPage2 */ "./src/jsx/HomePage/GroupbuyListPage2.jsx");









var HomePage = function HomePage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], {
    fluid: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
    sm: 12,
    md: 12,
    className: "pl-0 pr-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Introduction__WEBPACK_IMPORTED_MODULE_3__["Demo"], null))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (HomePage);

/***/ }),

/***/ "./src/jsx/HomePage/Introduction.jsx":
/*!*******************************************!*\
  !*** ./src/jsx/HomePage/Introduction.jsx ***!
  \*******************************************/
/*! exports provided: Demo, Slogan, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Demo", function() { return Demo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Slogan", function() { return Slogan; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);



var Demo = function Demo() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Carousel"], {
    className: "cuIcon-title text-pink"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Carousel"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "380px",
    className: "d-block w-100",
    src: "/img/index/scoll/scroll_03.jpg",
    alt: "Third slide"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Carousel"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "380px",
    className: "d-block w-100",
    src: "/img/index/scoll/scroll_02.jpg",
    alt: "Second slide"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Carousel"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "380px",
    className: "d-block w-100",
    src: "/img/index/scoll/scroll_05.jpg",
    alt: "Third slide"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Carousel"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "380px",
    className: "d-block w-100",
    src: "/img/index/scoll/scroll_04.jpg",
    alt: "Third slide"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Carousel"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "380px",
    className: "d-block w-100",
    src: "/img/index/scoll/scroll_01.jpg",
    alt: "First slide"
  })));
};

var Slogan = function Slogan() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    height: "300px",
    className: "d-block w-100",
    src: "/img/huisebz.jpg",
    alt: "First slide"
  }));
};

var Introduction = function Introduction() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Demo, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Slogan, null));
};


/* harmony default export */ __webpack_exports__["default"] = (Introduction);

/***/ }),

/***/ "./src/jsx/HomePage/SecondhandListPage2.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/HomePage/SecondhandListPage2.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _SecondhandPage_SecondhandCard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../SecondhandPage/SecondhandCard */ "./src/jsx/SecondhandPage/SecondhandCard.jsx");
/* harmony import */ var _SecondhandPage_SecondhandPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../SecondhandPage/SecondhandPage */ "./src/jsx/SecondhandPage/SecondhandPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");











var SecondhandListTable = function SecondhandListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      secondhands = _useState2[0],
      setSecondhands = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_9__["userContext"]),
      auth = _useContext.auth;

  var loadSecondhands = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/secondhands"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setSecondhands(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadSecondhands() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_SecondhandPage_SecondhandCard__WEBPACK_IMPORTED_MODULE_6__["default"], {
    loadSecondhands: loadSecondhands,
    secondhands: secondhands
  }));
};

var SecondhandListPage2 = function SecondhandListPage2() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/",
    component: SecondhandListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/home",
    component: SecondhandListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/secondhands/:sid",
    component: _SecondhandPage_SecondhandPage__WEBPACK_IMPORTED_MODULE_7__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (SecondhandListPage2);

/***/ }),

/***/ "./src/jsx/LikeDisPage/CarouselsL.jsx":
/*!********************************************!*\
  !*** ./src/jsx/LikeDisPage/CarouselsL.jsx ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var likediscuss = props.likediscuss;
  if (!likediscuss.pictures) return null;
  var pictures = likediscuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var CarouselsL = function CarouselsL(props) {
  var likediscuss = props.likediscuss,
      loadLikediscuss = props.loadLikediscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadLikediscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    likediscuss: likediscuss
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CarouselsL);

/***/ }),

/***/ "./src/jsx/LikeDisPage/DeleteLikecommentButton.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/LikeDisPage/DeleteLikecommentButton.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var DeleteLikecommentButton = function DeleteLikecommentButton(props) {
  var lid = props.lid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/likecomments/").concat(lid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该回复吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  lid: lid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (DeleteLikecommentButton);

/***/ }),

/***/ "./src/jsx/LikeDisPage/DeleteLikediscussButton.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/LikeDisPage/DeleteLikediscussButton.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteLikediscussButton = function DeleteLikediscussButton(props) {
  var lid = props.lid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/likediscusses/").concat(lid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/likediscusses');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该种草讨论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  lid: lid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteLikediscussButton));

/***/ }),

/***/ "./src/jsx/LikeDisPage/Likediscuss.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/LikeDisPage/Likediscuss.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _DeleteLikecommentButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DeleteLikecommentButton */ "./src/jsx/LikeDisPage/DeleteLikecommentButton.jsx");











var UserCard = function UserCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      auth = _useContext.auth;

  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      user = _useContext2.user,
      auth = _useContext2.auth,
      setUser = _useContext2.setUser;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var like = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/likes3/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function like(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var unlike = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/unlikes3/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function unlike(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.likesl) return null;
  var likebutton = user.likesl.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return unlike(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return like(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteLikecommentButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    lid: floor._id
  })) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, likebutton, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_likediscuss.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var LPart = function LPart(props) {
  var likediscuss = props.likediscuss;
  if (!likediscuss.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: likediscuss.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: likediscuss,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var likecomment = props.likecomment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: likecomment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: likecomment
  })));
};

var CPart = function CPart(props) {
  var likecomments = props.likecomments;
  var floors = likecomments.map(function (likecomment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      likecomment: likecomment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Likediscuss = function Likediscuss(props) {
  var likecomments = props.likecomments,
      likediscuss = props.likediscuss,
      loadLikediscuss = props.loadLikediscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadLikediscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(LPart, {
    likediscuss: likediscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CPart, {
    likecomments: likecomments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Likediscuss);

/***/ }),

/***/ "./src/jsx/LikeDisPage/LikediscussList.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/LikeDisPage/LikediscussList.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "85px",
    width: "105px",
    src: "/upload/".concat(picture),
    style: {
      "float": "left",
      width: "30.33%",
      paddingRight: "2px",
      paddingBottom: "5px",
      paddingLeft: "2px",
      borderRadius: "12px 12px 12px 12px"
    }
  }));
};

var Row1 = function Row1(props) {
  var likediscuss = props.likediscuss;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(1),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState, 2),
      num = _useState2[0],
      setNum = _useState2[1];

  if (!likediscuss.pictures) return null;
  var pictures = likediscuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__["Card"], {
    style: {
      width: 333
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/likediscusses/".concat(likediscuss._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    width: 32,
    height: 32,
    className: "mr-3 rounded-circle",
    src: likediscuss.author.avatar ? "/upload/".concat(likediscuss.author.avatar) : '/img/avatar.jpg',
    alt: likediscuss.author.nickname ? likediscuss.author.nickname : likediscuss.author.username
  })), likediscuss.author.nickname ? likediscuss.author.nickname : likediscuss.author.username, "\xA0\xA0", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      fontSize: "11px",
      color: "gray"
    }
  }, "(", new Date(likediscuss.posttime).toLocaleString(), ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      fontSize: "15px"
    }
  }, likediscuss.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      paddingBottom: "15px"
    }
  }, likediscuss.content), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/likediscusses/".concat(likediscuss._id)
  }, floors)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    src: "/img/1.png",
    height: "35px"
  })));
};

var LikediscussList = function LikediscussList(props) {
  var loadLikediscusses = props.loadLikediscusses,
      likediscusses = props.likediscusses;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadLikediscusses();
  }, []); //数据转换成每行的视图

  var rows = likediscusses.map(function (likediscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Col"], {
      sm: 12,
      md: 4,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Row1, {
      likediscuss: likediscuss
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Row"], null, rows));
};

/* harmony default export */ __webpack_exports__["default"] = (LikediscussList);

/***/ }),

/***/ "./src/jsx/LikeDisPage/LikediscussListPage.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/LikeDisPage/LikediscussListPage.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _LikediscussList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./LikediscussList */ "./src/jsx/LikeDisPage/LikediscussList.jsx");
/* harmony import */ var _LikediscussPage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./LikediscussPage */ "./src/jsx/LikeDisPage/LikediscussPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");







 // import PostLikediscussesButton from './PostLikediscussesButton'






var LikediscussListTable = function LikediscussListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      likediscusses = _useState2[0],
      setLikediscusses = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_11__["userContext"]),
      auth = _useContext.auth;

  var loadLikediscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_10__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_10__["PORT"], "/api/likediscusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setLikediscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadLikediscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u79CD\u8349\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/postlikediscuss"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      paddingBottom: "30px",
      color: "orange"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_LikediscussList__WEBPACK_IMPORTED_MODULE_8__["default"], {
    loadLikediscusses: loadLikediscusses,
    likediscusses: likediscusses
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__["BackTop"], null));
};

var LikediscussListPage = function LikediscussListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/likediscusses",
    component: LikediscussListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/likediscusses/:lid",
    component: _LikediscussPage__WEBPACK_IMPORTED_MODULE_9__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (LikediscussListPage);

/***/ }),

/***/ "./src/jsx/LikeDisPage/LikediscussPage.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/LikeDisPage/LikediscussPage.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Likediscuss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Likediscuss */ "./src/jsx/LikeDisPage/Likediscuss.jsx");
/* harmony import */ var _CarouselsL__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CarouselsL */ "./src/jsx/LikeDisPage/CarouselsL.jsx");
/* harmony import */ var _ReplyForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ReplyForm */ "./src/jsx/LikeDisPage/ReplyForm.jsx");
/* harmony import */ var _ModifyButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyButton */ "./src/jsx/LikeDisPage/ModifyButton.jsx");
/* harmony import */ var _DeleteLikediscussButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteLikediscussButton */ "./src/jsx/LikeDisPage/DeleteLikediscussButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var LikediscussPage = function LikediscussPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var lid = props.match.params.lid; //从浏览器地址栏匹配到did

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      likediscuss = _useState2[0],
      setLikediscuss = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      likecomments = _useState4[0],
      setLikecomments = _useState4[1];

  var loadLikediscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/likediscusses/").concat(lid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setLikediscuss(result.data.likediscuss);
                setLikecomments(result.data.likecomments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadLikediscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CarouselsL__WEBPACK_IMPORTED_MODULE_7__["default"], {
    lid: lid,
    loadLikediscuss: loadLikediscuss,
    likediscuss: likediscuss
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, likediscuss.author && user.username === likediscuss.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    lid: lid,
    loadLikediscuss: loadLikediscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteLikediscussButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    lid: lid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Likediscuss__WEBPACK_IMPORTED_MODULE_6__["default"], {
    lid: lid,
    loadLikediscuss: loadLikediscuss,
    likecomments: likecomments,
    likediscuss: likediscuss
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ReplyForm__WEBPACK_IMPORTED_MODULE_8__["default"], {
    lid: lid,
    loadLikediscuss: loadLikediscuss
  }) : null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (LikediscussPage);

/***/ }),

/***/ "./src/jsx/LikeDisPage/ModifyButton.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/LikeDisPage/ModifyButton.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var lid = props.lid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      title = _useState2[0],
      setTitle = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      content = _useState4[0],
      setContent = _useState4[1];

  var loadLikediscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/likediscusses/").concat(lid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.likediscuss.title);
                setContent(result.data.likediscuss.content);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadLikediscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadLikediscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifyForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u8BA8\u8BBA\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })));
};

var ModifyButton = function ModifyButton(props) {
  var lid = props.lid,
      loadLikediscuss = props.loadLikediscuss;

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      show = _useState6[0],
      setShow = _useState6[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/likediscusses/").concat(lid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadLikediscuss();
              } else {
                alert(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse, username, token, form, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.modifyForm;
              title = form.title.value;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content
              };
              modify(body);

            case 9:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u8BA8\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    lid: lid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyButton);

/***/ }),

/***/ "./src/jsx/LikeDisPage/Postlikediscuss.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/LikeDisPage/Postlikediscuss.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postlikediscuss = function Postlikediscuss(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      likediscusses = _useState10[0],
      setLikediscusses = _useState10[1];

  var loadLikediscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/likediscusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setLikediscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadLikediscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  var postlikediscuss = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/likediscusses"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadLikediscusses();
                history.push('/likediscusses');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postlikediscuss(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadLikediscusses();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content;
              body = {
                title: title,
                content: content,
                filelist: filelist,
                username: username,
                token: token
              };
              postlikediscuss(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }();

  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u79CD\u8349\u5E16"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入帖子标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入帖子内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postlikediscuss);

/***/ }),

/***/ "./src/jsx/LikeDisPage/ReplyForm.jsx":
/*!*******************************************!*\
  !*** ./src/jsx/LikeDisPage/ReplyForm.jsx ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");






var ReplyForm = function ReplyForm(props) {
  var lid = props.lid,
      loadLikediscuss = props.loadLikediscuss;

  var reply = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_4__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_4__["PORT"], "/api/likecomments/").concat(lid), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body) //将body转化为字符串来调用接口

              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                loadLikediscuss();
                document.forms.replyForm.content.value = "";
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function reply(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleReply = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(e) {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              e.preventDefault(); //阻止页面刷新

              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_4__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.replyForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              reply(body);

            case 9:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleReply(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"], {
    id: "replyForm",
    className: "p-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Label, null, "\u56DE\u590D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Button"], {
    variant: "primary",
    type: "submit",
    onClick: function onClick(e) {
      return handleReply(e);
    }
  }, "\u63D0\u4EA4"));
};

/* harmony default export */ __webpack_exports__["default"] = (ReplyForm);

/***/ }),

/***/ "./src/jsx/LoginButton.jsx":
/*!*********************************!*\
  !*** ./src/jsx/LoginButton.jsx ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./src/config.js");
/* harmony import */ var _RegisterButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RegisterButton */ "./src/jsx/RegisterButton.jsx");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./App */ "./src/jsx/App.jsx");









var LoginForm = function LoginForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "loginForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "username"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u7528\u6237\u540D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u7528\u6237\u540D"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "password"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "password",
    placeholder: "\u8BF7\u8F93\u5165\u7528\u6237\u5BC6\u7801"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_RegisterButton__WEBPACK_IMPORTED_MODULE_6__["default"], null));
};

var LoginButton = function LoginButton() {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_7__["userContext"]),
      setUser = _useContext.setUser,
      setAuth = _useContext.setAuth;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var login = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result, data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/login"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (!res.ok) {
                _context.next = 17;
                break;
              }

              alert(result.message);
              closeModal(); //成功提交，自动关闭模态框

              data = {
                username: result.data.username,
                token: result.data.token
              }; //从响应体中获取用户名和token

              _context.next = 13;
              return localStorage.setItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"], JSON.stringify(data));

            case 13:
              //将data存到用户的浏览器setItem(a,b)里的a代表键，b代表值
              setAuth(true);
              setUser({
                _id: result.data._id,
                username: result.data.username,
                avatar: result.data.avatar
              });
              _context.next = 18;
              break;

            case 17:
              alert(result.message);

            case 18:
              _context.next = 23;
              break;

            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 23:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 20]]);
    }));

    return function login(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleLogin = function handleLogin(e) {
    e.preventDefault(); //阻止页面刷新

    var form = document.forms.loginForm;
    var username = form.username.value; //value表示用户输入的值

    var password = form.password.value;
    var body = {
      username: username,
      password: password
    }; //用body将三个变量封装到body里，相当于请求体

    login(body);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-dark",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u767B\u9646"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u767B\u9646")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LoginForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick(e) {
      return handleLogin(e);
    }
  }, "\u767B\u9646"))));
};

/* harmony default export */ __webpack_exports__["default"] = (LoginButton);

/***/ }),

/***/ "./src/jsx/LoginStoreButton.jsx":
/*!**************************************!*\
  !*** ./src/jsx/LoginStoreButton.jsx ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./src/config.js");
/* harmony import */ var _StoreButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StoreButton */ "./src/jsx/StoreButton.jsx");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./App */ "./src/jsx/App.jsx");









var LoginStoreForm = function LoginStoreForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "loginstoreForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "storename"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5546\u94FA\u540D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u94FA\u540D"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "password"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "password",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u94FA\u5BC6\u7801"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_StoreButton__WEBPACK_IMPORTED_MODULE_6__["default"], null));
};

var LoginStoreButton = function LoginStoreButton() {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_7__["userContext"]),
      setStore = _useContext.setStore,
      setAuth2 = _useContext.setAuth2;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var login = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result, data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/stores/login"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (!res.ok) {
                _context.next = 17;
                break;
              }

              alert(result.message);
              closeModal(); //成功提交，自动关闭模态框

              data = {
                storename: result.data.storename,
                s_token: result.data.s_token
              }; //从响应体中获取用户名和token

              _context.next = 13;
              return localStorage.setItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN2"], JSON.stringify(data));

            case 13:
              //将data存到用户的浏览器setItem(a,b)里的a代表键，b代表值
              setAuth2(true);
              setStore({
                _id: result.data._id,
                storename: result.data.storename,
                avatar: result.data.avatar
              });
              _context.next = 18;
              break;

            case 17:
              alert(result.message);

            case 18:
              _context.next = 23;
              break;

            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 23:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 20]]);
    }));

    return function login(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleLogin = function handleLogin(e) {
    e.preventDefault(); //阻止页面刷新

    var storage = localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]); //storage是字符串形式

    var _JSON$parse = JSON.parse(storage),
        username = _JSON$parse.username,
        token = _JSON$parse.token; //要解构就得先将storage转换成json格式


    var form = document.forms.loginstoreForm;
    var storename = form.storename.value; //value表示用户输入的值

    var password = form.password.value;
    var body = {
      username: username,
      token: token,
      storename: storename,
      password: password
    }; //用body将三个变量封装到body里，相当于请求体

    login(body);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-dark",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u767B\u9646\u5546\u94FA"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u767B\u9646\u5546\u94FA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LoginStoreForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick(e) {
      return handleLogin(e);
    }
  }, "\u767B\u9646"))));
};

/* harmony default export */ __webpack_exports__["default"] = (LoginStoreButton);

/***/ }),

/***/ "./src/jsx/Mystore/Carousels_store.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/Mystore/Carousels_store.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var commodity = props.commodity;
  if (!commodity.pictures) return null;
  var pictures = commodity.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var Carousels_store = function Carousels_store(props) {
  var commodity = props.commodity,
      loadCommodity = props.loadCommodity;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadCommodity();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    commodity: commodity
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Carousels_store);

/***/ }),

/***/ "./src/jsx/Mystore/CommodityCard_store.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/Mystore/CommodityCard_store.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var RowCard = function RowCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_4__["userContext"]),
      auth = _useContext.auth,
      user = _useContext.user,
      setUser = _useContext.setUser;

  var commodity = props.commodity;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"], {
    style: {
      width: "10rem"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/storecommodities/".concat(commodity._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Img, {
    variant: "top",
    src: "/upload/".concat(commodity.pictures[0]),
    style: {
      height: "140px"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Title, {
    className: "pl-2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      fontSize: "11px"
    }
  }, commodity.title.length >= 11 ? commodity.title[0] + commodity.title[1] + commodity.title[2] + commodity.title[3] + commodity.title[4] + commodity.title[5] + commodity.title[6] + commodity.title[7] + commodity.title[8] + commodity.title[9] + commodity.title[10] + "..." : commodity.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Text, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "8px",
      paddingLeft: "7px"
    }
  }, "\uFFE5"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "14px"
    }
  }, commodity.price, "\u5143")))));
};

var CommodityCard_store = function CommodityCard_store(props) {
  var loadCommodities = props.loadCommodities,
      commodities = props.commodities;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadCommodities();
  }, []);
  var rows = commodities.map(function (commodity, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
      xs: 12,
      sm: 6,
      md: 2,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RowCard, {
      commodity: commodity
    })));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], {
    style: {
      alignContent: "stretch",
      alignItems: "stretch"
    }
  }, rows)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityCard_store);

/***/ }),

/***/ "./src/jsx/Mystore/CommodityListPage_store.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/Mystore/CommodityListPage_store.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _CommodityCard_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CommodityCard_store */ "./src/jsx/Mystore/CommodityCard_store.jsx");
/* harmony import */ var _CommodityPage_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./CommodityPage_store */ "./src/jsx/Mystore/CommodityPage_store.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");












var CommodityListTable = function CommodityListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      commodities = _useState2[0],
      setCommodities = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_10__["userContext"]),
      auth = _useContext.auth,
      auth2 = _useContext.auth2;

  var loadCommodities = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_9__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_9__["PORT"], "/api/storecommodities"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodities(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodities() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth && auth2 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u5546\u94FA\u5546\u54C1\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/poststorecommodity"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      color: "#0A8ADB"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CommodityCard_store__WEBPACK_IMPORTED_MODULE_7__["default"], {
    loadCommodities: loadCommodities,
    commodities: commodities
  }));
};

var CommodityListPage_store = function CommodityListPage_store() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/storecommodities",
    component: CommodityListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/storecommodities/:cid",
    component: _CommodityPage_store__WEBPACK_IMPORTED_MODULE_8__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityListPage_store);

/***/ }),

/***/ "./src/jsx/Mystore/CommodityPage_store.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/Mystore/CommodityPage_store.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Carousels_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Carousels_store */ "./src/jsx/Mystore/Carousels_store.jsx");
/* harmony import */ var _Commodity_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Commodity_store */ "./src/jsx/Mystore/Commodity_store.jsx");
/* harmony import */ var _PostButton_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PostButton_store */ "./src/jsx/Mystore/PostButton_store.jsx");
/* harmony import */ var _ModifyCButton_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyCButton_store */ "./src/jsx/Mystore/ModifyCButton_store.jsx");
/* harmony import */ var _DeleteCommodityButton_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteCommodityButton_store */ "./src/jsx/Mystore/DeleteCommodityButton_store.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var CommodityPage_store = function CommodityPage_store(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth,
      store = _useContext.store;

  var cid = props.match.params.cid; //从浏览器地址栏匹配到cid

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      commodity = _useState2[0],
      setCommodity = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      comments = _useState4[0],
      setComments = _useState4[1];

  var loadCommodity = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/storecommodities/").concat(cid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodity(result.data.commodity);
                setComments(result.data.comments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodity() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Carousels_store__WEBPACK_IMPORTED_MODULE_6__["default"], {
    cid: cid,
    loadCommodity: loadCommodity,
    commodity: commodity
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, commodity.author && store.storename === commodity.author.storename ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyCButton_store__WEBPACK_IMPORTED_MODULE_9__["default"], {
    cid: cid,
    loadCommodity: loadCommodity
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteCommodityButton_store__WEBPACK_IMPORTED_MODULE_10__["default"], {
    cid: cid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Commodity_store__WEBPACK_IMPORTED_MODULE_7__["default"], {
    cid: cid,
    loadCommodity: loadCommodity,
    commodity: commodity,
    comments: comments
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_PostButton_store__WEBPACK_IMPORTED_MODULE_8__["default"], {
    cid: cid,
    loadCommodity: loadCommodity
  }) : null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (CommodityPage_store);

/***/ }),

/***/ "./src/jsx/Mystore/Commodity_store.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/Mystore/Commodity_store.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _DeleteCButton_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DeleteCButton_store */ "./src/jsx/Mystore/DeleteCButton_store.jsx");











var UserCard = function UserCard(props) {
  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.storename
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.storename));
};

var ContentCard = function ContentCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_8__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser,
      auth = _useContext.auth;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var collect4 = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/collects4/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function collect4(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var uncollect4 = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/uncollects4/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function uncollect4(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.collects4) return null;
  var button = user.collects4.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return uncollect4(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return collect4(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })); // const putin = async (target)=>{
  //     try {
  //         const storage = await localStorage.getItem(DOMAIN)//storage是字符串形式
  //         const {username,token} = JSON.parse(storage)//要解构就得先将storage转换成json格式
  //         const body = {
  //             username,token
  //         }
  //         const res = await fetch(`${HOST}:${PORT}/api/shoppingcarts/putin/${target}`,{
  //             method:"PATCH",
  //             headers:{"Content-Type":"application/json"},
  //             body:JSON.stringify(body)
  //         })
  //         const result = await res.json()
  //         if(res.ok){
  //             message.success(result.message)
  //             setUser(result.data)
  //         }else{
  //             message.warning(result.message)
  //         }
  //     } catch (error) {
  //         message.error(error.message)
  //     }
  // }
  // if(!user.shoppingcarts) return
  // const shoppingcart = <span onClick={()=>putin(floor._id)}>加入购物车</span>

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "orangered",
      fontSize: "28px"
    }
  }, "\uFFE5", floor.price) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, button, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_storecommodity.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orange",
      borderRadius: "10px 0px 0px 10px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, "\u52A0\u5165\u8D2D\u7269\u8F66")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orangered",
      borderRadius: "0px 10px 10px 0px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, "\u7ACB\u5373\u8D2D\u4E70"))) : null), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteCButton_store__WEBPACK_IMPORTED_MODULE_9__["default"], {
    cid: floor._id
  })) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), auth && floor.author === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "14px",
      color: "gray"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["WarningOutlined"], null), "\u4E3E\u62A5")));
};

var CPart = function CPart(props) {
  var commodity = props.commodity;
  if (!commodity.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: commodity.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: commodity,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var comment = props.comment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: comment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: comment
  })));
};

var CommentPart = function CommentPart(props) {
  var comments = props.comments;
  var floors = comments.map(function (comment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      comment: comment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Commodity_store = function Commodity_store(props) {
  var commodity = props.commodity,
      loadCommodity = props.loadCommodity,
      comments = props.comments;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadCommodity();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CPart, {
    commodity: commodity
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "red",
      fontSize: "18px",
      textAlign: "center"
    }
  }, "\u2193\u8BC4\u8BBA\u533A\u2193"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CommentPart, {
    comments: comments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Commodity_store);

/***/ }),

/***/ "./src/jsx/Mystore/DeleteCButton_store.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/Mystore/DeleteCButton_store.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteCButton_store = function DeleteCButton_store(props) {
  var cid = props.cid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/commentstore/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除评论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  cid: cid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteCButton_store));

/***/ }),

/***/ "./src/jsx/Mystore/DeleteCommodityButton_store.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/Mystore/DeleteCommodityButton_store.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var DeleteCommodityButton_store = function DeleteCommodityButton_store(props) {
  var cid = props.cid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/storecommodities/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/storecommodities');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, _JSON$parse2, storename, s_token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该商品吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                _JSON$parse2 = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN2"])), storename = _JSON$parse2.storename, s_token = _JSON$parse2.s_token;
                body = {
                  username: username,
                  token: token,
                  cid: cid,
                  storename: storename,
                  s_token: s_token
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteCommodityButton_store));

/***/ }),

/***/ "./src/jsx/Mystore/ModifyCButton_store.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/Mystore/ModifyCButton_store.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var cid = props.cid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      settings = _useState2[0],
      setSettings = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      title = _useState4[0],
      setTitle = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      content = _useState6[0],
      setContent = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      category = _useState8[0],
      setCategory = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
      price = _useState10[0],
      setPrice = _useState10[1]; // const [pictures,setPictures] = useState([])


  var loadDiscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/storecommodities/").concat(cid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.commodity.title);
                setContent(result.data.commodity.content);
                setCategory(result.data.commodity.category);
                setPrice(result.data.commodity.price);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadDiscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadDiscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifycForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "category"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u7C7B\u522B"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u7C7B\u522B",
    defaultValue: category
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "price"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4EF7\u683C"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C",
    defaultValue: price
  })));
};

var ModifyCButton = function ModifyCButton(props) {
  var cid = props.cid,
      loadCommodity = props.loadCommodity;

  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
      show = _useState12[0],
      setShow = _useState12[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var storage, _JSON$parse, username, token, storage2, _JSON$parse2, storename, s_token, title, content, category, price, formData, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              _context2.next = 7;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN2"]);

            case 7:
              storage2 = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse2 = JSON.parse(storage2), storename = _JSON$parse2.storename, s_token = _JSON$parse2.s_token; //要解构就得先将storage的字符串格式转换成json格式

              title = body.title, content = body.content, category = body.category, price = body.price;
              formData = new FormData(); //实例化声明formData

              _context2.next = 13;
              return formData.append('username', username);

            case 13:
              _context2.next = 15;
              return formData.append('token', token);

            case 15:
              _context2.next = 17;
              return formData.append('storename', storename);

            case 17:
              _context2.next = 19;
              return formData.append('s_token', s_token);

            case 19:
              _context2.next = 21;
              return formData.append('title', title);

            case 21:
              _context2.next = 23;
              return formData.append('content', content);

            case 23:
              _context2.next = 25;
              return formData.append('category', category);

            case 25:
              _context2.next = 27;
              return formData.append('price', price);

            case 27:
              _context2.next = 29;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/storecommodities/").concat(cid), {
                method: "PATCH",
                body: formData
              });

            case 29:
              res = _context2.sent;
              _context2.next = 32;
              return res.json();

            case 32:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadCommodity();
              } else {
                alert(result.message);
              }

              _context2.next = 39;
              break;

            case 36:
              _context2.prev = 36;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 39:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 36]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse3, username, token, storage2, _JSON$parse4, storename, s_token, form, title, content, category, price, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse3 = JSON.parse(storage), username = _JSON$parse3.username, token = _JSON$parse3.token;
              _context3.next = 6;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN2"]);

            case 6:
              storage2 = _context3.sent;
              _JSON$parse4 = JSON.parse(storage2), storename = _JSON$parse4.storename, s_token = _JSON$parse4.s_token;
              form = document.forms.modifycForm;
              title = form.title.value;
              content = form.content.value;
              category = form.category.value;
              price = form.price.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content,
                category: category,
                price: price,
                storename: storename,
                s_token: s_token
              }; //用body将三个变量封装到body里，相当于请求体

              modify(body);

            case 15:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u5546\u54C1")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    cid: cid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyCButton);

/***/ }),

/***/ "./src/jsx/Mystore/PostButton_store.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/Mystore/PostButton_store.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var PostForm = function PostForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "postForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })));
};

var PostButton = function PostButton(props) {
  var cid = props.cid,
      loadCommodity = props.loadCommodity;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var post = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/commentstore/").concat(cid), {
                //根据商品发布讨论
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交讨论，自动关闭模态框

                loadCommodity();
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function post(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handlePost = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 2:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              form = document.forms.postForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              post(body);

            case 8:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handlePost() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-success",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u53D1\u5E03\u8BC4\u8BBA"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u53D1\u5E03\u8BC4\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PostForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (PostButton);

/***/ }),

/***/ "./src/jsx/Mystore/Postcommodity_store.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/Mystore/Postcommodity_store.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postcommodity_store = function Postcommodity_store(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      commodities = _useState10[0],
      setCommodities = _useState10[1];

  var loadCommodities = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/storecommodities"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setCommodities(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadCommodities() {
      return _ref.apply(this, arguments);
    };
  }();

  var postcommodity = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/storecommodities"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadCommodities();
                history.push('/storecommodities');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postcommodity(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadCommodities();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, storage2, _JSON$parse2, storename, s_token, title, content, category, price, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              _context4.next = 6;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN2"]);

            case 6:
              storage2 = _context4.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage2), storename = _JSON$parse2.storename, s_token = _JSON$parse2.s_token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content, category = values.category, price = values.price;
              body = {
                title: title,
                content: content,
                category: category,
                price: price,
                filelist: filelist,
                username: username,
                token: token,
                storename: storename,
                s_token: s_token
              };
              postcommodity(body);

            case 11:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }();

  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u53D1\u5E03\u5546\u94FA\u5546\u54C1"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入商品标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入商品内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u7C7B\u578B",
    name: "category",
    rules: [{
      required: true,
      message: "请输入商品类型"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u4EF7\u683C",
    name: "price",
    rules: [{
      required: true,
      message: "请输入商品价格"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postcommodity_store);

/***/ }),

/***/ "./src/jsx/ProfilePage/DeletePcommentButton.jsx":
/*!******************************************************!*\
  !*** ./src/jsx/ProfilePage/DeletePcommentButton.jsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");






var DeletePcommentButton = function DeletePcommentButton(props) {
  var pid = props.pid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_4__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_4__["PORT"], "/api/pcomments/").concat(pid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认撤回该回复吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_4__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  pid: pid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__["EnterOutlined"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (DeletePcommentButton);

/***/ }),

/***/ "./src/jsx/ProfilePage/DeletePletterButton.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/ProfilePage/DeletePletterButton.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");








var DeletePletterButton = function DeletePletterButton(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      user = _useContext.user;

  var pid = props.pid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/pletters/").concat(pid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push("/profilepletter/".concat(user._id));
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该私信吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  pid: pid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeletePletterButton));

/***/ }),

/***/ "./src/jsx/ProfilePage/Fans.jsx":
/*!**************************************!*\
  !*** ./src/jsx/ProfilePage/Fans.jsx ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var FanInfo = function FanInfo(props) {
  var fans = props.fans;
  var lines = fans.map(function (fan, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      style: {
        textAlign: "center",
        backgroundPosition: "relative"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profileclick/".concat(fan._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 rounded-circle",
      src: fan.avatar ? "/upload/".concat(fan.avatar) : "/img/avatar.jpg"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profileclick/".concat(fan._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        fontSize: "18px"
      }
    }, fan.nickname ? fan.nickname : fan.username)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, fan.description)));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"], {
    defaultActiveKey: "0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"].Toggle, {
    as: react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"].Header,
    eventKey: "0"
  }, "TA\u7684\u7C89\u4E1D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"].Collapse, {
    eventKey: "0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"], {
    variant: "flush"
  }, lines), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("hr", null)))));
};

var Fans = function Fans(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      user = _useState2[0],
      setUser = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      fans = _useState4[0],
      setFans = _useState4[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUser(result.data);
                setFans(result.data.fans);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(FanInfo, {
    fans: fans
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Fans);

/***/ }),

/***/ "./src/jsx/ProfilePage/Followers.jsx":
/*!*******************************************!*\
  !*** ./src/jsx/ProfilePage/Followers.jsx ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var FollowerInfo = function FollowerInfo(props) {
  var followers = props.followers;
  var lines = followers.map(function (follower, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      style: {
        textAlign: "center",
        backgroundPosition: "relative"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profileclick/".concat(follower._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 rounded-circle",
      src: follower.avatar ? "/upload/".concat(follower.avatar) : "/img/avatar.jpg"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profileclick/".concat(follower._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        fontSize: "18px"
      }
    }, follower.nickname ? follower.nickname : follower.username)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, follower.description)));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"], {
    defaultActiveKey: "0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"].Toggle, {
    as: react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"].Header,
    eventKey: "0"
  }, "TA\u7684\u5173\u6CE8"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"].Collapse, {
    eventKey: "0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"], {
    variant: "flush"
  }, lines), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("hr", null)))));
};

var Followers = function Followers(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      user = _useState2[0],
      setUser = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      followers = _useState4[0],
      setFollowers = _useState4[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUser(result.data);
                setFollowers(result.data.followers);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(FollowerInfo, {
    followers: followers
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Followers);

/***/ }),

/***/ "./src/jsx/ProfilePage/Followers2.jsx":
/*!********************************************!*\
  !*** ./src/jsx/ProfilePage/Followers2.jsx ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var FollowerInfo = function FollowerInfo(props) {
  var followers2 = props.followers2;
  var lines = followers2.map(function (follower2, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      style: {
        textAlign: "center",
        backgroundPosition: "relative"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profilestoreinfoclick/".concat(follower2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 rounded-circle",
      src: follower2.avatar ? "/upload/".concat(follower2.avatar) : "/img/avatar.jpg"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profilestoreinfoclick/".concat(follower2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        fontSize: "18px"
      }
    }, follower2.storename)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, follower2.description)));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"], {
    defaultActiveKey: "0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"].Toggle, {
    as: react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"].Header,
    eventKey: "0"
  }, "TA\u5173\u6CE8\u7684\u5546\u94FA"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Accordion"].Collapse, {
    eventKey: "0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"], {
    variant: "flush"
  }, lines), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("hr", null)))));
};

var Followers2 = function Followers2(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      user = _useState2[0],
      setUser = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      followers2 = _useState4[0],
      setFollowers2 = _useState4[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUser(result.data);
                setFollowers2(result.data.followers2);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(FollowerInfo, {
    followers2: followers2
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Followers2);

/***/ }),

/***/ "./src/jsx/ProfilePage/FromsbPletter.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/ProfilePage/FromsbPletter.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var TabPane = antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"].TabPane;


var PletterInfo = function PletterInfo(props) {
  var pletters = props.pletters;
  var lines = pletters.map(function (pletter, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profileclick/".concat(pletter.author._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 32,
      height: 32,
      className: "mr-3 rounded-circle",
      src: pletter.author.avatar ? "/upload/".concat(pletter.author.avatar) : '/img/avatar.jpg'
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        paddingLeft: "3px"
      }
    }, pletter.author.username)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/pletter/".concat(pletter._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, pletter.content)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(pletter.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var FromsbPletter = function FromsbPletter(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      pletters = _useState2[0],
      setPletters = _useState2[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/pletters/fromsb/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setPletters(result.data);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PletterInfo, {
    pletters: pletters
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (FromsbPletter);

/***/ }),

/***/ "./src/jsx/ProfilePage/Pcomment.jsx":
/*!******************************************!*\
  !*** ./src/jsx/ProfilePage/Pcomment.jsx ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");






var Pcomment = function Pcomment(props) {
  var pid = props.pid,
      loadPletter = props.loadPletter;

  var reply = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_4__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_4__["PORT"], "/api/pcomments/").concat(pid), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body) //将body转化为字符串来调用接口

              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                loadPletter();
                document.forms.replyForm.content.value = "";
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function reply(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleReply = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(e) {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              e.preventDefault(); //阻止页面刷新

              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_4__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.replyForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              reply(body);

            case 9:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleReply(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"], {
    id: "replyForm",
    className: "p-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Label, null, "\u56DE\u590D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Button"], {
    variant: "success",
    type: "submit",
    onClick: function onClick(e) {
      return handleReply(e);
    }
  }, "\u53D1\u9001"));
};

/* harmony default export */ __webpack_exports__["default"] = (Pcomment);

/***/ }),

/***/ "./src/jsx/ProfilePage/Pletter.jsx":
/*!*****************************************!*\
  !*** ./src/jsx/ProfilePage/Pletter.jsx ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _DeletePcommentButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DeletePcommentButton */ "./src/jsx/ProfilePage/DeletePcommentButton.jsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);






var UserCard = function UserCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_2__["userContext"]),
      auth = _useContext.auth;

  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_2__["userContext"]),
      user = _useContext2.user,
      auth = _useContext2.auth;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, floor.content), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_DeletePcommentButton__WEBPACK_IMPORTED_MODULE_3__["default"], {
    pid: floor._id
  })) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null));
};

var DPart = function DPart(props) {
  var pletter = props.pletter;
  if (!pletter.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserCard, {
    author: pletter.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContentCard, {
    floor: pletter,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var pcomment = props.pcomment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserCard, {
    author: pcomment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContentCard, {
    floor: pcomment
  })));
};

var CPart = function CPart(props) {
  var pcomments = props.pcomments;
  var floors = pcomments.map(function (pcomment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Floor, {
      key: idx,
      pcomment: pcomment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, floors);
};

var Pletter = function Pletter(props) {
  var pcomments = props.pcomments,
      pletter = props.pletter,
      loadPletter = props.loadPletter;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadPletter();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DPart, {
    pletter: pletter
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CPart, {
    pcomments: pcomments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Pletter);

/***/ }),

/***/ "./src/jsx/ProfilePage/PletterPage.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/ProfilePage/PletterPage.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Pletter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Pletter */ "./src/jsx/ProfilePage/Pletter.jsx");
/* harmony import */ var _Pcomment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Pcomment */ "./src/jsx/ProfilePage/Pcomment.jsx");
/* harmony import */ var _DeletePletterButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DeletePletterButton */ "./src/jsx/ProfilePage/DeletePletterButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");












var PletterPage = function PletterPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_10__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var pid = props.match.params.pid; //从浏览器地址栏匹配到pid

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      pletter = _useState2[0],
      setPletter = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      pcomments = _useState4[0],
      setPcomments = _useState4[1];

  var loadPletter = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_9__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_9__["PORT"], "/api/pletters/").concat(pid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setPletter(result.data.pletter);
                setPcomments(result.data.pcomments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadPletter() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, pletter.author === user._id ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeletePletterButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    pid: pid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Pletter__WEBPACK_IMPORTED_MODULE_6__["default"], {
    pid: pid,
    loadPletter: loadPletter,
    pcomments: pcomments,
    pletter: pletter
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Pcomment__WEBPACK_IMPORTED_MODULE_7__["default"], {
    pid: pid,
    loadPletter: loadPletter
  }) : null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (PletterPage);

/***/ }),

/***/ "./src/jsx/ProfilePage/PostWallpaper.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/ProfilePage/PostWallpaper.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var PostWallpaper = function PostWallpaper(props) {
  var history = props.history,
      uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      settings = _useState10[0],
      setSettings = _useState10[1]; //useState内部需要一个参数表示settings的初始值，用个[]空列表代替


  var loadSettings = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var storage, _JSON$parse, username, token, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式，读取用getItem,从DOMAIN读取
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              _context.next = 7;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/users/").concat(uid), {
                //调用接口
                method: "GET"
              });

            case 7:
              res = _context.sent;
              _context.next = 10;
              return res.json();

            case 10:
              result = _context.sent;

              //转化为json格式
              if (res.ok) {
                setSettings(result.data); //把响应体里的数据修改状态setSettings存储到状态settings里
              } else {
                alert(result.message);
              }

              _context.next = 17;
              break;

            case 14:
              _context.prev = 14;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 17:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 14]]);
    }));

    return function loadSettings() {
      return _ref.apply(this, arguments);
    };
  }();

  var postwallpaper = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/users/wallpaper"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadSettings();
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postwallpaper(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadSettings();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 300;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过300KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse2, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token;
              body = {
                filelist: filelist,
                username: username,
                token: token
              };
              postwallpaper(body);

            case 6:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }(); // const handleChange = ({ fileList }) => {
  //   console.log("这个是jsx里的fileList:",fileList)
  //   setFileList(fileList)
  // }


  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u4E0A\u4F20\u58C1\u7EB8", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 1 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (PostWallpaper);

/***/ }),

/***/ "./src/jsx/ProfilePage/ProfilePage.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/ProfilePage/ProfilePage.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _UserInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UserInfo */ "./src/jsx/ProfilePage/UserInfo.jsx");




var ProfilePage = function ProfilePage(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_UserInfo__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfilePage);

/***/ }),

/***/ "./src/jsx/ProfilePage/ProfilePage_fans.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/ProfilePage/ProfilePage_fans.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Fans__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Fans */ "./src/jsx/ProfilePage/Fans.jsx");




var ProfilePage_fans = function ProfilePage_fans(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Fans__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfilePage_fans);

/***/ }),

/***/ "./src/jsx/ProfilePage/ProfilePage_followers.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/ProfilePage/ProfilePage_followers.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Followers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Followers */ "./src/jsx/ProfilePage/Followers.jsx");




var ProfilePage_followers = function ProfilePage_followers(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Followers__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfilePage_followers);

/***/ }),

/***/ "./src/jsx/ProfilePage/ProfilePletter.jsx":
/*!************************************************!*\
  !*** ./src/jsx/ProfilePage/ProfilePletter.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _FromsbPletter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./FromsbPletter */ "./src/jsx/ProfilePage/FromsbPletter.jsx");
/* harmony import */ var _TosbPletter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TosbPletter */ "./src/jsx/ProfilePage/TosbPletter.jsx");
/* harmony import */ var _PletterPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PletterPage */ "./src/jsx/ProfilePage/PletterPage.jsx");




var TabPane = antd__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane;




var ProfilePletter2 = function ProfilePletter2(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, "\u79C1\u4FE1\u6211\u7684"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FromsbPletter__WEBPACK_IMPORTED_MODULE_4__["default"], {
    uid: uid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, "\u6211\u79C1\u4FE1\u7684"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_TosbPletter__WEBPACK_IMPORTED_MODULE_5__["default"], {
    uid: uid
  }))));
};

var ProfilePletter = function ProfilePletter() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], {
    exact: true,
    path: "/profilepletter/:uid",
    component: ProfilePletter2
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], {
    exact: true,
    path: "/pletter/:pid",
    component: _PletterPage__WEBPACK_IMPORTED_MODULE_6__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfilePletter);

/***/ }),

/***/ "./src/jsx/ProfilePage/ProfileStorePage2.jsx":
/*!***************************************************!*\
  !*** ./src/jsx/ProfilePage/ProfileStorePage2.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Followers2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Followers2 */ "./src/jsx/ProfilePage/Followers2.jsx");




var ProfileStorePage2 = function ProfileStorePage2(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Followers2__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfileStorePage2);

/***/ }),

/***/ "./src/jsx/ProfilePage/SettingForm.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/ProfilePage/SettingForm.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");



 //useState表示状态，react里的钩子




var SettingForm = function SettingForm(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      settings = _useState2[0],
      setSettings = _useState2[1]; //useState内部需要一个参数表示settings的初始值，用个[]空列表代替


  var loadSettings = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var storage, _JSON$parse, username, token, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式，读取用getItem,从DOMAIN读取
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              _context.next = 7;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/").concat(uid), {
                //调用接口
                method: "GET"
              });

            case 7:
              res = _context.sent;
              _context.next = 10;
              return res.json();

            case 10:
              result = _context.sent;

              //转化为json格式
              if (res.ok) {
                setSettings(result.data); //把响应体里的数据修改状态setSettings存储到状态settings里
              } else {
                alert(result.message);
              }

              _context.next = 17;
              break;

            case 14:
              _context.prev = 14;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 17:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 14]]);
    }));

    return function loadSettings() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    //作用：让组件加载后能够读取并渲染用户当前信息
    loadSettings();
  }, []); //第二个参数加上[]可以防止反复渲染的副作用产生

  var setting = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var storage, _JSON$parse2, username, token, description, nickname, formData, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage的字符串格式转换成json格式

              description = body.description, nickname = body.nickname;
              formData = new FormData(); //实例化声明formData

              _context2.next = 9;
              return formData.append('username', username);

            case 9:
              _context2.next = 11;
              return formData.append('token', token);

            case 11:
              _context2.next = 13;
              return formData.append('nickname', nickname);

            case 13:
              _context2.next = 15;
              return formData.append('description', description);

            case 15:
              _context2.next = 17;
              return formData.append('avatar', document.querySelector('#uploader').files[0]);

            case 17:
              _context2.next = 19;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users"), {
                method: "PATCH",
                body: formData
              });

            case 19:
              res = _context2.sent;
              _context2.next = 22;
              return res.json();

            case 22:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                loadSettings(); //调用loadSettings实时更新用户当前数据
              } else {
                alert(result.message);
              }

              _context2.next = 29;
              break;

            case 26:
              _context2.prev = 26;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 29:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 26]]);
    }));

    return function setting(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleSettings = function handleSettings(e) {
    e.preventDefault(); //阻止页面刷新

    var form = document.forms.settingForm;
    var nickname = form.nickname.value;
    var description = form.description.value;
    var body = {
      description: description,
      nickname: nickname
    };
    setting(body); //调用register函数并且将body传过去
  };

  return (
    /*#__PURE__*/
    //file表示提交文件类型
    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
      id: "settingForm"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
      controlId: "nickname"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6635\u79F0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
      type: "text",
      placeholder: "\u8BF7\u8F93\u5165\u6635\u79F0",
      defaultValue: settings.nickname
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
      controlId: "description"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4E2A\u4EBA\u63CF\u8FF0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
      type: "text",
      placeholder: "\u8BF7\u8F93\u5165\u4E2A\u4EBA\u63CF\u8FF0",
      defaultValue: settings.description
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
      controlId: "uploader"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5934\u50CF"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 96,
      height: 96,
      className: "mr-3 img-thumbnail round",
      src: settings.avatar ? "/upload/".concat(settings.avatar) : '/img/avatar.jpg',
      alt: "\u5934\u50CF"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
      type: "file",
      placeholder: "\u8BF7\u4E0A\u4F20\u5934\u50CF"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
      variant: "primary",
      type: "submit",
      onClick: function onClick(e) {
        return handleSettings(e);
      }
    }, "\u786E\u8BA4"))
  );
};

/* harmony default export */ __webpack_exports__["default"] = (SettingForm);

/***/ }),

/***/ "./src/jsx/ProfilePage/SettingPage.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/ProfilePage/SettingPage.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _SettingForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SettingForm */ "./src/jsx/ProfilePage/SettingForm.jsx");
/* harmony import */ var _PostWallpaper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PostWallpaper */ "./src/jsx/ProfilePage/PostWallpaper.jsx");





var SettingPage = function SettingPage(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], {
    className: "d-flex justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
    sm: 12,
    md: 6
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SettingForm__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
    sm: 12,
    md: 6
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PostWallpaper__WEBPACK_IMPORTED_MODULE_3__["default"], {
    uid: uid
  }))));
};

/* harmony default export */ __webpack_exports__["default"] = (SettingPage);

/***/ }),

/***/ "./src/jsx/ProfilePage/ShoppingCart.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/ProfilePage/ShoppingCart.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__);









var ShoppingInfo = function ShoppingInfo(props) {
  var shoppingcarts = props.shoppingcarts;
  var lines = shoppingcarts.map(function (shoppingcart, idx) {
    var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(shoppingcart.price),
        _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
        counter = _useState2[0],
        setCounter = _useState2[1];

    var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(1),
        _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
        num = _useState4[0],
        setNum = _useState4[1];

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(shoppingcart._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 128,
      height: 128,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(shoppingcart.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(shoppingcart._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, shoppingcart.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      style: {
        fontSize: "24px",
        color: "orangered"
      }
    }, "\uFFE5", shoppingcart.price), "\u6570\u91CF: ", num >= 1 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button", {
      onClick: function onClick() {
        setCounter(counter - shoppingcart.price), setNum(num - 1);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["MinusOutlined"], null)) : null, " ", num, " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button", {
      onClick: function onClick() {
        setCounter(counter + shoppingcart.price), setNum(num + 1);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["PlusOutlined"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      className: "d-flex justify-content-end"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      style: {
        color: "red"
      }
    }, "\u5408\u8BA1:", counter)));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var ShoppingInfo2 = function ShoppingInfo2(props) {
  var shoppingcarts2 = props.shoppingcarts2;
  var lines = shoppingcarts2.map(function (shoppingcart2, idx) {
    var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(shoppingcart2.price),
        _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
        counter2 = _useState6[0],
        setCounter2 = _useState6[1];

    var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(1),
        _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
        num2 = _useState8[0],
        setNum2 = _useState8[1];

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(shoppingcart2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 128,
      height: 128,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(shoppingcart2.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(shoppingcart2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, shoppingcart2.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      style: {
        fontSize: "24px",
        color: "orangered"
      }
    }, "\uFFE5", shoppingcart2.price), "\u6570\u91CF: ", num2 >= 1 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button", {
      onClick: function onClick() {
        setCounter2(counter2 - shoppingcart2.price), setNum2(num2 - 1);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["MinusOutlined"], null)) : null, " ", num2, " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button", {
      onClick: function onClick() {
        setCounter2(counter2 + shoppingcart2.price), setNum2(num2 + 1);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["PlusOutlined"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      className: "d-flex justify-content-end"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      style: {
        color: "red"
      }
    }, "\u5408\u8BA1:", counter2)));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var ShoppingInfo3 = function ShoppingInfo3(props) {
  var shoppingcarts3 = props.shoppingcarts3;
  var lines = shoppingcarts3.map(function (shoppingcart3, idx) {
    var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(shoppingcart3.price),
        _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
        counter3 = _useState10[0],
        setCounter3 = _useState10[1];

    var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(1),
        _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
        num3 = _useState12[0],
        setNum3 = _useState12[1];

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(shoppingcart3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 128,
      height: 128,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(shoppingcart3.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(shoppingcart3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, shoppingcart3.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      style: {
        fontSize: "24px",
        color: "orangered"
      }
    }, "\uFFE5", shoppingcart3.price), "\u6570\u91CF: ", num3 >= 1 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button", {
      onClick: function onClick() {
        setCounter3(counter3 - shoppingcart3.price), setNum3(num3 - 1);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["MinusOutlined"], null)) : null, " ", num3, " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button", {
      onClick: function onClick() {
        setCounter3(counter3 + shoppingcart3.price), setNum3(num3 + 1);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["PlusOutlined"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      className: "d-flex justify-content-end"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
      style: {
        color: "red"
      }
    }, "\u5408\u8BA1:", counter3)));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
}; // const ProfileInfo = (props)=>{
//     const [counter,counter2,counter3] = props
//     console.log(counter)
//     return(
//         <div style={{fontSize:"35px",color:"red"}}>总计:{counter+counter2+counter3}元</div>
//     )
// }


var ShoppingCart = function ShoppingCart(props) {
  var uid = props.uid;

  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState13, 2),
      user = _useState14[0],
      setUser = _useState14[1];

  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState15, 2),
      shoppingcarts = _useState16[0],
      setShoppingcarts = _useState16[1];

  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState18 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState17, 2),
      shoppingcarts2 = _useState18[0],
      setShoppingcarts2 = _useState18[1];

  var _useState19 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState20 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState19, 2),
      shoppingcarts3 = _useState20[0],
      setShoppingcarts3 = _useState20[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/users/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUser(result.data);
                setShoppingcarts(result.data.shoppingcarts);
                setShoppingcarts2(result.data.shoppingcarts2);
                setShoppingcarts3(result.data.shoppingcarts3);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ShoppingInfo, {
    shoppingcarts: shoppingcarts
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ShoppingInfo2, {
    shoppingcarts2: shoppingcarts2
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ShoppingInfo3, {
    shoppingcarts3: shoppingcarts3
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ShoppingCart);

/***/ }),

/***/ "./src/jsx/ProfilePage/ShoppingCart2.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/ProfilePage/ShoppingCart2.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ShoppingCart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ShoppingCart */ "./src/jsx/ProfilePage/ShoppingCart.jsx");




var ShoppingCart2 = function ShoppingCart2(props) {
  var uid = props.match.params.uid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ShoppingCart__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ShoppingCart2);

/***/ }),

/***/ "./src/jsx/ProfilePage/TosbPletter.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/ProfilePage/TosbPletter.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var PletterInfo = function PletterInfo(props) {
  var pletters = props.pletters;
  var lines = pletters.map(function (pletter, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profileclick/".concat(pletter.target._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 32,
      height: 32,
      className: "mr-3 rounded-circle",
      src: pletter.target.avatar ? "/upload/".concat(pletter.target.avatar) : '/img/avatar.jpg'
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        paddingLeft: "3px"
      }
    }, pletter.target.username)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/pletter/".concat(pletter._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, pletter.content)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(pletter.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var TosbPletter = function TosbPletter(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      pletters = _useState2[0],
      setPletters = _useState2[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/pletters/tosb/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setPletters(result.data);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PletterInfo, {
    pletters: pletters
  }));
}; // const TosbPletter2 = ()=>{
//     return(
//         <Switch>
//             <Route exact path="/profilepletter/:uid" component={TosbPletter}/>
//             <Route exact path="/profilepletter/:pid" component={PletterPage}/>
//         </Switch>
//     )
// }


/* harmony default export */ __webpack_exports__["default"] = (TosbPletter);

/***/ }),

/***/ "./src/jsx/ProfilePage/UserInfo.jsx":
/*!******************************************!*\
  !*** ./src/jsx/ProfilePage/UserInfo.jsx ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _SettingPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SettingPage */ "./src/jsx/ProfilePage/SettingPage.jsx");
/* harmony import */ var _ProfilePletter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ProfilePletter */ "./src/jsx/ProfilePage/ProfilePletter.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__);








var TabPane = antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"].TabPane;




var ProfileInfo = function ProfileInfo(props) {
  var user = props.user,
      followers = props.followers,
      followers2 = props.followers2,
      fans = props.fans,
      wallpaper = props.wallpaper;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center",
      backgroundPosition: "relative"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 1100,
    height: 200,
    src: wallpaper.length ? "/upload/".concat(user.wallpaper[0]) : "/img/white.png",
    style: {
      backgroundPosition: "absolute"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 96,
    height: 96,
    className: "img-thumbnail round",
    style: {
      borderRadius: "100%",
      backgroundPosition: "relative",
      marginTop: "-50px"
    },
    src: user.avatar ? "/upload/".concat(user.avatar) : "/img/avatar.jpg"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
    style: {
      fontSize: "20px",
      paddingBottom: "6px"
    }
  }, user.nickname ? user.nickname : user.username), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/followers/".concat(user._id),
    style: {
      fontSize: "15px",
      color: "gray",
      paddingLeft: "5px",
      paddingRight: "5px"
    }
  }, "\u5173\u6CE8 ", followers.length), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/fans/".concat(user._id),
    style: {
      fontSize: "15px",
      color: "gray",
      paddingLeft: "5px",
      paddingRight: "5px"
    }
  }, "\u7C89\u4E1D ", fans.length), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/followers_store/".concat(user._id),
    style: {
      fontSize: "15px",
      color: "gray",
      paddingLeft: "5px",
      paddingRight: "5px"
    }
  }, "\u5546\u94FA ", followers2.length), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "12px",
      color: "gray",
      paddingTop: "6px"
    }
  }, user.description ? user.description : "暂无简介"));
};

var DiscussesInfo = function DiscussesInfo(props) {
  var discusses = props.discusses;
  var lines = discusses.map(function (discuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(discuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(discuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(discuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, discuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(discuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var HelpdiscussesInfo = function HelpdiscussesInfo(props) {
  var helpdiscusses = props.helpdiscusses;
  var lines = helpdiscusses.map(function (helpdiscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(helpdiscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(helpdiscuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(helpdiscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, helpdiscuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(helpdiscuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikediscussesInfo = function LikediscussesInfo(props) {
  var likediscusses = props.likediscusses;
  var lines = likediscusses.map(function (likediscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(likediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(likediscuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(likediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, likediscuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(likediscuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var UnlikediscussesInfo = function UnlikediscussesInfo(props) {
  var unlikediscusses = props.unlikediscusses;
  var lines = unlikediscusses.map(function (unlikediscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(unlikediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(unlikediscuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(unlikediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, unlikediscuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(unlikediscuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var McommoditiesInfo = function McommoditiesInfo(props) {
  var mcommodities = props.mcommodities;
  var lines = mcommodities.map(function (mcommodity, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(mcommodity._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(mcommodity.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(mcommodity._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, mcommodity.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(mcommodity.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var SecondhandInfo = function SecondhandInfo(props) {
  var secondhands = props.secondhands;
  var lines = secondhands.map(function (secondhand, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(secondhand._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(secondhand.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(secondhand._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, secondhand.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(secondhand.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var GroupbuyInfo = function GroupbuyInfo(props) {
  var groupbuys = props.groupbuys;
  var lines = groupbuys.map(function (groupbuy, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(groupbuy._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(groupbuy.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(groupbuy._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, groupbuy.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(groupbuy.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var MystoreInfo = function MystoreInfo(props) {
  var stores = props.stores;
  var lines = stores.map(function (store, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profilestoreinfoclick/".concat(store._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(store.avatar)
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profilestoreinfoclick/".concat(store._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, store.storename)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(store.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CinformationsInfo = function CinformationsInfo(props) {
  var cinformations = props.cinformations;
  var lines = cinformations.map(function (cinformation, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(cinformation._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(cinformation.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(cinformation._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, cinformation.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(cinformation.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo = function CollectInfo(props) {
  var collects = props.collects;
  var lines = collects.map(function (collect, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(collect._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(collect._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo2 = function CollectInfo2(props) {
  var collects2 = props.collects2;
  var lines = collects2.map(function (collect2, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(collect2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect2.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(collect2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect2.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect2.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo3 = function CollectInfo3(props) {
  var collects3 = props.collects3;
  var lines = collects3.map(function (collect3, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(collect3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect3.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(collect3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect3.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect3.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo4 = function CollectInfo4(props) {
  var collects4 = props.collects4;
  var lines = collects4.map(function (collect4, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(collect4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect4.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(collect4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect4.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect4.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo1 = function LikeInfo1(props) {
  var likesd = props.likesd;
  var lines = likesd.map(function (like1, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(like1._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like1.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(like1._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like1.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like1.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo2 = function LikeInfo2(props) {
  var likesh = props.likesh;
  var lines = likesh.map(function (like2, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(like2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like2.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(like2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like2.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like2.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo3 = function LikeInfo3(props) {
  var likesl = props.likesl;
  var lines = likesl.map(function (like3, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(like3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like3.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(like3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like3.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like3.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo4 = function LikeInfo4(props) {
  var likesu = props.likesu;
  var lines = likesu.map(function (like4, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(like4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like4.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(like4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like4.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like4.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var UserInfo = function UserInfo(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      user = _useState2[0],
      setUser = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      discusses = _useState4[0],
      setDiscusses = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      helpdiscusses = _useState6[0],
      setHelpdiscusses = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      likediscusses = _useState8[0],
      setLikediscusses = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
      unlikediscusses = _useState10[0],
      setUnlikediscusses = _useState10[1];

  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
      mcommodities = _useState12[0],
      setMcommodities = _useState12[1];

  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState13, 2),
      secondhands = _useState14[0],
      setSecondhands = _useState14[1];

  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState15, 2),
      groupbuys = _useState16[0],
      setGroupbuys = _useState16[1];

  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState18 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState17, 2),
      stores = _useState18[0],
      setStores = _useState18[1];

  var _useState19 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState20 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState19, 2),
      cinformations = _useState20[0],
      setCinformations = _useState20[1];

  var _useState21 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState22 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState21, 2),
      collects = _useState22[0],
      setCollects = _useState22[1];

  var _useState23 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState24 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState23, 2),
      collects2 = _useState24[0],
      setCollects2 = _useState24[1];

  var _useState25 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState26 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState25, 2),
      collects3 = _useState26[0],
      setCollects3 = _useState26[1];

  var _useState27 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState28 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState27, 2),
      collects4 = _useState28[0],
      setCollects4 = _useState28[1];

  var _useState29 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState30 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState29, 2),
      followers = _useState30[0],
      setFollowers = _useState30[1];

  var _useState31 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState32 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState31, 2),
      fans = _useState32[0],
      setFans = _useState32[1];

  var _useState33 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState34 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState33, 2),
      followers2 = _useState34[0],
      setFollowers2 = _useState34[1];

  var _useState35 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState36 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState35, 2),
      likesd = _useState36[0],
      setLikesd = _useState36[1];

  var _useState37 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState38 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState37, 2),
      likesh = _useState38[0],
      setLikesh = _useState38[1];

  var _useState39 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState40 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState39, 2),
      likesl = _useState40[0],
      setLikesl = _useState40[1];

  var _useState41 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState42 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState41, 2),
      likesu = _useState42[0],
      setLikesu = _useState42[1];

  var _useState43 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState44 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState43, 2),
      wallpaper = _useState44[0],
      setWallpaper = _useState44[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_9__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_9__["PORT"], "/api/users/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUser(result.data);
                setDiscusses(result.data.discusses);
                setHelpdiscusses(result.data.helpdiscusses);
                setLikediscusses(result.data.likediscusses);
                setUnlikediscusses(result.data.unlikediscusses);
                setMcommodities(result.data.mcommodities);
                setSecondhands(result.data.secondhands);
                setGroupbuys(result.data.groupbuys);
                setStores(result.data.stores);
                setCinformations(result.data.cinformations);
                setCollects(result.data.collects);
                setCollects2(result.data.collects2);
                setCollects3(result.data.collects3);
                setCollects4(result.data.collects4);
                setFollowers(result.data.followers);
                setFans(result.data.fans);
                setFollowers2(result.data.followers2);
                setLikesd(result.data.likesd);
                setLikesh(result.data.likesh);
                setLikesl(result.data.likesl);
                setLikesu(result.data.likesu);
                setWallpaper(result.data.wallpaper);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ProfileInfo, {
    user: user,
    followers: followers,
    followers2: followers2,
    fans: fans,
    wallpaper: wallpaper
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/setting/".concat(user._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
    style: {
      color: "gray",
      fontSize: "16px",
      paddingRight: "10px"
    },
    onClick: function onClick() {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_SettingPage__WEBPACK_IMPORTED_MODULE_7__["default"], null);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["EditOutlined"], null), " \u7F16\u8F91")), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/profilepletter/".concat(user._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
    style: {
      color: "green",
      fontSize: "16px",
      paddingLeft: "10px"
    },
    onClick: function onClick() {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ProfilePletter__WEBPACK_IMPORTED_MODULE_8__["default"], null);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["MailOutlined"], null), " \u4FE1\u7BB1"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"], {
    defaultActiveKey: "1",
    centered: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["MessageOutlined"], null), "\u52A8\u6001"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["CoffeeOutlined"], null), "\u95F2\u804A\u533A"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(DiscussesInfo, {
    discusses: discusses
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["SoundOutlined"], null), "\u6C42\u52A9\u533A"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(HelpdiscussesInfo, {
    helpdiscusses: helpdiscusses
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["LikeOutlined"], null), "\u79CD\u8349\u533A"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikediscussesInfo, {
    likediscusses: likediscusses
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["DislikeOutlined"], null), "\u5410\u69FD\u533A"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(UnlikediscussesInfo, {
    unlikediscusses: unlikediscusses
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["ShoppingOutlined"], null), "\u5546\u54C1"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["AppstoreOutlined"], null), "\u5546\u54C1"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(McommoditiesInfo, {
    mcommodities: mcommodities
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["UserSwitchOutlined"], null), "\u4E8C\u624B"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(SecondhandInfo, {
    secondhands: secondhands
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["TeamOutlined"], null), "\u56E2\u8D2D"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupbuyInfo, {
    groupbuys: groupbuys
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["TeamOutlined"], null), "\u5546\u94FA\u5546\u54C1"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CinformationsInfo, {
    cinformations: cinformations
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["ShopOutlined"], null), "\u5546\u94FA"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["SmileOutlined"], null), "\u6240\u521B\u5546\u94FA"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(MystoreInfo, {
    stores: stores
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["StarOutlined"], null), "\u6536\u85CF"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["AppstoreOutlined"], null), "\u5546\u54C1"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo, {
    collects: collects
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["UserSwitchOutlined"], null), "\u4E8C\u624B"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo2, {
    collects2: collects2
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["TeamOutlined"], null), "\u56E2\u8D2D"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo3, {
    collects3: collects3
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["TeamOutlined"], null), "\u5546\u94FA\u5546\u54C1"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo4, {
    collects4: collects4
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["HeartOutlined"], null), "\u70B9\u8D5E"),
    key: "5"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["CoffeeOutlined"], null), "\u95F2\u804A\u533A"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo1, {
    likesd: likesd
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["SoundOutlined"], null), "\u6C42\u52A9\u533A"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo2, {
    likesh: likesh
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["LikeOutlined"], null), "\u79CD\u8349\u533A"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo3, {
    likesl: likesl
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__["DislikeOutlined"], null), "\u5410\u69FD\u533A"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo4, {
    likesu: likesu
  }))))));
};

/* harmony default export */ __webpack_exports__["default"] = (UserInfo);

/***/ }),

/***/ "./src/jsx/ProfilePageclick/Followers.jsx":
/*!************************************************!*\
  !*** ./src/jsx/ProfilePageclick/Followers.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");









var Followers = function Followers(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_7__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser;

  var uid = props.uid,
      getUser = props.getUser;

  var follower = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_3__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_3__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_3__["PORT"], "/api/users/followers/").concat(uid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
                getUser();
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function follower() {
      return _ref.apply(this, arguments);
    };
  }();

  var unfollower = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_3__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_3__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_3__["PORT"], "/api/users/unfollowers/").concat(uid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function unfollower() {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.followers) return null;
  var button = user.followers.includes(uid) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return unfollower(uid);
    }
  }, "\u5DF2\u5173\u6CE8") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return follower(uid);
    }
  }, "\u5173\u6CE8+");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "16px",
      paddingRight: "10px"
    }
  }, button);
};

/* harmony default export */ __webpack_exports__["default"] = (Followers);

/***/ }),

/***/ "./src/jsx/ProfilePageclick/PostletterButton.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/ProfilePageclick/PostletterButton.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);








var PostForm = function PostForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "postForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })));
};

var PostletterButton = function PostletterButton(props) {
  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var post = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/pletters/").concat(uid), {
                //根据商品发布讨论
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交讨论，自动关闭模态框
                // loadCommodity()
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function post(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handlePost = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 2:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              form = document.forms.postForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              post(body);

            case 8:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handlePost() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
    style: {
      color: "#33CC66",
      fontSize: "16px",
      paddingLeft: "10px"
    },
    onClick: function onClick() {
      return showModal();
    }
  }, "\u79C1\u4FE1"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u53D1\u5E03\u8BC4\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PostForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u53D1\u9001"))));
};

/* harmony default export */ __webpack_exports__["default"] = (PostletterButton);

/***/ }),

/***/ "./src/jsx/ProfilePageclick/ProfilePageclick.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/ProfilePageclick/ProfilePageclick.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _UserInfoclick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UserInfoclick */ "./src/jsx/ProfilePageclick/UserInfoclick.jsx");




var ProfilePageclick = function ProfilePageclick(props) {
  var uid = props.match.params.uid; // console.log(uid)

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_UserInfoclick__WEBPACK_IMPORTED_MODULE_2__["default"], {
    uid: uid
  })));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfilePageclick);

/***/ }),

/***/ "./src/jsx/ProfilePageclick/UserInfoclick.jsx":
/*!****************************************************!*\
  !*** ./src/jsx/ProfilePageclick/UserInfoclick.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Followers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Followers */ "./src/jsx/ProfilePageclick/Followers.jsx");
/* harmony import */ var _PostletterButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PostletterButton */ "./src/jsx/ProfilePageclick/PostletterButton.jsx");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__);









var TabPane = antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"].TabPane;




var ProfileInfo = function ProfileInfo(props) {
  var user = props.user,
      followers = props.followers,
      followers2 = props.followers2,
      fans = props.fans,
      wallpaper = props.wallpaper;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center",
      backgroundPosition: "relative"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 1100,
    height: 200,
    src: wallpaper.length ? "/upload/".concat(user.wallpaper[0]) : "/img/white.png",
    style: {
      backgroundPosition: "absolute"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 96,
    height: 96,
    className: "img-thumbnail round",
    style: {
      borderRadius: "100%",
      backgroundPosition: "relative",
      marginTop: "-50px"
    },
    src: user.avatar ? "/upload/".concat(user.avatar) : "/img/avatar.jpg"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
    style: {
      fontSize: "20px",
      paddingBottom: "6px"
    }
  }, user.nickname ? user.nickname : user.username), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/followers/".concat(user._id),
    style: {
      fontSize: "15px",
      color: "gray",
      paddingLeft: "5px",
      paddingRight: "5px"
    }
  }, "\u5173\u6CE8 ", followers.length), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/fans/".concat(user._id),
    style: {
      fontSize: "15px",
      color: "gray",
      paddingLeft: "5px",
      paddingRight: "5px"
    }
  }, "\u7C89\u4E1D ", fans.length), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/followers_store/".concat(user._id),
    style: {
      fontSize: "15px",
      color: "gray",
      paddingLeft: "5px",
      paddingRight: "5px"
    }
  }, "\u5546\u94FA ", followers2.length), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "12px",
      color: "gray",
      paddingTop: "6px"
    }
  }, user.description ? user.description : "暂无简介"));
};

var DiscussesInfo = function DiscussesInfo(props) {
  var discusses = props.discusses;
  var lines = discusses.map(function (discuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(discuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(discuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(discuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, discuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(discuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var HelpdiscussesInfo = function HelpdiscussesInfo(props) {
  var helpdiscusses = props.helpdiscusses;
  var lines = helpdiscusses.map(function (helpdiscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(helpdiscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(helpdiscuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(helpdiscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, helpdiscuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(helpdiscuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikediscussesInfo = function LikediscussesInfo(props) {
  var likediscusses = props.likediscusses;
  var lines = likediscusses.map(function (likediscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(likediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(likediscuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(likediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, likediscuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(likediscuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var UnlikediscussesInfo = function UnlikediscussesInfo(props) {
  var unlikediscusses = props.unlikediscusses;
  var lines = unlikediscusses.map(function (unlikediscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(unlikediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(unlikediscuss.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(unlikediscuss._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, unlikediscuss.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(unlikediscuss.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var McommoditiesInfo = function McommoditiesInfo(props) {
  var mcommodities = props.mcommodities;
  var lines = mcommodities.map(function (mcommodity, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(mcommodity._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(mcommodity.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(mcommodity._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, mcommodity.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(mcommodity.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var SecondhandInfo = function SecondhandInfo(props) {
  var secondhands = props.secondhands;
  var lines = secondhands.map(function (secondhand, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(secondhand._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(secondhand.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(secondhand._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, secondhand.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(secondhand.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var GroupbuyInfo = function GroupbuyInfo(props) {
  var groupbuys = props.groupbuys;
  var lines = groupbuys.map(function (groupbuy, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(groupbuy._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(groupbuy.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(groupbuy._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, groupbuy.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(groupbuy.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var MystoreInfo = function MystoreInfo(props) {
  var stores = props.stores;
  var lines = stores.map(function (store, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profilestoreinfoclick/".concat(store._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(store.avatar)
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/profilestoreinfoclick/".concat(store._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, store.storename)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(store.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CinformationsInfo = function CinformationsInfo(props) {
  var cinformations = props.cinformations;
  var lines = cinformations.map(function (cinformation, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(cinformation._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(cinformation.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(cinformation._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, cinformation.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(cinformation.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo = function CollectInfo(props) {
  var collects = props.collects;
  var lines = collects.map(function (collect, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(collect._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/commodities/".concat(collect._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo2 = function CollectInfo2(props) {
  var collects2 = props.collects2;
  var lines = collects2.map(function (collect2, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(collect2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect2.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/secondhands/".concat(collect2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect2.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect2.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo3 = function CollectInfo3(props) {
  var collects3 = props.collects3;
  var lines = collects3.map(function (collect3, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(collect3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect3.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/groupbuys/".concat(collect3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect3.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect3.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var CollectInfo4 = function CollectInfo4(props) {
  var collects4 = props.collects4;
  var lines = collects4.map(function (collect4, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(collect4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(collect4.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/storecommodities/".concat(collect4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, collect4.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(collect4.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo1 = function LikeInfo1(props) {
  var likesd = props.likesd;
  var lines = likesd.map(function (like1, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(like1._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like1.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/discusses/".concat(like1._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like1.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like1.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo2 = function LikeInfo2(props) {
  var likesh = props.likesh;
  var lines = likesh.map(function (like2, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(like2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like2.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/helpdiscusses/".concat(like2._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like2.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like2.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo3 = function LikeInfo3(props) {
  var likesl = props.likesl;
  var lines = likesl.map(function (like3, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(like3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like3.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/likediscusses/".concat(like3._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like3.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like3.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var LikeInfo4 = function LikeInfo4(props) {
  var likesu = props.likesu;
  var lines = likesu.map(function (like4, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["ListGroup"].Item, {
      key: idx,
      className: "d-flex justify-content-between"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(like4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: "/upload/".concat(like4.pictures[0])
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
      to: "/unlikediscusses/".concat(like4._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, like4.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("small", {
      className: "text-muted"
    }, new Date(like4.posttime).toLocaleString()));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, lines);
};

var UserInfoclick = function UserInfoclick(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_9__["userContext"]),
      auth = _useContext.auth;

  var uid = props.uid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      user = _useState2[0],
      setUser = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      discusses = _useState4[0],
      setDiscusses = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      helpdiscusses = _useState6[0],
      setHelpdiscusses = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      likediscusses = _useState8[0],
      setLikediscusses = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
      unlikediscusses = _useState10[0],
      setUnlikediscusses = _useState10[1];

  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
      mcommodities = _useState12[0],
      setMcommodities = _useState12[1];

  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState13, 2),
      secondhands = _useState14[0],
      setSecondhands = _useState14[1];

  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState15, 2),
      groupbuys = _useState16[0],
      setGroupbuys = _useState16[1];

  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState18 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState17, 2),
      stores = _useState18[0],
      setStores = _useState18[1];

  var _useState19 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState20 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState19, 2),
      cinformations = _useState20[0],
      setCinformations = _useState20[1];

  var _useState21 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState22 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState21, 2),
      collects = _useState22[0],
      setCollects = _useState22[1];

  var _useState23 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState24 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState23, 2),
      collects2 = _useState24[0],
      setCollects2 = _useState24[1];

  var _useState25 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState26 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState25, 2),
      collects3 = _useState26[0],
      setCollects3 = _useState26[1];

  var _useState27 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState28 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState27, 2),
      collects4 = _useState28[0],
      setCollects4 = _useState28[1];

  var _useState29 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState30 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState29, 2),
      followers = _useState30[0],
      setFollowers = _useState30[1];

  var _useState31 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState32 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState31, 2),
      fans = _useState32[0],
      setFans = _useState32[1];

  var _useState33 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState34 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState33, 2),
      followers2 = _useState34[0],
      setFollowers2 = _useState34[1];

  var _useState35 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState36 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState35, 2),
      likesd = _useState36[0],
      setLikesd = _useState36[1];

  var _useState37 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState38 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState37, 2),
      likesh = _useState38[0],
      setLikesh = _useState38[1];

  var _useState39 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState40 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState39, 2),
      likesl = _useState40[0],
      setLikesl = _useState40[1];

  var _useState41 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState42 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState41, 2),
      likesu = _useState42[0],
      setLikesu = _useState42[1];

  var _useState43 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState44 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState43, 2),
      wallpaper = _useState44[0],
      setWallpaper = _useState44[1];

  var getUser = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_10__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_10__["PORT"], "/api/users/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUser(result.data);
                setDiscusses(result.data.discusses);
                setHelpdiscusses(result.data.helpdiscusses);
                setLikediscusses(result.data.likediscusses);
                setUnlikediscusses(result.data.unlikediscusses);
                setMcommodities(result.data.mcommodities);
                setSecondhands(result.data.secondhands);
                setGroupbuys(result.data.groupbuys);
                setStores(result.data.stores);
                setCinformations(result.data.cinformations);
                setCollects(result.data.collects);
                setCollects2(result.data.collects2);
                setCollects3(result.data.collects3);
                setCollects4(result.data.collects4);
                setFollowers(result.data.followers);
                setFans(result.data.fans);
                setFollowers2(result.data.followers2);
                setLikesd(result.data.likesd);
                setLikesh(result.data.likesh);
                setLikesl(result.data.likesl);
                setLikesu(result.data.likesu);
                setWallpaper(result.data.wallpaper);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getUser() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getUser();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ProfileInfo, {
    user: user,
    followers: followers,
    followers2: followers2,
    fans: fans,
    wallpaper: wallpaper
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Followers__WEBPACK_IMPORTED_MODULE_6__["default"], {
    uid: uid,
    getUser: getUser
  }), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_PostletterButton__WEBPACK_IMPORTED_MODULE_7__["default"], {
    uid: uid
  })) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"], {
    defaultActiveKey: "1",
    centered: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["MessageOutlined"], null), "\u52A8\u6001"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["CoffeeOutlined"], null), "\u95F2\u804A\u533A"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(DiscussesInfo, {
    discusses: discusses
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["SoundOutlined"], null), "\u6C42\u52A9\u533A"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(HelpdiscussesInfo, {
    helpdiscusses: helpdiscusses
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["LikeOutlined"], null), "\u79CD\u8349\u533A"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikediscussesInfo, {
    likediscusses: likediscusses
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["DislikeOutlined"], null), "\u5410\u69FD\u533A"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(UnlikediscussesInfo, {
    unlikediscusses: unlikediscusses
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["ShoppingOutlined"], null), "\u5546\u54C1"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["AppstoreOutlined"], null), "\u5546\u54C1"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(McommoditiesInfo, {
    mcommodities: mcommodities
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["UserSwitchOutlined"], null), "\u4E8C\u624B"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(SecondhandInfo, {
    secondhands: secondhands
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["TeamOutlined"], null), "\u56E2\u8D2D"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupbuyInfo, {
    groupbuys: groupbuys
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["TeamOutlined"], null), "\u5546\u94FA\u5546\u54C1"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CinformationsInfo, {
    cinformations: cinformations
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["ShopOutlined"], null), "\u5546\u94FA"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["SmileOutlined"], null), "\u6240\u521B\u5546\u94FA"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(MystoreInfo, {
    stores: stores
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["StarOutlined"], null), "\u6536\u85CF"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["AppstoreOutlined"], null), "\u5546\u54C1"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo, {
    collects: collects
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["UserSwitchOutlined"], null), "\u4E8C\u624B"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo2, {
    collects2: collects2
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["TeamOutlined"], null), "\u56E2\u8D2D"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo3, {
    collects3: collects3
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["TeamOutlined"], null), "\u5546\u94FA\u5546\u54C1"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CollectInfo4, {
    collects4: collects4
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["HeartOutlined"], null), "\u70B9\u8D5E"),
    key: "5"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["Tabs"], {
    defaultActiveKey: "1",
    centered: true,
    tabPosition: "left"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["CoffeeOutlined"], null), "\u95F2\u804A\u533A"),
    key: "1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo1, {
    likesd: likesd
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["SoundOutlined"], null), "\u6C42\u52A9\u533A"),
    key: "2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo2, {
    likesh: likesh
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["LikeOutlined"], null), "\u79CD\u8349\u533A"),
    key: "3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo3, {
    likesl: likesl
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPane, {
    tab: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__["DislikeOutlined"], null), "\u5410\u69FD\u533A"),
    key: "4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(LikeInfo4, {
    likesu: likesu
  }))))));
};

/* harmony default export */ __webpack_exports__["default"] = (UserInfoclick);

/***/ }),

/***/ "./src/jsx/ProfileStorePage/ProfileStorePage.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/ProfileStorePage/ProfileStorePage.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _StoreInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StoreInfo */ "./src/jsx/ProfileStorePage/StoreInfo.jsx");


 // import DeleteStoreButton from './DeleteStoreButton'

var ProfileStorePage = function ProfileStorePage(props) {
  var sid = props.match.params.sid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StoreInfo__WEBPACK_IMPORTED_MODULE_2__["default"], {
    sid: sid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfileStorePage);

/***/ }),

/***/ "./src/jsx/ProfileStorePage/SettingStoreForm.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/ProfileStorePage/SettingStoreForm.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");



 //useState表示状态，react里的钩子




var SettingStoreForm = function SettingStoreForm(props) {
  var sid = props.sid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      settings = _useState2[0],
      setSettings = _useState2[1]; //useState内部需要一个参数表示settings的初始值，用个[]空列表代替


  var loadSettings = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var storage, _JSON$parse, username, token, storage2, _JSON$parse2, storename, s_token, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式，读取用getItem,从DOMAIN读取
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              _context.next = 7;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN2"]);

            case 7:
              storage2 = _context.sent;
              //storage是字符串形式，读取用getItem,从DOMAIN读取
              _JSON$parse2 = JSON.parse(storage2), storename = _JSON$parse2.storename, s_token = _JSON$parse2.s_token; //要解构就得先将storage的字符串格式转换成json格式

              _context.next = 11;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/stores/").concat(sid), {
                //调用接口
                method: "GET"
              });

            case 11:
              res = _context.sent;
              _context.next = 14;
              return res.json();

            case 14:
              result = _context.sent;

              //转化为json格式
              if (res.ok) {
                setSettings(result.data); //把响应体里的数据修改状态setSettings存储到状态settings里
              } else {
                alert(result.message);
              }

              _context.next = 21;
              break;

            case 18:
              _context.prev = 18;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 21:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 18]]);
    }));

    return function loadSettings() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    //作用：让组件加载后能够读取并渲染用户当前信息
    loadSettings();
  }, []); //第二个参数加上[]可以防止反复渲染的副作用产生

  var setting = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var storage, _JSON$parse3, username, token, storage2, _JSON$parse4, storename, s_token, description, formData, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse3 = JSON.parse(storage), username = _JSON$parse3.username, token = _JSON$parse3.token; //要解构就得先将storage的字符串格式转换成json格式

              _context2.next = 7;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN2"]);

            case 7:
              storage2 = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse4 = JSON.parse(storage2), storename = _JSON$parse4.storename, s_token = _JSON$parse4.s_token; //要解构就得先将storage的字符串格式转换成json格式

              description = body.description;
              formData = new FormData(); //实例化声明formData

              _context2.next = 13;
              return formData.append('username', username);

            case 13:
              _context2.next = 15;
              return formData.append('token', token);

            case 15:
              _context2.next = 17;
              return formData.append('storename', storename);

            case 17:
              _context2.next = 19;
              return formData.append('s_token', s_token);

            case 19:
              _context2.next = 21;
              return formData.append('description', description);

            case 21:
              _context2.next = 23;
              return formData.append('avatar', document.querySelector('#uploader').files[0]);

            case 23:
              _context2.next = 25;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/stores"), {
                method: "PATCH",
                body: formData
              });

            case 25:
              res = _context2.sent;
              _context2.next = 28;
              return res.json();

            case 28:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                loadSettings(); //调用loadSettings实时更新用户当前数据
              } else {
                alert(result.message);
              }

              _context2.next = 35;
              break;

            case 32:
              _context2.prev = 32;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 35:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 32]]);
    }));

    return function setting(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleSettings = function handleSettings(e) {
    e.preventDefault(); //阻止页面刷新

    var form = document.forms.settingstoreForm;
    var description = form.description.value;
    var body = {
      description: description
    };
    setting(body); //调用register函数并且将body传过去
  };

  return (
    /*#__PURE__*/
    //file表示提交文件类型
    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
      id: "settingstoreForm"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
      controlId: "description"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5546\u94FA\u63CF\u8FF0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
      type: "text",
      placeholder: "\u8BF7\u8F93\u5165\u5546\u94FA\u63CF\u8FF0",
      defaultValue: settings.description
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
      controlId: "uploader"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5934\u50CF"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
      width: 64,
      height: 64,
      className: "mr-3 img-thumbnail round",
      src: settings.avatar ? "/upload/".concat(settings.avatar) : '/img/avatar.jpg',
      alt: "\u5934\u50CF"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
      type: "file",
      placeholder: "\u8BF7\u4E0A\u4F20\u5546\u94FA\u5934\u50CF"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
      variant: "primary",
      type: "submit",
      onClick: function onClick(e) {
        return handleSettings(e);
      }
    }, "\u786E\u8BA4"))
  );
};

/* harmony default export */ __webpack_exports__["default"] = (SettingStoreForm);

/***/ }),

/***/ "./src/jsx/ProfileStorePage/SettingStorePage.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/ProfileStorePage/SettingStorePage.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _SettingStoreForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SettingStoreForm */ "./src/jsx/ProfileStorePage/SettingStoreForm.jsx");




var SettingStorePage = function SettingStorePage(props) {
  var sid = props.match.params.sid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], {
    className: "d-flex justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
    sm: 12,
    md: 6
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SettingStoreForm__WEBPACK_IMPORTED_MODULE_2__["default"], {
    sid: sid
  }))));
};

/* harmony default export */ __webpack_exports__["default"] = (SettingStorePage);

/***/ }),

/***/ "./src/jsx/ProfileStorePage/StoreInfo.jsx":
/*!************************************************!*\
  !*** ./src/jsx/ProfileStorePage/StoreInfo.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _SettingStorePage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SettingStorePage */ "./src/jsx/ProfileStorePage/SettingStorePage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");










var ProfileStoreInfo = function ProfileStoreInfo(props) {
  var store = props.store;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center",
      backgroundPosition: "relative"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    height: 210,
    src: "/img/white.png",
    style: {
      backgroundPosition: "absolute"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "40px",
      backgroundPosition: "relative",
      marginTop: "-200px"
    }
  }, store.storename), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 96,
    height: 96,
    className: "img-thumbnail round",
    style: {
      borderRadius: "100%",
      backgroundPosition: "relative",
      marginTop: "-10px"
    },
    src: store.avatar ? "/upload/".concat(store.avatar) : "/img/avatar.jpg"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "12px",
      color: "gray"
    }
  }, store.description ? store.description : "暂无简介"));
};

var StorecommodityInfo = function StorecommodityInfo(props) {
  var storecommodities = props.storecommodities;
  var lines = storecommodities.map(function (storecommodity, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
      xs: 12,
      sm: 6,
      md: 2,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Body, {
      style: {
        paddingRight: "1px",
        paddingLeft: "1px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"], {
      style: {
        width: "12rem"
      },
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], {
      to: "/storecommodities/".concat(storecommodity._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Img, {
      variant: "top",
      src: "/upload/".concat(storecommodity.pictures[0]),
      style: {
        height: "180px"
      }
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Title, {
      className: "pl-2"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        fontSize: "13px"
      }
    }, storecommodity.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Text, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        color: "red",
        fontSize: "14px"
      }
    }, "\uFFE5", storecommodity.price, "\u5143")))))));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    style: {
      alignContent: "stretch",
      alignItems: "stretch"
    }
  }, lines);
};

var StoreInfo = function StoreInfo(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_8__["userContext"]),
      user = _useContext.user;

  var sid = props.sid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      store = _useState2[0],
      setStore = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      storecommodities = _useState4[0],
      setStorecommodities = _useState4[1];

  var getStore = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/stores/").concat(sid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setStore(result.data);
                setStorecommodities(result.data.storecommodities);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getStore() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getStore();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ProfileStoreInfo, {
    store: store
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], {
    to: "/settingstore/".concat(store._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    size: "sm",
    onClick: function onClick() {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_SettingStorePage__WEBPACK_IMPORTED_MODULE_6__["default"], null);
    }
  }, "\u7F16\u8F91"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(StorecommodityInfo, {
    storecommodities: storecommodities
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (StoreInfo);

/***/ }),

/***/ "./src/jsx/ProfileStorePageclick/Followers2.jsx":
/*!******************************************************!*\
  !*** ./src/jsx/ProfileStorePageclick/Followers2.jsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");








var Followers2 = function Followers2(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser;

  var sid = props.sid,
      getStore = props.getStore;

  var follower2 = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_3__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_3__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_3__["PORT"], "/api/users/followers2/").concat(sid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
                getStore();
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function follower2() {
      return _ref.apply(this, arguments);
    };
  }();

  var unfollower2 = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_3__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_3__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_3__["PORT"], "/api/users/unfollowers2/").concat(sid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function unfollower2() {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.followers2) return null;
  var button = user.followers2.includes(sid) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return unfollower2(sid);
    }
  }, "\u5DF2\u5173\u6CE8") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return follower2(sid);
    }
  }, "\u5173\u6CE8+");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    style: {
      textAlign: "center"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "danger",
    size: "sm"
  }, button));
};

/* harmony default export */ __webpack_exports__["default"] = (Followers2);

/***/ }),

/***/ "./src/jsx/ProfileStorePageclick/ProfileStorePageclick.jsx":
/*!*****************************************************************!*\
  !*** ./src/jsx/ProfileStorePageclick/ProfileStorePageclick.jsx ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _StoreInfoclick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StoreInfoclick */ "./src/jsx/ProfileStorePageclick/StoreInfoclick.jsx");


 // import DeleteStoreButton from './DeleteStoreButton'

var ProfileStorePageclick = function ProfileStorePageclick(props) {
  var sid = props.match.params.sid;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StoreInfoclick__WEBPACK_IMPORTED_MODULE_2__["default"], {
    sid: sid
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (ProfileStorePageclick);

/***/ }),

/***/ "./src/jsx/ProfileStorePageclick/StoreInfoclick.jsx":
/*!**********************************************************!*\
  !*** ./src/jsx/ProfileStorePageclick/StoreInfoclick.jsx ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _Followers2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Followers2 */ "./src/jsx/ProfileStorePageclick/Followers2.jsx");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");










var ProfileStoreInfo = function ProfileStoreInfo(props) {
  var store = props.store;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    style: {
      textAlign: "center",
      backgroundPosition: "relative"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    height: 210,
    src: "/img/white.png",
    style: {
      backgroundPosition: "absolute"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "40px",
      backgroundPosition: "relative",
      marginTop: "-200px"
    }
  }, store.storename), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 96,
    height: 96,
    className: "img-thumbnail round",
    style: {
      borderRadius: "100%",
      backgroundPosition: "relative",
      marginTop: "-10px"
    },
    src: store.avatar ? "/upload/".concat(store.avatar) : "/img/avatar.jpg"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "12px",
      color: "gray"
    }
  }, store.description ? store.description : "暂无简介"));
};

var StorecommodityInfo = function StorecommodityInfo(props) {
  var storecommodities = props.storecommodities;
  var lines = storecommodities.map(function (storecommodity, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
      xs: 12,
      sm: 6,
      md: 2,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Body, {
      style: {
        paddingRight: "1px",
        paddingLeft: "1px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"], {
      style: {
        width: "12rem"
      },
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], {
      to: "/storecommodities/".concat(storecommodity._id)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Img, {
      variant: "top",
      src: "/upload/".concat(storecommodity.pictures[0]),
      style: {
        height: "180px"
      }
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Title, {
      className: "pl-2"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        fontSize: "13px"
      }
    }, storecommodity.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Card"].Text, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", {
      style: {
        color: "red",
        fontSize: "14px"
      }
    }, "\uFFE5", storecommodity.price, "\u5143")))))));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    style: {
      alignContent: "stretch",
      alignItems: "stretch"
    }
  }, lines);
};

var StoreInfoclick = function StoreInfoclick(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_8__["userContext"]),
      user = _useContext.user;

  var sid = props.sid;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      store = _useState2[0],
      setStore = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      storecommodities = _useState4[0],
      setStorecommodities = _useState4[1];

  var getStore = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/stores/").concat(sid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setStore(result.data);
                setStorecommodities(result.data.storecommodities);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function getStore() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    getStore();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ProfileStoreInfo, {
    store: store
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Followers2__WEBPACK_IMPORTED_MODULE_7__["default"], {
    sid: sid,
    getStore: getStore
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(StorecommodityInfo, {
    storecommodities: storecommodities
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (StoreInfoclick);

/***/ }),

/***/ "./src/jsx/RegisterButton.jsx":
/*!************************************!*\
  !*** ./src/jsx/RegisterButton.jsx ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./App */ "./src/jsx/App.jsx");








var RegisterForm = function RegisterForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "registerForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "username"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u7528\u6237\u540D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u7528\u6237\u540D"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "password"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "password",
    placeholder: "\u8BF7\u8F93\u5165\u7528\u6237\u5BC6\u7801"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "confirmpass"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u786E\u8BA4\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "password",
    placeholder: "\u8BF7\u518D\u6B21\u8F93\u5165\u7528\u6237\u5BC6\u7801"
  })));
};

var RegisterButton = function RegisterButton() {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      setAuth = _useContext.setAuth,
      setUser = _useContext.setUser;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var login = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result, data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/login"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (!res.ok) {
                _context.next = 17;
                break;
              }

              alert(result.message);
              closeModal(); //成功提交，自动关闭模态框

              data = {
                username: result.data.username,
                token: result.data.token
              }; //从响应体中获取用户名和token

              _context.next = 13;
              return localStorage.setItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"], JSON.stringify(data));

            case 13:
              //将data存到用户的浏览器setItem(a,b)里的a代表键，b代表值
              setAuth(true);
              setUser({
                _id: result.data._id,
                username: result.data.username,
                avatar: result.data.avatar
              });
              _context.next = 18;
              break;

            case 17:
              alert(result.message);

            case 18:
              _context.next = 23;
              break;

            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 23:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 20]]);
    }));

    return function login(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var post = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交，自动关闭模态框

                login(body);
              } else {
                alert(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function post(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handlePost = function handlePost() {
    var form = document.forms.registerForm;
    var username = form.username.value; //value表示用户输入的值

    var password = form.password.value;
    var confirmpass = form.confirmpass.value;
    var body = {
      username: username,
      password: password,
      confirmpass: confirmpass
    }; //用body将三个变量封装到body里，相当于请求体

    post(body);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-success",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u6CA1\u6709\u8D26\u53F7\uFF0C\u6211\u8981\u6CE8\u518C"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u6CE8\u518C")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(RegisterForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (RegisterButton);

/***/ }),

/***/ "./src/jsx/SecondhandPage/Carousels2.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/SecondhandPage/Carousels2.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var secondhand = props.secondhand;
  if (!secondhand.pictures) return null;
  var pictures = secondhand.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var Carousels2 = function Carousels2(props) {
  var secondhand = props.secondhand,
      loadSecondhand = props.loadSecondhand;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadSecondhand();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    secondhand: secondhand
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Carousels2);

/***/ }),

/***/ "./src/jsx/SecondhandPage/DeleteCButton.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/SecondhandPage/DeleteCButton.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteCButton = function DeleteCButton(props) {
  var cid = props.cid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/comments4/").concat(cid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除评论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  cid: cid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteCButton));

/***/ }),

/***/ "./src/jsx/SecondhandPage/DeleteSButton.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/SecondhandPage/DeleteSButton.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteSButton = function DeleteSButton(props) {
  var sid = props.sid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/secondhands/").concat(sid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/secondhands');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该二手吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  sid: sid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteSButton));

/***/ }),

/***/ "./src/jsx/SecondhandPage/ModifySButton.jsx":
/*!**************************************************!*\
  !*** ./src/jsx/SecondhandPage/ModifySButton.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var sid = props.sid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      settings = _useState2[0],
      setSettings = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      title = _useState4[0],
      setTitle = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      content = _useState6[0],
      setContent = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState7, 2),
      category = _useState8[0],
      setCategory = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState9, 2),
      price = _useState10[0],
      setPrice = _useState10[1];

  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState11, 2),
      number = _useState12[0],
      setNumber = _useState12[1];

  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState13, 2),
      pictures = _useState14[0],
      setPictures = _useState14[1];

  var loadSecondhand = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/secondhands/").concat(sid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.secondhand.title);
                setContent(result.data.secondhand.content);
                setCategory(result.data.secondhand.category);
                setPrice(result.data.secondhand.price);
                setNumber(result.data.secondhand.number);
                setPictures(result.data.secondhand.pictures);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadSecondhand() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadSecondhand();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifygForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u4E8C\u624B\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "category"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u7C7B\u522B"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u7C7B\u522B",
    defaultValue: category
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "price"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4EF7\u683C"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u4E8C\u624B\u4EF7\u683C",
    defaultValue: price
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "number"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u51E0\u6210\u65B0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u54C1\u51E0\u6210\u65B0",
    defaultValue: number
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "uploader"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u4E0A\u4F20\u56FE\u7247"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: settings.pictures ? "/upload/".concat(settings.pictures) : '/img/avatar.jpg',
    alt: "\u5546\u54C1\u56FE\u7247"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "file",
    placeholder: "\u8BF7\u4E0A\u4F20\u56FE\u7247",
    defaultValue: pictures
  })));
};

var ModifySButton = function ModifySButton(props) {
  var sid = props.sid,
      loadSecondhand = props.loadSecondhand;

  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState15, 2),
      show = _useState16[0],
      setShow = _useState16[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var storage, _JSON$parse, username, token, title, content, category, price, number, formData, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //从浏览器中获取用户名和token，拿到的storage是字符串格式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage的字符串格式转换成json格式

              title = body.title, content = body.content, category = body.category, price = body.price, number = body.number;
              formData = new FormData(); //实例化声明formData

              _context2.next = 9;
              return formData.append('username', username);

            case 9:
              _context2.next = 11;
              return formData.append('token', token);

            case 11:
              _context2.next = 13;
              return formData.append('title', title);

            case 13:
              _context2.next = 15;
              return formData.append('content', content);

            case 15:
              _context2.next = 17;
              return formData.append('category', category);

            case 17:
              _context2.next = 19;
              return formData.append('price', price);

            case 19:
              _context2.next = 21;
              return formData.append('number', number);

            case 21:
              _context2.next = 23;
              return formData.append('pictures', document.querySelector('#uploader').files[0]);

            case 23:
              _context2.next = 25;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/secondhands/").concat(sid), {
                method: "PATCH",
                body: formData
              });

            case 25:
              res = _context2.sent;
              _context2.next = 28;
              return res.json();

            case 28:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadSecondhand();
              } else {
                alert(result.message);
              }

              _context2.next = 35;
              break;

            case 32:
              _context2.prev = 32;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 35:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 32]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse2, username, token, form, title, content, category, price, number, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token;
              form = document.forms.modifygForm;
              title = form.title.value;
              content = form.content.value;
              category = form.category.value;
              price = form.price.value;
              number = form.number.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content,
                category: category,
                price: price,
                number: number
              }; //用body将三个变量封装到body里，相当于请求体

              modify(body);

            case 12:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u4E8C\u624B")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    sid: sid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifySButton);

/***/ }),

/***/ "./src/jsx/SecondhandPage/PostSButton.jsx":
/*!************************************************!*\
  !*** ./src/jsx/SecondhandPage/PostSButton.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var PostForm = function PostForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "postForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })));
};

var PostSButton = function PostSButton(props) {
  var sid = props.sid,
      loadSecondhand = props.loadSecondhand;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var post = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/comments4/").concat(sid), {
                //根据商品发布讨论
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交讨论，自动关闭模态框

                loadSecondhand();
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function post(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handlePost = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 2:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              form = document.forms.postForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              post(body);

            case 8:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handlePost() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-success",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u53D1\u5E03\u8BC4\u8BBA"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u53D1\u5E03\u8BC4\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(PostForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (PostSButton);

/***/ }),

/***/ "./src/jsx/SecondhandPage/Postsecondhand.jsx":
/*!***************************************************!*\
  !*** ./src/jsx/SecondhandPage/Postsecondhand.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postsecondhand = function Postsecondhand(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      secondhands = _useState10[0],
      setSecondhands = _useState10[1];

  var loadSecondhands = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/secondhands"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setSecondhands(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadSecondhands() {
      return _ref.apply(this, arguments);
    };
  }();

  var postsecondhand = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/secondhands"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadSecondhands();
                history.push('/secondhands');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postsecondhand(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadSecondhands();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, category, price, number, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content, category = values.category, price = values.price, number = values.number;
              body = {
                title: title,
                content: content,
                category: category,
                price: price,
                number: number,
                filelist: filelist,
                username: username,
                token: token
              };
              postsecondhand(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }(); // const handleChange = ({ fileList }) => {
  //   console.log("这个是jsx里的fileList:",fileList)
  //   setFileList(fileList)
  // }


  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传图片样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u95F2\u7F6E\u4E8C\u624B"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u4E8C\u624B\u5546\u54C1\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入二手商品标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u4E8C\u624B\u5546\u54C1\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入二手商品内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u4E8C\u624B\u5546\u54C1\u7C7B\u578B",
    name: "category",
    rules: [{
      required: true,
      message: "请输入二手商品类型"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u4E8C\u624B\u5546\u54C1\u4EF7\u683C",
    name: "price",
    rules: [{
      required: true,
      message: "请输入二手商品价格"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5546\u54C1\u51E0\u6210\u65B0",
    name: "number",
    rules: [{
      required: true,
      message: "请输入商品几成新"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postsecondhand);

/***/ }),

/***/ "./src/jsx/SecondhandPage/Secondhand.jsx":
/*!***********************************************!*\
  !*** ./src/jsx/SecondhandPage/Secondhand.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _DeleteCButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DeleteCButton */ "./src/jsx/SecondhandPage/DeleteCButton.jsx");











var UserCard = function UserCard(props) {
  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_8__["userContext"]),
      user = _useContext.user,
      setUser = _useContext.setUser,
      auth = _useContext.auth;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var collect2 = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/collects2/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function collect2(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var uncollect2 = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/users/uncollects2/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function uncollect2(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.collects2) return null;
  var button = user.collects2.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return uncollect2(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return collect2(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["StarOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));

  var putin = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(target) {
      var storage, _JSON$parse3, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_7__["DOMAIN"]);

            case 3:
              storage = _context3.sent;
              //storage是字符串形式
              _JSON$parse3 = JSON.parse(storage), username = _JSON$parse3.username, token = _JSON$parse3.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context3.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/shoppingcarts2/putin/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context3.sent;
              _context3.next = 11;
              return res.json();

            case 11:
              result = _context3.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context3.next = 18;
              break;

            case 15:
              _context3.prev = 15;
              _context3.t0 = _context3["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context3.t0.message);

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 15]]);
    }));

    return function putin(_x3) {
      return _ref3.apply(this, arguments);
    };
  }();

  if (!user.shoppingcarts2) return;
  var shoppingcart = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return putin(floor._id);
    }
  }, "\u52A0\u5165\u8D2D\u7269\u8F66");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "orangered",
      fontSize: "28px"
    }
  }, "\uFFE5", floor.price) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, button, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_secondhand.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orange",
      borderRadius: "10px 0px 0px 10px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, shoppingcart)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      color: "white",
      backgroundColor: "orangered",
      borderRadius: "0px 10px 10px 0px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    className: "p-3"
  }, "\u7ACB\u5373\u8D2D\u4E70"))) : null), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteCButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    cid: floor._id
  })) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var GPart = function GPart(props) {
  var secondhand = props.secondhand;
  if (!secondhand.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: secondhand.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: secondhand,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var comment = props.comment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: comment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: comment
  })));
};

var CommentPart = function CommentPart(props) {
  var comments = props.comments;
  var floors = comments.map(function (comment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      comment: comment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Secondhand = function Secondhand(props) {
  var secondhand = props.secondhand,
      loadSecondhand = props.loadSecondhand,
      comments = props.comments;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadSecondhand();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(GPart, {
    secondhand: secondhand
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    style: {
      color: "red",
      fontSize: "18px",
      textAlign: "center"
    }
  }, "\u2193\u8BC4\u8BBA\u533A\u2193"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CommentPart, {
    comments: comments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Secondhand);

/***/ }),

/***/ "./src/jsx/SecondhandPage/SecondhandCard.jsx":
/*!***************************************************!*\
  !*** ./src/jsx/SecondhandPage/SecondhandCard.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var RowCard = function RowCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_4__["userContext"]),
      auth = _useContext.auth;

  var secondhand = props.secondhand;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"], {
    style: {
      width: "10rem"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], {
    to: "/secondhands/".concat(secondhand._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Img, {
    variant: "top",
    src: "/upload/".concat(secondhand.pictures[0]),
    style: {
      height: "140px"
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Title, {
    className: "pl-2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      fontSize: "11px"
    }
  }, secondhand.title.length >= 11 ? secondhand.title[0] + secondhand.title[1] + secondhand.title[2] + secondhand.title[3] + secondhand.title[4] + secondhand.title[5] + secondhand.title[6] + secondhand.title[7] + secondhand.title[8] + secondhand.title[9] + secondhand.title[10] + "..." : secondhand.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Text, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "8px",
      paddingLeft: "6px"
    }
  }, "\uFFE5"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      color: "orangered",
      fontSize: "14px"
    }
  }, secondhand.price, "\u5143"), "\xA0\xA0\xA0\xA0", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    style: {
      fontSize: "12px",
      color: "gray"
    }
  }, secondhand.number, "\u6210\u65B0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    className: "d-flex justify-content-end text-muted"
  }, secondhand.author.stores.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], {
    to: "/profilestoreinfoclick/".concat(secondhand.author.stores[0])
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__["ShopOutlined"], {
    style: {
      fontSize: "20px",
      color: "#0A8ADB",
      paddingRight: "3px"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__["ShopOutlined"], {
    style: {
      fontSize: "20px",
      color: "white",
      paddingRight: "3px"
    }
  }))))))); // {auth
  //     ?(<p className="d-flex justify-content-end pr-3">
  //         {/* <HeartOutlined style={{ fontSize: '23px'}} onClick={()=>alert("功能还未开启！ごめんなさい！")}/> */}
  //         <ShoppingCartOutlined style={{ fontSize: '28px'}}  onClick={()=>alert("功能还未开启！ごめんなさい！")}/>
  //     </p>)
  //     :null
  //     }
};

var SecondhandCard = function SecondhandCard(props) {
  var loadSecondhands = props.loadSecondhands,
      secondhands = props.secondhands;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadSecondhands();
  }, []);
  var rows = secondhands.map(function (secondhand, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Col"], {
      xs: 12,
      sm: 6,
      md: 2,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Card"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RowCard, {
      secondhand: secondhand
    })));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Row"], {
    style: {
      alignContent: "stretch",
      alignItems: "stretch"
    }
  }, rows)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (SecondhandCard);

/***/ }),

/***/ "./src/jsx/SecondhandPage/SecondhandListPage.jsx":
/*!*******************************************************!*\
  !*** ./src/jsx/SecondhandPage/SecondhandListPage.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _SecondhandCard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SecondhandCard */ "./src/jsx/SecondhandPage/SecondhandCard.jsx");
/* harmony import */ var _SecondhandPage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SecondhandPage */ "./src/jsx/SecondhandPage/SecondhandPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");












var SecondhandListTable = function SecondhandListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      secondhands = _useState2[0],
      setSecondhands = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_10__["userContext"]),
      auth = _useContext.auth;

  var loadSecondhands = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_9__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_9__["PORT"], "/api/secondhands"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setSecondhands(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadSecondhands() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u4E8C\u624B\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/postsecondhand"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      color: "#0A8ADB"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_SecondhandCard__WEBPACK_IMPORTED_MODULE_7__["default"], {
    loadSecondhands: loadSecondhands,
    secondhands: secondhands
  }));
};

var SecondhandListPage = function SecondhandListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/secondhands",
    component: SecondhandListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/secondhands/:sid",
    component: _SecondhandPage__WEBPACK_IMPORTED_MODULE_8__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (SecondhandListPage);

/***/ }),

/***/ "./src/jsx/SecondhandPage/SecondhandPage.jsx":
/*!***************************************************!*\
  !*** ./src/jsx/SecondhandPage/SecondhandPage.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Carousels2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Carousels2 */ "./src/jsx/SecondhandPage/Carousels2.jsx");
/* harmony import */ var _Secondhand__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Secondhand */ "./src/jsx/SecondhandPage/Secondhand.jsx");
/* harmony import */ var _PostSButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PostSButton */ "./src/jsx/SecondhandPage/PostSButton.jsx");
/* harmony import */ var _ModifySButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifySButton */ "./src/jsx/SecondhandPage/ModifySButton.jsx");
/* harmony import */ var _DeleteSButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteSButton */ "./src/jsx/SecondhandPage/DeleteSButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var SecondhandPage = function SecondhandPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var sid = props.match.params.sid; //从浏览器地址栏匹配到cid

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      secondhand = _useState2[0],
      setSecondhand = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      comments = _useState4[0],
      setComments = _useState4[1];

  var loadSecondhand = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/secondhands/").concat(sid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setSecondhand(result.data.secondhand);
                setComments(result.data.comments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadSecondhand() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Carousels2__WEBPACK_IMPORTED_MODULE_6__["default"], {
    sid: sid,
    loadSecondhand: loadSecondhand,
    secondhand: secondhand
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, secondhand.author && user.username === secondhand.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifySButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    sid: sid,
    loadSecondhand: loadSecondhand
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteSButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    sid: sid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Secondhand__WEBPACK_IMPORTED_MODULE_7__["default"], {
    sid: sid,
    loadSecondhand: loadSecondhand,
    secondhand: secondhand,
    comments: comments
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_PostSButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    sid: sid,
    loadSecondhand: loadSecondhand
  }) : null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (SecondhandPage);

/***/ }),

/***/ "./src/jsx/StoreButton.jsx":
/*!*********************************!*\
  !*** ./src/jsx/StoreButton.jsx ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./App */ "./src/jsx/App.jsx");








var StoreForm = function StoreForm() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "storeForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "storename"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5546\u94FA\u540D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u94FA\u540D"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "password"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "password",
    placeholder: "\u8BF7\u8F93\u5165\u5546\u94FA\u5BC6\u7801"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "confirmpass"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u786E\u8BA4\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "password",
    placeholder: "\u8BF7\u518D\u6B21\u8F93\u5165\u5546\u94FA\u5BC6\u7801"
  })));
};

var StoreButton = function StoreButton() {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      setAuth2 = _useContext.setAuth2,
      setStore = _useContext.setStore;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  }; //开启函数


  var closeModal = function closeModal() {
    return setShow(false);
  }; //关闭函数


  var login = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result, data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/stores/login"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (!res.ok) {
                _context.next = 17;
                break;
              }

              alert(result.message);
              closeModal(); //成功提交，自动关闭模态框

              data = {
                storename: result.data.storename,
                s_token: result.data.s_token
              }; //从响应体中获取用户名和token

              _context.next = 13;
              return localStorage.setItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN2"], JSON.stringify(data));

            case 13:
              //将data存到用户的浏览器setItem(a,b)里的a代表键，b代表值
              setAuth2(true);
              setStore({
                _id: result.data._id,
                storename: result.data.storename,
                avatar: result.data.avatar
              });
              _context.next = 18;
              break;

            case 17:
              alert(result.message);

            case 18:
              _context.next = 23;
              break;

            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 23:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 20]]);
    }));

    return function login(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var post = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/stores"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal(); //成功提交，自动关闭模态框

                login(body);
              } else {
                alert(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function post(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handlePost = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse, username, token, form, storename, password, confirmpass, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              form = document.forms.storeForm;
              storename = form.storename.value; //value表示用户输入的值

              password = form.password.value;
              confirmpass = form.confirmpass.value;
              body = {
                username: username,
                token: token,
                storename: storename,
                password: password,
                confirmpass: confirmpass
              }; //用body将三个变量封装到body里，相当于请求体

              post(body);

            case 10:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePost() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "outline-success",
    size: "sm",
    onClick: function onClick() {
      return showModal();
    }
  }, "\u6CA1\u6709\u5546\u94FA\uFF0C\u6211\u8981\u7533\u8BF7"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u7533\u8BF7\u5546\u94FA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(StoreForm, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handlePost();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (StoreButton);

/***/ }),

/***/ "./src/jsx/StoreListPage/StoreList.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/StoreListPage/StoreList.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config */ "./src/config.js");





var Row = function Row(props) {
  var store = props.store;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail rounded-circle ",
    src: store.avatar ? "/upload/".concat(store.avatar) : '/img/avatar.jpg'
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], {
    to: "/profilestoreinfoclick/".concat(store._id)
  }, store.storename)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], {
    to: "/profileclick/".concat(store.author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null, store.author.username)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null, new Date(store.posttime).toLocaleString()));
};

var StoreList = function StoreList(props) {
  var loadStores = props.loadStores,
      stores = props.stores;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    loadStores();
  }, []);
  var rows = stores.map(function (store, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Row, {
      key: idx,
      store: store
    });
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Table"], {
    striped: true,
    bordered: true,
    hover: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "\u5546\u94FA\u5934\u50CF"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "\u5546\u94FA\u540D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "\u4F5C\u8005"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "\u53D1\u5E03\u65F6\u95F4"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tbody", null, rows));
};

/* harmony default export */ __webpack_exports__["default"] = (StoreList);

/***/ }),

/***/ "./src/jsx/StoreListPage/StoreListPage.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/StoreListPage/StoreListPage.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _StoreList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StoreList */ "./src/jsx/StoreListPage/StoreList.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../config */ "./src/config.js");









var StoreListTable = function StoreListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      stores = _useState2[0],
      setStores = _useState2[1];

  var loadStores = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_7__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_7__["PORT"], "/api/stores"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setStores(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadStores() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_StoreList__WEBPACK_IMPORTED_MODULE_6__["default"], {
    loadStores: loadStores,
    stores: stores
  }));
};

var StoreListPage = function StoreListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/stores",
    component: StoreListTable
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (StoreListPage);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/CarouselsU.jsx":
/*!**********************************************!*\
  !*** ./src/jsx/UnlikeDisPage/CarouselsU.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);



var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__["Carousel"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "450px",
    width: "450px",
    src: "/upload/".concat(picture)
  })));
};

var PPart = function PPart(props) {
  var unlikediscuss = props.unlikediscuss;
  if (!unlikediscuss.pictures) return null;
  var pictures = unlikediscuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, floors);
};

var CarouselsU = function CarouselsU(props) {
  var unlikediscuss = props.unlikediscuss,
      loadUnlikediscuss = props.loadUnlikediscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadUnlikediscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PPart, {
    unlikediscuss: unlikediscuss
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CarouselsU);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/DeleteUnlikecommentButton.jsx":
/*!*************************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/DeleteUnlikecommentButton.jsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var DeleteUnlikecommentButton = function DeleteUnlikecommentButton(props) {
  var uid = props.uid;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/unlikecomments/").concat(uid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该回复吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  uid: uid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__["DeleteFilled"], {
    style: {
      fontSize: '23px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (DeleteUnlikecommentButton);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/DeleteUnlikediscussButton.jsx":
/*!*************************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/DeleteUnlikediscussButton.jsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var DeleteUnlikediscussButton = function DeleteUnlikediscussButton(props) {
  var uid = props.uid,
      history = props.history;

  var handle = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/unlikediscusses/").concat(uid), {
                method: "DELETE",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                history.push('/unlikediscusses');
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function handle(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
      var _JSON$parse, username, token, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (confirm('确认删除该踩雷讨论吗？')) {
                _JSON$parse = JSON.parse(localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"])), username = _JSON$parse.username, token = _JSON$parse.token;
                body = {
                  username: username,
                  token: token,
                  uid: uid
                };
                handle(body);
              }

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["DeleteFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return handleDelete();
    }
  });
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(DeleteUnlikediscussButton));

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/ModifyButton.jsx":
/*!************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/ModifyButton.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config */ "./src/config.js");








var ModifyForm = function ModifyForm(props) {
  var uid = props.uid; //解构，将父组件did传给ModifyForm的子组件进行使用

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      title = _useState2[0],
      setTitle = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      content = _useState4[0],
      setContent = _useState4[1];

  var loadUnlikediscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/unlikediscusses/").concat(uid), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setTitle(result.data.unlikediscuss.title);
                setContent(result.data.unlikediscuss.content);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadUnlikediscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function () {
    loadUnlikediscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"], {
    id: "modifyForm"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "title"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u6807\u9898"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    type: "text",
    placeholder: "\u8BF7\u8F93\u5165\u8BA8\u8BBA\u6807\u9898",
    defaultValue: title
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Label, null, "\u5185\u5BB9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Form"].Control, {
    as: "textarea",
    rows: "3",
    defaultValue: content
  })));
};

var ModifyButton = function ModifyButton(props) {
  var uid = props.uid,
      loadUnlikediscuss = props.loadUnlikediscuss;

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5, 2),
      show = _useState6[0],
      setShow = _useState6[1]; //默认为关闭状态


  var showModal = function showModal() {
    return setShow(true);
  };

  var closeModal = function closeModal() {
    return setShow(false);
  };

  var modify = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_6__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_6__["PORT"], "/api/unlikediscusses/").concat(uid), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                alert(result.message);
                closeModal();
                loadUnlikediscuss();
              } else {
                alert(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              alert(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function modify(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleModify = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
      var storage, _JSON$parse, username, token, form, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_6__["DOMAIN"]);

            case 2:
              storage = _context3.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.modifyForm;
              title = form.title.value;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                title: title,
                content: content
              };
              modify(body);

            case 9:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handleModify() {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__["EditFilled"], {
    style: {
      fontSize: '26px'
    },
    onClick: function onClick() {
      return showModal();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"], {
    show: show,
    onHide: function onHide() {
      return closeModal();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Header, {
    closeButton: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Title, null, "\u4FEE\u6539\u8BA8\u8BBA")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ModifyForm, {
    uid: uid
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Modal"].Footer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "secondary",
    onClick: function onClick() {
      return closeModal();
    }
  }, "\u5173\u95ED"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Button"], {
    variant: "primary",
    onClick: function onClick() {
      return handleModify();
    }
  }, "\u63D0\u4EA4"))));
};

/* harmony default export */ __webpack_exports__["default"] = (ModifyButton);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/Postunlikediscuss.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/Postunlikediscuss.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../config */ "./src/config.js");






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }






function getBase64(file) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = function () {
      return resolve(reader.result);
    };

    reader.onerror = function (error) {
      return reject(error);
    };
  });
}

var Postunlikediscuss = function Postunlikediscuss(props) {
  var history = props.history;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState, 2),
      previewVisible = _useState2[0],
      setPreviewVisible = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState3, 2),
      previewImage = _useState4[0],
      setPreviewImage = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(''),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState5, 2),
      previewTitle = _useState6[0],
      setPreviewTitle = _useState6[1];

  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState7, 2),
      filelist = _useState8[0],
      setFilelist = _useState8[1];

  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])([]),
      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_useState9, 2),
      unlikediscusses = _useState10[0],
      setUnlikediscusses = _useState10[1];

  var loadUnlikediscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/unlikediscusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUnlikediscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadUnlikediscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  var postunlikediscuss = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_8__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_8__["PORT"], "/api/unlikediscusses"), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 3:
              res = _context2.sent;
              _context2.next = 6;
              return res.json();

            case 6:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].success(result.message);
                loadUnlikediscusses();
                history.push('/unlikediscusses');
              } else {
                antd__WEBPACK_IMPORTED_MODULE_5__["message"].warning(result.message);
              }

              _context2.next = 13;
              break;

            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_5__["message"].error(_context2.t0.message);

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 10]]);
    }));

    return function postunlikediscuss(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  Object(react__WEBPACK_IMPORTED_MODULE_7__["useEffect"])(function () {
    loadUnlikediscusses();
  }, []); //限制上传大小类型

  var handleUpload = function handleUpload(file) {
    var isJPG = file.type === 'image/jpeg';
    var isJPEG = file.type === 'image/jpeg';
    var isPNG = file.type === 'image/png';
    var limit = file.size / 1024 < 200;

    if (!(isJPG || isJPEG || isPNG)) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('你只能上传JPG、JPEG、PNG格式的图片');
    } else if (!limit) {
      antd__WEBPACK_IMPORTED_MODULE_5__["message"].error('超过200KB限制，不允许上传');
    }

    return new Promise(function (resolve, reject) {
      if (!(isJPG || isJPEG || isPNG)) {
        reject(file);
      } else if (!limit) {
        reject(file);
      } else {
        resolve(file);
      }
    });
  };

  var handleCancel = function handleCancel() {
    return setPreviewVisible(false);
  }; //图片缩放


  var handlePreview = /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(file) {
      var isLoading;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              isLoading = file.status === 'uploading';

              if (!(!file.url && !file.preview)) {
                _context3.next = 5;
                break;
              }

              _context3.next = 4;
              return getBase64(file.originFileObj);

            case 4:
              file.preview = _context3.sent;

            case 5:
              setPreviewImage(file.url || file.preview);
              setPreviewVisible(true);
              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));

            case 8:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function handlePreview(_x2) {
      return _ref3.apply(this, arguments);
    };
  }(); //上传表单


  var onFinish = /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(values) {
      var storage, _JSON$parse, username, token, title, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"]);

            case 2:
              storage = _context4.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              title = values.title, content = values.content;
              body = {
                title: title,
                content: content,
                filelist: filelist,
                username: username,
                token: token
              };
              postunlikediscuss(body);

            case 7:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    }));

    return function onFinish(_x3) {
      return _ref4.apply(this, arguments);
    };
  }();

  var handleChange = function handleChange(info) {
    var fl = info.fileList.map(function (f, idx) {
      if (f.response) {
        return f.response.data;
      }
    });
    setFilelist(fl);
    console.log(fl);
  }; //上传的图标样式


  var uploadButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusOutlined"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "ant-upload-text"
  }, "Upload"));
  var layout = {
    labelCol: {
      span: 8
    },
    wrapperCol: {
      span: 9
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "pt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h3", {
    style: {
      textAlign: "center"
    }
  }, "\u5410\u69FD\u5E16"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, layout, {
    name: "basic",
    onFinish: onFinish
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u6807\u9898",
    name: "title",
    rules: [{
      required: true,
      message: "请输入帖子标题"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    label: "\u5185\u5BB9",
    name: "content",
    rules: [{
      required: true,
      message: "请输入帖子内容"
    }]
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Input"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
    className: "clearfix"
  }, "\u56FE\u7247\u4E0A\u4F20:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Upload"], {
    name: "pictures",
    action: "http://localhost:3000/api/upload",
    listType: "picture-card",
    filelist: filelist,
    onPreview: handlePreview,
    onChange: handleChange,
    beforeUpload: handleUpload,
    multiple: true,
    defaultValue: filelist
  }, filelist.length >= 9 ? null : uploadButton), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
    visible: previewVisible,
    title: previewTitle,
    footer: null,
    onCancel: handleCancel
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img", {
    alt: "example",
    style: {
      width: '100%'
    },
    src: previewImage
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Form"].Item, {
    wrapperCol: _objectSpread(_objectSpread({}, layout.wrapperCol), {}, {
      offset: 8
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["Button"], {
    type: "primary",
    htmlType: "submit"
  }, "\u53D1\u5E03"))));
};

/* harmony default export */ __webpack_exports__["default"] = (Postunlikediscuss);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/ReplyForm.jsx":
/*!*********************************************!*\
  !*** ./src/jsx/UnlikeDisPage/ReplyForm.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config */ "./src/config.js");






var ReplyForm = function ReplyForm(props) {
  var uid = props.uid,
      loadUnlikediscuss = props.loadUnlikediscuss;

  var reply = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(body) {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_4__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_4__["PORT"], "/api/unlikecomments/").concat(uid), {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body) //将body转化为字符串来调用接口

              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                alert(result.message);
                loadUnlikediscuss();
                document.forms.replyForm.content.value = "";
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function reply(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleReply = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(e) {
      var storage, _JSON$parse, username, token, form, content, body;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              e.preventDefault(); //阻止页面刷新

              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_4__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token;
              form = document.forms.replyForm;
              content = form.content.value;
              body = {
                username: username,
                token: token,
                content: content
              };
              reply(body);

            case 9:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleReply(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"], {
    id: "replyForm",
    className: "p-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Group, {
    controlId: "content"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Label, null, "\u56DE\u590D"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Form"].Control, {
    as: "textarea",
    rows: "3"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Button"], {
    variant: "primary",
    type: "submit",
    onClick: function onClick(e) {
      return handleReply(e);
    }
  }, "\u63D0\u4EA4"));
};

/* harmony default export */ __webpack_exports__["default"] = (ReplyForm);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/Unlikediscuss.jsx":
/*!*************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/Unlikediscuss.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _DeleteUnlikecommentButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DeleteUnlikecommentButton */ "./src/jsx/UnlikeDisPage/DeleteUnlikecommentButton.jsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_9__);











var UserCard = function UserCard(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      auth = _useContext.auth;

  var author = props.author;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_9__["Link"], {
    to: "/profileclick/".concat(author._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
    width: 64,
    height: 64,
    className: "mr-3 img-thumbnail round",
    src: author.avatar ? "/upload/".concat(author.avatar) : '/img/avatar.jpg',
    alt: author.nickname ? author.nickname : author.username
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("center", null, author.nickname ? author.nickname : author.username));
};

var ContentCard = function ContentCard(props) {
  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_2__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_6__["userContext"]),
      user = _useContext2.user,
      auth = _useContext2.auth,
      setUser = _useContext2.setUser;

  var floor = props.floor,
      hideDeleteCButton = props.hideDeleteCButton;

  var like = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(target) {
      var storage, _JSON$parse, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context.sent;
              //storage是字符串形式
              _JSON$parse = JSON.parse(storage), username = _JSON$parse.username, token = _JSON$parse.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/likes4/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context.sent;
              _context.next = 11;
              return res.json();

            case 11:
              result = _context.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context.next = 18;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context.t0.message);

            case 18:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function like(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var unlike = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(target) {
      var storage, _JSON$parse2, username, token, body, res, result;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              _context2.next = 3;
              return localStorage.getItem(_config__WEBPACK_IMPORTED_MODULE_5__["DOMAIN"]);

            case 3:
              storage = _context2.sent;
              //storage是字符串形式
              _JSON$parse2 = JSON.parse(storage), username = _JSON$parse2.username, token = _JSON$parse2.token; //要解构就得先将storage转换成json格式

              body = {
                username: username,
                token: token
              };
              _context2.next = 8;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_5__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_5__["PORT"], "/api/users/unlikes4/").concat(target), {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
              });

            case 8:
              res = _context2.sent;
              _context2.next = 11;
              return res.json();

            case 11:
              result = _context2.sent;

              if (res.ok) {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].success(result.message);
                setUser(result.data);
              } else {
                antd__WEBPACK_IMPORTED_MODULE_4__["message"].warning(result.message);
              }

              _context2.next = 18;
              break;

            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](0);
              antd__WEBPACK_IMPORTED_MODULE_4__["message"].error(_context2.t0.message);

            case 18:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[0, 15]]);
    }));

    return function unlike(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (!user.likesu) return null;
  var likebutton = user.likesu.includes(floor._id) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return unlike(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeFilled"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    onClick: function onClick() {
      return like(floor._id);
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__["LikeOutlined"], {
    style: {
      fontSize: "24px",
      color: "orangered"
    }
  }));
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h5", null, floor.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, floor.content), auth && floor.author && user.username === floor.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, hideDeleteCButton === false ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_DeleteUnlikecommentButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
    uid: floor._id
  })) : null, hideDeleteCButton === false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, likebutton, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span", {
    style: {
      fontSize: "20px"
    }
  }, floor.dianzans_unlikediscuss.length)) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end text-muted"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, "\u53D1\u8868\u4E8E", new Date(floor.posttime).toLocaleString())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", {
    className: "d-flex justify-content-end m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("small", null, floor.author.description)));
};

var UPart = function UPart(props) {
  var unlikediscuss = props.unlikediscuss;
  if (!unlikediscuss.author) return null;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3 mt-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: unlikediscuss.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: unlikediscuss,
    hideDeleteCButton: false
  })));
};

var Floor = function Floor(props) {
  var unlikecomment = props.unlikecomment;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"], {
    className: "rounded border p-3 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UserCard, {
    author: unlikecomment.author
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__["Media"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ContentCard, {
    floor: unlikecomment
  })));
};

var CPart = function CPart(props) {
  var unlikecomments = props.unlikecomments;
  var floors = unlikecomments.map(function (unlikecomment, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Floor, {
      key: idx,
      unlikecomment: unlikecomment
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, floors);
};

var Unlikediscuss = function Unlikediscuss(props) {
  var unlikecomments = props.unlikecomments,
      unlikediscuss = props.unlikediscuss,
      loadUnlikediscuss = props.loadUnlikediscuss;
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    loadUnlikediscuss();
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(UPart, {
    unlikediscuss: unlikediscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(CPart, {
    unlikecomments: unlikecomments
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Unlikediscuss);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/UnlikediscussList.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/UnlikediscussList.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config */ "./src/config.js");







var Floor = function Floor(props) {
  var picture = props.picture;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    height: "85px",
    width: "105px",
    src: "/upload/".concat(picture),
    style: {
      "float": "left",
      width: "30.33%",
      paddingRight: "2px",
      paddingBottom: "5px",
      paddingLeft: "2px",
      borderRadius: "12px 12px 12px 12px"
    }
  }));
};

var Row1 = function Row1(props) {
  var unlikediscuss = props.unlikediscuss;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(1),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState, 2),
      num = _useState2[0],
      setNum = _useState2[1];

  if (!unlikediscuss.pictures) return null;
  var pictures = unlikediscuss.pictures;
  var floors = pictures.map(function (picture, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Floor, {
      key: idx,
      picture: picture
    }));
  });
  console.log(floors);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__["Card"], {
    style: {
      width: 333
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/unlikediscusses/".concat(unlikediscuss._id)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    width: 32,
    height: 32,
    className: "mr-3 rounded-circle",
    src: unlikediscuss.author.avatar ? "/upload/".concat(unlikediscuss.author.avatar) : '/img/avatar.jpg',
    alt: unlikediscuss.author.nickname ? unlikediscuss.author.nickname : unlikediscuss.author.username
  })), unlikediscuss.author.nickname ? unlikediscuss.author.nickname : unlikediscuss.author.username, "\xA0\xA0", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      fontSize: "11px",
      color: "gray"
    }
  }, "(", new Date(unlikediscuss.posttime).toLocaleString(), ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      fontSize: "15px"
    }
  }, unlikediscuss.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", {
    style: {
      paddingLeft: "10px",
      paddingBottom: "15px"
    }
  }, unlikediscuss.content), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"], {
    to: "/unlikediscusses/".concat(unlikediscuss._id)
  }, floors)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img", {
    src: "/img/1.png",
    height: "35px"
  })));
};

var UnlikediscussList = function UnlikediscussList(props) {
  var loadUnlikediscusses = props.loadUnlikediscusses,
      unlikediscusses = props.unlikediscusses;
  Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
    loadUnlikediscusses();
  }, []); //数据转换成每行的视图

  var rows = unlikediscusses.map(function (unlikediscuss, idx) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Col"], {
      sm: 12,
      md: 4,
      key: idx
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Row1, {
      unlikediscuss: unlikediscuss
    }));
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__["Row"], null, rows));
};

/* harmony default export */ __webpack_exports__["default"] = (UnlikediscussList);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/UnlikediscussListPage.jsx":
/*!*********************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/UnlikediscussListPage.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ant-design/icons */ "@ant-design/icons");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _UnlikediscussList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./UnlikediscussList */ "./src/jsx/UnlikeDisPage/UnlikediscussList.jsx");
/* harmony import */ var _UnlikediscussPage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./UnlikediscussPage */ "./src/jsx/UnlikeDisPage/UnlikediscussPage.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");







 // import PostUnlikediscussesButton from './PostUnlikediscussesButton'






var UnlikediscussListTable = function UnlikediscussListTable() {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      unlikediscusses = _useState2[0],
      setUnlikediscusses = _useState2[1];

  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_11__["userContext"]),
      auth = _useContext.auth;

  var loadUnlikediscusses = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_10__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_10__["PORT"], "/api/unlikediscusses"), {
                method: "GET"
              });

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUnlikediscusses(result.data);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadUnlikediscusses() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__["Container"], null, auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p", {
    style: {
      fontSize: "25px",
      textAlign: "center",
      color: "gray"
    }
  }, "\u5410\u69FD\u533A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], {
    to: "/postunlikediscuss"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__["PlusCircleFilled"], {
    style: {
      fontSize: "35px",
      paddingBottom: "30px",
      color: "gray"
    }
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_UnlikediscussList__WEBPACK_IMPORTED_MODULE_8__["default"], {
    loadUnlikediscusses: loadUnlikediscusses,
    unlikediscusses: unlikediscusses
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__["BackTop"], null));
};

var UnlikediscussListPage = function UnlikediscussListPage() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Switch"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/unlikediscusses",
    component: UnlikediscussListTable
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Route"], {
    exact: true,
    path: "/unlikediscusses/:uid",
    component: _UnlikediscussPage__WEBPACK_IMPORTED_MODULE_9__["default"]
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (UnlikediscussListPage);

/***/ }),

/***/ "./src/jsx/UnlikeDisPage/UnlikediscussPage.jsx":
/*!*****************************************************!*\
  !*** ./src/jsx/UnlikeDisPage/UnlikediscussPage.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap */ "react-bootstrap");
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "antd");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Unlikediscuss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Unlikediscuss */ "./src/jsx/UnlikeDisPage/Unlikediscuss.jsx");
/* harmony import */ var _CarouselsU__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CarouselsU */ "./src/jsx/UnlikeDisPage/CarouselsU.jsx");
/* harmony import */ var _ReplyForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ReplyForm */ "./src/jsx/UnlikeDisPage/ReplyForm.jsx");
/* harmony import */ var _ModifyButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ModifyButton */ "./src/jsx/UnlikeDisPage/ModifyButton.jsx");
/* harmony import */ var _DeleteUnlikediscussButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeleteUnlikediscussButton */ "./src/jsx/UnlikeDisPage/DeleteUnlikediscussButton.jsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../config */ "./src/config.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../App */ "./src/jsx/App.jsx");














var UnlikediscussPage = function UnlikediscussPage(props) {
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(_App__WEBPACK_IMPORTED_MODULE_12__["userContext"]),
      user = _useContext.user,
      auth = _useContext.auth;

  var uid = props.match.params.uid; //从浏览器地址栏匹配到did

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])({}),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
      unlikediscuss = _useState2[0],
      setUnlikediscuss = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])([]),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
      unlikecomments = _useState4[0],
      setUnlikecomments = _useState4[1];

  var loadUnlikediscuss = /*#__PURE__*/function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
      var res, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return fetch("".concat(_config__WEBPACK_IMPORTED_MODULE_11__["HOST"], ":").concat(_config__WEBPACK_IMPORTED_MODULE_11__["PORT"], "/api/unlikediscusses/").concat(uid));

            case 3:
              res = _context.sent;
              _context.next = 6;
              return res.json();

            case 6:
              result = _context.sent;

              if (res.ok) {
                setUnlikediscuss(result.data.unlikediscuss);
                setUnlikecomments(result.data.unlikecomments);
              } else {
                alert(result.message);
              }

              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              alert(_context.t0.message);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10]]);
    }));

    return function loadUnlikediscuss() {
      return _ref.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Container"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 5
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_CarouselsU__WEBPACK_IMPORTED_MODULE_7__["default"], {
    uid: uid,
    loadUnlikediscuss: loadUnlikediscuss,
    unlikediscuss: unlikediscuss
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Col"], {
    sm: 12,
    md: 7
  }, unlikediscuss.author && user.username === unlikediscuss.author.username ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["Row"], {
    className: "m-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__["ButtonGroup"], {
    className: "ml-auto"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ModifyButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
    uid: uid,
    loadUnlikediscuss: loadUnlikediscuss
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_DeleteUnlikediscussButton__WEBPACK_IMPORTED_MODULE_10__["default"], {
    uid: uid
  }))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Unlikediscuss__WEBPACK_IMPORTED_MODULE_6__["default"], {
    uid: uid,
    loadUnlikediscuss: loadUnlikediscuss,
    unlikecomments: unlikecomments,
    unlikediscuss: unlikediscuss
  }), auth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ReplyForm__WEBPACK_IMPORTED_MODULE_8__["default"], {
    uid: uid,
    loadUnlikediscuss: loadUnlikediscuss
  }) : null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__["BackTop"], null));
};

/* harmony default export */ __webpack_exports__["default"] = (UnlikediscussPage);

/***/ }),

/***/ "./src/model/Comment.js":
/*!******************************!*\
  !*** ./src/model/Comment.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Discuss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Discuss */ "./src/model/Discuss.js");



var CommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Discuss'
  }
});
var Comment = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Comment', CommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Comment);

/***/ }),

/***/ "./src/model/Comment2.js":
/*!*******************************!*\
  !*** ./src/model/Comment2.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Discuss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Discuss */ "./src/model/Discuss.js");


 //针对商品发表讨论

var CommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Commodity'
  }
});
var Comment2 = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Comment2', CommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Comment2);

/***/ }),

/***/ "./src/model/Comment3.js":
/*!*******************************!*\
  !*** ./src/model/Comment3.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");


var CommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Groupbuy'
  }
});
var Comment3 = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Comment3', CommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Comment3);

/***/ }),

/***/ "./src/model/Comment4.js":
/*!*******************************!*\
  !*** ./src/model/Comment4.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");


var CommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Secondhand'
  }
});
var Comment4 = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Comment4', CommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Comment4);

/***/ }),

/***/ "./src/model/Commentstore.js":
/*!***********************************!*\
  !*** ./src/model/Commentstore.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);

var CommentstoreSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Storecommodity'
  }
});
var Commentstore = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Commentstore', CommentstoreSchema);
/* harmony default export */ __webpack_exports__["default"] = (Commentstore);

/***/ }),

/***/ "./src/model/Commodity.js":
/*!********************************!*\
  !*** ./src/model/Commodity.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Store */ "./src/model/Store.js");
/* harmony import */ var _Comment2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Comment2 */ "./src/model/Comment2.js");
/* harmony import */ var _Shoppingcart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Shoppingcart */ "./src/model/Shoppingcart.js");
/* harmony import */ var _Shoppingcart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_Shoppingcart__WEBPACK_IMPORTED_MODULE_4__);





var CommoditySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  category: {
    //商品类别
    type: String,
    required: true,
    trim: true
  },
  price: {
    //商品价格
    type: Number,
    required: true
  },
  title: {
    //商品标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //商品内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //商品发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  url: String,
  //商品链接
  author: {
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  // target:{//存储商铺的id
  //     type:mongoose.SchemaTypes.ObjectId,
  //     ref:'Store'
  // },
  comments: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Comment2' //关联到回复模型

  }],
  dianzans_commodity: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Commodity = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Commodity', CommoditySchema);
/* harmony default export */ __webpack_exports__["default"] = (Commodity);

/***/ }),

/***/ "./src/model/Discuss.js":
/*!******************************!*\
  !*** ./src/model/Discuss.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Commodity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Commodity */ "./src/model/Commodity.js");


 //闲聊区帖子

var DiscussSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  title: {
    //讨论标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //讨论内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  comments: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Comment'
  }],
  dianzans_discuss: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Discuss = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Discuss', DiscussSchema);
/* harmony default export */ __webpack_exports__["default"] = (Discuss);

/***/ }),

/***/ "./src/model/File.js":
/*!***************************!*\
  !*** ./src/model/File.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);

var FileSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  filename: {
    type: String,
    required: true,
    unique: true
  },
  mimetype: {
    type: String
  },
  size: {
    type: Number,
    required: true
  },
  author: {
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  target: {
    //存储商铺的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Commodity'
  },
  target2: {
    //存储商铺的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Secondhand'
  },
  target3: {
    //存储商铺的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Groupbuy'
  }
});
var File = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('File', FileSchema);
/* harmony default export */ __webpack_exports__["default"] = (File);

/***/ }),

/***/ "./src/model/Groupbuy.js":
/*!*******************************!*\
  !*** ./src/model/Groupbuy.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Store */ "./src/model/Store.js");
/* harmony import */ var _Comment2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Comment2 */ "./src/model/Comment2.js");




var GroupbuySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  category: {
    //商品类别
    type: String,
    required: true,
    trim: true
  },
  price: {
    //现价
    type: Number,
    required: true
  },
  motoprice: {
    //原价
    type: Number,
    required: true
  },
  title: {
    //商品标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //商品内容
    type: String,
    required: true,
    trim: true
  },
  // number:{
  //     type:Number,
  //     required:true
  // },
  posttime: {
    //商品发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  url: String,
  //商品链接
  author: {
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  target: {
    //存储商铺的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Store'
  },
  comments: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Comment3' //关联到回复模型

  }],
  dianzans_groupbuy: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Groupbuy = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Groupbuy', GroupbuySchema);
/* harmony default export */ __webpack_exports__["default"] = (Groupbuy);

/***/ }),

/***/ "./src/model/Helpcomment.js":
/*!**********************************!*\
  !*** ./src/model/Helpcomment.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Discuss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Discuss */ "./src/model/Discuss.js");



var HelpcommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Helpdiscuss'
  }
});
var Helpcomment = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Helpcomment', HelpcommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Helpcomment);

/***/ }),

/***/ "./src/model/Helpdiscuss.js":
/*!**********************************!*\
  !*** ./src/model/Helpdiscuss.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Commodity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Commodity */ "./src/model/Commodity.js");



var HelpdiscussSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  title: {
    //讨论标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //讨论内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  comments: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Helpcomment'
  }],
  dianzans_helpdiscuss: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Helpdiscuss = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Helpdiscuss', HelpdiscussSchema);
/* harmony default export */ __webpack_exports__["default"] = (Helpdiscuss);

/***/ }),

/***/ "./src/model/Likecomment.js":
/*!**********************************!*\
  !*** ./src/model/Likecomment.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Discuss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Discuss */ "./src/model/Discuss.js");



var LikecommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Likediscuss'
  }
});
var Likecomment = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Likecomment', LikecommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Likecomment);

/***/ }),

/***/ "./src/model/Likediscuss.js":
/*!**********************************!*\
  !*** ./src/model/Likediscuss.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Commodity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Commodity */ "./src/model/Commodity.js");



var LikediscussSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  title: {
    //讨论标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //讨论内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  comments: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Likecomment'
  }],
  dianzans_likediscuss: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Likediscuss = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Likediscuss', LikediscussSchema);
/* harmony default export */ __webpack_exports__["default"] = (Likediscuss);

/***/ }),

/***/ "./src/model/Pcomment.js":
/*!*******************************!*\
  !*** ./src/model/Pcomment.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);

var PcommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复私信内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  target: {
    //存储商品的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Pletter'
  }
});
var Pcomment = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Pcomment', PcommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Pcomment);

/***/ }),

/***/ "./src/model/Pletter.js":
/*!******************************!*\
  !*** ./src/model/Pletter.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
 //私信帖子

var PletterSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //讨论内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  target: {
    //存储商品的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  // pletters:[{
  //     type:mongoose.SchemaTypes.ObjectId,
  //     ref:'Pletter'
  // }],
  pcomments: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Pcomment'
  }]
});
var Pletter = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Pletter', PletterSchema);
/* harmony default export */ __webpack_exports__["default"] = (Pletter);

/***/ }),

/***/ "./src/model/Secondhand.js":
/*!*********************************!*\
  !*** ./src/model/Secondhand.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");


var SecondhandSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  category: {
    //商品类别
    type: String,
    required: true,
    trim: true
  },
  price: {
    //商品价格
    type: Number,
    required: true
  },
  title: {
    //商品标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //商品内容
    type: String,
    required: true,
    trim: true
  },
  number: {
    type: Number,
    required: true
  },
  posttime: {
    //商品发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  url: String,
  //商品链接
  author: {
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  target: {
    //存储商铺的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Store'
  },
  comments: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Comment4' //关联到回复模型

  }],
  dianzans_secondhand: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Secondhand = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Secondhand', SecondhandSchema);
/* harmony default export */ __webpack_exports__["default"] = (Secondhand);

/***/ }),

/***/ "./src/model/Shoppingcart.js":
/*!***********************************!*\
  !*** ./src/model/Shoppingcart.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

// import mongoose from 'mongoose'
// import Commodity from './Commodity'
// const ShoppingcartSchema = new mongoose.Schema({
//     commodities:[{//记录用户放入购物车(未购买)的复数个商品id
//         type:mongoose.SchemaTypes.ObjectId,
//         ref:'Commodity'//关联到商品模型
//     }]
// })
// const Shoppingcart = mongoose.model('Shoppingcart',ShoppingcartSchema)
// export default Shoppingcart

/***/ }),

/***/ "./src/model/Store.js":
/*!****************************!*\
  !*** ./src/model/Store.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);

var StoreSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  storename: {
    //商铺昵称
    type: String,
    unique: true,
    required: true,
    trim: true
  },
  password: {
    //商铺密码
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //商铺创建时间
    type: Date,
    "default": Date.now()
  },
  avatar: String,
  //商铺头像
  description: {
    //商铺个性签名
    type: String,
    trim: true
  },
  s_token: String,
  //商铺登录凭证
  url: String,
  author: {
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  storecommodities: [{
    //记录商铺发布商品相关信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Storecommodity' //关联到商品模型

  }]
});
var Store = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Store', StoreSchema);
/* harmony default export */ __webpack_exports__["default"] = (Store);

/***/ }),

/***/ "./src/model/Storecommodity.js":
/*!*************************************!*\
  !*** ./src/model/Storecommodity.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);

var StorecommoditySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  category: {
    //商品类别
    type: String,
    required: true,
    trim: true
  },
  price: {
    //商品价格
    type: Number,
    required: true
  },
  title: {
    //商品标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //商品内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //商品发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  author: {
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'Store'
  },
  comments: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Commentstore' //关联到回复模型

  }],
  dianzans_storecommodity: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Storecommodity = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Storecommodity', StorecommoditySchema);
/* harmony default export */ __webpack_exports__["default"] = (Storecommodity);

/***/ }),

/***/ "./src/model/Unlikecomment.js":
/*!************************************!*\
  !*** ./src/model/Unlikecomment.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Discuss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Discuss */ "./src/model/Discuss.js");



var UnlikecommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  content: {
    //回复内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'User'
  },
  target: {
    //存储讨论的id
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    requried: true,
    ref: 'Unlikediscuss'
  }
});
var Unlikecomment = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Unlikecomment', UnlikecommentSchema);
/* harmony default export */ __webpack_exports__["default"] = (Unlikecomment);

/***/ }),

/***/ "./src/model/Unlikediscuss.js":
/*!************************************!*\
  !*** ./src/model/Unlikediscuss.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./User */ "./src/model/User.js");
/* harmony import */ var _Commodity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Commodity */ "./src/model/Commodity.js");



var UnlikediscussSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  title: {
    //讨论标题
    type: String,
    required: true,
    trim: true
  },
  content: {
    //讨论内容
    type: String,
    required: true,
    trim: true
  },
  posttime: {
    //发布时间
    type: Date,
    "default": Date.now()
  },
  pictures: [{
    //商品图片
    type: String
  }],
  anonymous: Boolean,
  //匿名选择
  author: {
    //存储用户的信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    required: true,
    ref: 'User'
  },
  comments: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Unlikecomment'
  }],
  dianzans_unlikediscuss: [{
    //记录用户回复过复数个讨论
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User' //关联到回复模型

  }]
});
var Unlikediscuss = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('Unlikediscuss', UnlikediscussSchema);
/* harmony default export */ __webpack_exports__["default"] = (Unlikediscuss);

/***/ }),

/***/ "./src/model/User.js":
/*!***************************!*\
  !*** ./src/model/User.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);

var UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.Schema({
  username: {
    //用户名
    type: String,
    unique: true,
    //不可重复
    required: true,
    //必须输入
    trim: true
  },
  nickname: {
    //用户名
    type: String,
    unique: true,
    //不可重复
    trim: true
  },
  password: {
    //用户密码
    type: String,
    required: true,
    trim: true
  },
  avatar: String,
  //用户头像
  wallpaper: [{
    //个人中心页背景
    type: String
  }],
  description: {
    //用户个性签名
    type: String,
    trim: true
  },
  token: String,
  //用户登录凭证
  discusses: [{
    //记录用户发表过复数个讨论(复数个信息用[{}]包起来)
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Discuss' //关联到讨论模型

  }],
  helpdiscusses: [{
    //记录用户发表过复数个讨论(复数个信息用[{}]包起来)
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Helpdiscuss' //关联到讨论模型

  }],
  likediscusses: [{
    //记录用户发表过复数个讨论(复数个信息用[{}]包起来)
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Likediscuss' //关联到讨论模型

  }],
  unlikediscusses: [{
    //记录用户发表过复数个讨论(复数个信息用[{}]包起来)
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Unlikediscuss' //关联到讨论模型

  }],
  mcommodities: [{
    //记录用户发布过的复数个商品(卖家)
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Commodity' //关联到商品模型

  }],
  bcommodities: [{
    //记录用户已够买过的复数个商品(买家)
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Commodity' //关联到商品模型

  }],
  stores: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Store' //关联到商铺模型

  }],
  cinformations: [{
    //记录商铺发布商品相关信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Storecommodity' //关联到商品模型

  }],
  groupbuys: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Groupbuy'
  }],
  secondhands: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Secondhand'
  }],
  collects: [{
    //收藏夹-->商品类
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Commodity' //关联到商品模型

  }],
  collects2: [{
    //收藏夹-->二手类
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Secondhand' //关联到商品模型

  }],
  collects3: [{
    //收藏夹-->团购类
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Groupbuy' //关联到商品模型

  }],
  collects4: [{
    //收藏夹-->商铺商品
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Storecommodity' //关联到商铺商品模型

  }],
  shoppingcarts: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Commodity' //关联到商品模型

  }],
  shoppingcarts2: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Secondhand' //关联到二手模型

  }],
  shoppingcarts3: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Groupbuy' //关联到团购模型

  }],
  likesd: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Discuss' //点赞

  }],
  likesh: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Helpdiscuss'
  }],
  likesl: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Likediscuss'
  }],
  likesu: [{
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Unlikediscuss'
  }],
  followers: [{
    //关注
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User'
  }],
  followers2: [{
    //关注
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Store'
  }],
  pletters: [{
    //私信信息
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'Pletter'
  }],
  fans: [{
    //关注
    type: mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.SchemaTypes.ObjectId,
    ref: 'User'
  }]
});
var User = mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.model('User', UserSchema);
/* harmony default export */ __webpack_exports__["default"] = (User);

/***/ }),

/***/ "./src/server.js":
/*!***********************!*\
  !*** ./src/server.js ***!
  \***********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ "mongoose");
/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom/server */ "react-dom/server");
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom_server__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "react-router-dom");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express */ "express");
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! body-parser */ "body-parser");
/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(body_parser__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _api_users__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./api/users */ "./src/api/users.js");
/* harmony import */ var _api_discusses__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./api/discusses */ "./src/api/discusses.js");
/* harmony import */ var _api_commodities__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./api/commodities */ "./src/api/commodities.js");
/* harmony import */ var _api_stores__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./api/stores */ "./src/api/stores.js");
/* harmony import */ var _api_groupbuys__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./api/groupbuys */ "./src/api/groupbuys.js");
/* harmony import */ var _api_secondhands__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./api/secondhands */ "./src/api/secondhands.js");
/* harmony import */ var _api_helpdiscusses__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./api/helpdiscusses */ "./src/api/helpdiscusses.js");
/* harmony import */ var _api_likediscusses__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./api/likediscusses */ "./src/api/likediscusses.js");
/* harmony import */ var _api_unlikediscusses__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./api/unlikediscusses */ "./src/api/unlikediscusses.js");
/* harmony import */ var _api_storecommodities__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./api/storecommodities */ "./src/api/storecommodities.js");
/* harmony import */ var _api_pletters__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./api/pletters */ "./src/api/pletters.js");
/* harmony import */ var _jsx_App__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./jsx/App */ "./src/jsx/App.jsx");






var DB = 'mongodb://localhost:27017/bbs';













var template = function template(markup) {
  return "\n        <!DOCTYPE html>\n        <html>\n            <head>\n                <meta charset=\"utf8\"/>\n                <title>\u53E3\u888B\u5609\u56ED</title>\n                <link rel=\"stylesheet\" href=\"/css/bootstrap.min.css\">\n                <link rel=\"stylesheet\" href=\"/css/antd.min.css\">\n                <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/index.css\">\n                <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/foot.css\">\n                <script type=\"text/javascript\" src=\"/js/jquery-1.11.0.min.js\"></script>\n                <script type=\"text/javascript\" src=\"/js/bootstrap.min.js\"></script>\n            </head>\n            <body>\n            <div id=\"root\">".concat(markup, "</div>\n            <!--\u65B0\u54C1\u9996\u53D1-->\n<div>\n\t<div class=\"div_middle div_title\">\n\t\t<div class=\"div_module_title_left\">\n\t\t\t<p class=\"text-left\" style=\"font-size: 30px;\">\u65B0\u54C1\u63A8\u8350\n\t\t\t\t<small style=\"font-size: 14px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u266A\u8FD1\u671F\u70ED\u95E8\u65B0\u54C1\u266A</small>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class=\"div_module_title_right\">\n\t\t\t<a class=\"more_class\" href=\"http://localhost:3000/commodities/\" target=\"_blank\">\u66F4\u591A></a>\n\t\t</div>\n\t</div>\n\t<div id=\"myCarousel_new\" class=\"carousel slide pad_010 b_k\" data-ride=\"carousel\">\n\t\t<!-- \u8F6E\u64AD\uFF08Carousel\uFF09\u6307\u6807 -->\n\t\t<ol class=\"carousel-indicators\" style=\"display: none;\">\n\t\t\t<li data-target=\"#myCarousel_new\" data-slide-to=\"0\" class=\"active\"></li>\n\t\t\t<li data-target=\"#myCarousel_new\" data-slide-to=\"1\"></li>\n        </ol>\n        <!-- \u8F6E\u64AD\uFF08Carousel\uFF09\u9879\u76EE\u5DE6\u952E -->\n\t\t<div class=\"div_new_product_left\">\n\t\t\t<a href=\"#myCarousel_new\" data-slide=\"prev\">\n\t\t\t\t<img id=\"new_product_left\" src=\"/img/index/left_1-01.jpg\">\n\t\t\t</a>\n\t\t</div>\n\t\t<!-- \u8F6E\u64AD\uFF08Carousel\uFF09\u9879\u76EE -->\n\t\t<div class=\"carousel-inner bor_btm\" style=\"float: left; width: 1090px;\">\n\t\t\t<div class=\"item active\" style=\"height: 335px;\">\n\t\t\t\t<a id=\"new_product_01\" href=\"#\" target=\"_blank\">\n\t\t\t\t\t<div class=\"div_new_product_margin\">\n\t\t\t\t\t\t<img id=\"new_product_img_01\" width=\"100%\" src=\"/img/products/eb30.png\">\n\t\t\t\t\t\t<div class=\"new_product_name\" id=\"new_product_name_01\">\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_black\">\u7ECF\u5178\u9ED1 \u84DD\u7259\u8033\u673A</h6>\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE5359\u5143 </h6>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t\t<a id=\"new_product_02\" href=\"https://item.rakuten.co.jp/happymao10/10000013/\" target=\"_blank\">\n\t\t\t\t\t<div class=\"div_new_product_margin\">\n\t\t\t\t\t\t<img id=\"new_product_img_02\" width=\"100%\" src=\"/img/products/vh-wl.png\">\n\t\t\t\t\t\t<div class=\"new_product_name\" id=\"new_product_name_02\">\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_black\">\u89E6\u5C4F\u5F0F \u5145\u7535\u5668</h6>\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE5269\u5143</h6>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t\t<a id=\"new_product_03\" href=\"https://item.rakuten.co.jp/happymao10/10000006/\" target=\"_blank\">\n\t\t\t\t\t<div class=\"div_new_product_margin\">\n\t\t\t\t\t\t<img id=\"new_product_img_03\" width=\"100%\" src=\"/img/products/3life-fan.jpg\">\n\t\t\t\t\t\t<div class=\"new_product_name\" id=\"new_product_name_03\">\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_black\">\u5C0F\u578B \u98CE\u6247</h6>\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE559\u5143</h6>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t\t<a id=\"new_product_04\" href=\"https://item.rakuten.co.jp/happymao10/10000004/\" target=\"_blank\">\n\t\t\t\t\t<div class=\"div_new_product\">\n\t\t\t\t\t\t<img id=\"new_product_img_04\" width=\"100%\" src=\"/img/products/sl-a210.png\">\n\t\t\t\t\t\t<div class=\"new_product_name\" id=\"new_product_name_04\">\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_black\">\u5145\u7535\u5B9D \u4E24\u7528</h6>\n\t\t\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE5199\u5143</h6>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t</div>\n            </div>\n        </div>\n    </div>\n\n    <!--\u4EBA\u6C14\u63A8\u8350-->\n    <div class=\"bg_gray\" style=\"height: 700px;\">\n        <div class=\"div_middle div_title\">\n            <div class=\"div_module_title_left\">\n                <p class=\"text-left\" style=\"font-size: 30px;\">\u4EBA\u6C17\u5546\u54C1\u63A8\u8350&nbsp;&nbsp;&nbsp;\n                    <span id=\"popularity_product\" class=\"small_blue_word_border\">&nbsp;\u4EBA\u6C14\u5546\u54C1\u6392\u884C\u699C&nbsp;</span>\n                    &nbsp;&nbsp;&nbsp;\n                    <span id=\"shopkeeper\" class=\"small_black_word\">&nbsp;\u5C0F\u65BD\u306E\u63A8\u8350&nbsp;</span>\n                </p>\n            </div>\n            <div class=\"div_module_title_right\">\n                <a class=\"more_class\" href=\"http://localhost:3000/commodities/\" target=\"_blank\">\u66F4\u591A></a>\n            </div>\n        </div>\n    <!-- \u4EBA\u6C14\u6392\u884C -->\n        <div id=\"popularity_product_01\" class=\"div_middle\">\n            <a href=\"http://localhost:3000/groupbuys/5f27f1ca4885e6039c4ac549\" target=\"_blank\">\n                <div class=\"div_popularity_product_long\">\n                    <img width=\"100%\" src=\"/img/products/jm-linen-1.png\">\n                    <div class=\"popularity_product_name_long\">\n                        <h6 class=\"small_black_word\" style=\"font-size: 20px;\">\u539F\u5BBF\u7231\u5FC3\u5370\u82B1\u5BBD\u677E\u957F\u8896</h6>\n                        <h6 class=\"new_product_name_word_red\" style=\"font-size: 20px;\">\uFFE589\u5143</h6>\n                    </div>\n                </div>\n            </a>\n        \n            <a href=\"http://localhost:3000/secondhands/5fcbc8b41628a926e04850aa\" target=\"_blank\">\n                <div class=\"div_popularity_product mar_right mar_bottom\">\n                    <img height=\"200px\" width=\"220px\" src=\"/img/products/jm-linen-3.png\">\n                    <div class=\"popularity_product_name\">\n                        <h6 class=\"small_black_word\">\u65E5\u7CFB\u9488\u7EC7\u5806\u5806\u5E3D</h6>\n                        <h6 class=\"new_product_name_word_red\">\uFFE512\u5143</h6>\n                    </div>\n                </div>\n            </a>\n            <a href=\"http://localhost:3000/commodities/5fd1839f9b22b031748fba7a\" target=\"_blank\">\n                <div class=\"div_popularity_product mar_right mar_bottom\">\n                    <img height=\"200px\" width=\"220px\" src=\"/img/products/jm-linen-2.png\">\n                    <div class=\"popularity_product_name\">\n                        <h6 class=\"small_black_word\">\u97E9\u7248\u7761\u8863\u5973\u79CB\u51AC</h6>\n                        <h6 class=\"new_product_name_word_red\">\uFFE535\u5143</h6>\n                    </div>\n                </div>\n            </a>\n            <a href=\"https://item.rakuten.co.jp/happymao10/10000029/\" target=\"_blank\">\n                <div class=\"div_popularity_product mar_bottom\">\n                    <img height=\"200px\" width=\"220px\" src=\"/img/products/jbam-1.jpg\">\n                    <div class=\"popularity_product_name\">\n                        <h6 class=\"small_black_word\">\u7F8A\u7F94\u6BDB\u8338\u8338\u5916\u5957</h6>\n                        <h6 class=\"new_product_name_word_red\">\uFFE5115\u5143</h6>\n                    </div>\n                </div>\n            </a>\n            <a href=\"https://item.rakuten.co.jp/happymao10/10000004/\" target=\"_blank\">\n                <div class=\"div_popularity_product mar_right\">\n                    <img height=\"200px\" width=\"220px\" src=\"/img/products/gm-pcbag.png\">\n                    <div class=\"popularity_product_name\">\n                        <h6 class=\"small_black_word\">JK\u670D \u6708\u4E0B\u9E64</h6>\n                        <h6 class=\"new_product_name_word_red\">\uFFE565\u5143</h6>\n                    </div>\n                </div>\n            </a>\n            <a href=\"https://item.rakuten.co.jp/happymao10/10000008/\" target=\"_blank\">\n                <div class=\"div_popularity_product mar_right\">\n                    <img height=\"200px\" width=\"220px\" src=\"/img/products/rs-w3.png\">\n                    <div class=\"popularity_product_name\">\n                        <h6 class=\"small_black_word\">\u6175\u61D2\u98CE\u7EAF\u8272\u957F\u8896\u6BDB\u8863</h6>\n                        <h6 class=\"new_product_name_word_red\">\uFFE555.69\u5143</h6>\n                    </div>\n                </div>\n            </a>\n            <a href=\"https://item.rakuten.co.jp/happymao10/10000021/\" target=\"_blank\">\n                <div class=\"div_popularity_product\">\n                    <img height=\"200px\" width=\"220px\" src=\"/img/products/jbam-3.jpg\">\n                    <div class=\"popularity_product_name\">\n                        <h6 class=\"small_black_word\">\u62FC\u8272\u7F8A\u7F94\u7ED2\u5916\u5957</h6>\n                        <h6 class=\"new_product_name_word_red\">\uFFE569.56\u5143</h6>\n                    </div>\n                </div>\n            </a>\n        </div>\n        <!-- \u5E97\u957F\u63A8\u8350 -->\n\t<div id=\"popularity_product_02\" class=\"div_middle\" style=\"display: none;\">\n\t\t<a href=\"http://localhost:3000/groupbuys/5f27f1ca4885e6039c4ac549\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product_long\">\n\t\t\t\t<img width=\"100%\" src=\"/img/products/sl-a5p-1.png\">\n\t\t\t\t<div class=\"popularity_product_name_long\">\n\t\t\t\t\t<h6 class=\"small_black_word\" style=\"font-size: 20px;\">\u539F\u5BBF\u7231\u5FC3\u5370\u82B1\u5BBD\u677E\u957F\u8896</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\" style=\"font-size: 20px;\">\uFFE589\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<a href=\"http://localhost:3000/secondhands/5fcbc8b41628a926e04850aa\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product mar_right mar_bottom\">\n\t\t\t\t<img height=\"200px\" width=\"220px\" src=\"/img/products/sl-a5p-2.png\">\n\t\t\t\t<div class=\"popularity_product_name\">\n\t\t\t\t\t<h6 class=\"small_black_word\">\u65E5\u7CFB\u9488\u7EC7\u5806\u5806\u5E3D</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE512\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<a href=\"http://localhost:3000/commodities/5fd1839f9b22b031748fba7a\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product mar_right mar_bottom\">\n\t\t\t\t<img height=\"200px\" width=\"220px\" src=\"/img/products/sl-a5p-3.png\">\n\t\t\t\t<div class=\"popularity_product_name\">\n\t\t\t\t\t<h6 class=\"small_black_word\">\u97E9\u7248\u7761\u8863\u5973\u79CB\u51AC</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE535\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<a href=\"https://item.rakuten.co.jp/happymao10/10000029/\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product mar_bottom\">\n\t\t\t\t<img height=\"200px\" width=\"220px\" src=\"/img/products/jbam-1.png\">\n\t\t\t\t<div class=\"popularity_product_name\">\n\t\t\t\t\t<h6 class=\"small_black_word\">\u7F8A\u7F94\u6BDB\u8338\u8338\u5916\u5957</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE5115\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<a href=\"https://item.rakuten.co.jp/happymao10/10000004/\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product mar_right\">\n\t\t\t\t<img height=\"200px\" width=\"220px\" src=\"/img/products/sl-a210.jpg\">\n\t\t\t\t<div class=\"popularity_product_name\">\n\t\t\t\t\t<h6 class=\"small_black_word\">JK\u670D \u6708\u4E0B\u9E64</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE565\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<a href=\"https://item.rakuten.co.jp/happymao10/10000008/\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product mar_right\">\n\t\t\t\t<img height=\"200px\" width=\"220px\" src=\"/img/products/airwheel-r6.jpg\">\n\t\t\t\t<div class=\"popularity_product_name\">\n\t\t\t\t\t<h6 class=\"small_black_word\">\u6175\u61D2\u98CE\u7EAF\u8272\u957F\u8896\u6BDB\u8863</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE555.69\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<a href=\"https://item.rakuten.co.jp/happymao10/10000021/\" target=\"_blank\">\n\t\t\t<div class=\"div_popularity_product\">\n\t\t\t\t<img height=\"200px\" width=\"220px\" src=\"/img/products/jbam-4.jpg\">\n\t\t\t\t<div class=\"popularity_product_name\">\n\t\t\t\t\t<h6 class=\"small_black_word\">\u62FC\u8272\u7F8A\u7F94\u7ED2\u5916\u5957</h6>\n\t\t\t\t\t<h6 class=\"new_product_name_word_red\">\uFFE569.56\u5143</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t</div>\n</div>\n\n\n<!--\u30B9\u30DE\u30FC\u30C8\u30D5\u30A9\u30F3\u30A2\u30AF\u30BB\u30B5\u30EA\u30FC-->\n<div class=\"div_middle\">\n    <div class=\"div_title\">\n        <div class=\"div_module_title_left\">\n            <p class=\"text-left\" style=\"font-size: 30px;\">LED \u667A\u80FD\u624B\u673A\u58F3</p>\n        </div>\n    </div>\n    <div class=\"div_middle\" style=\"height: 665px;\">\n       <a href=\"https://item.rakuten.co.jp/happymao10/10000001/\" target=\"_blank\">\n            <img class=\"mar_bottom\" src=\"/img/index/banner/banner-iqos-c.jpg\">\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000001/\" target=\"_blank\">\n            <div class=\"div_general mar_right\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/case-i3p.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u7ECF\u5178\u9ED1 \u624B\u673A\u58F3</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE557\u5143</h6>\n                </div>\n            </div>\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000013/\" target=\"_blank\">\n            <div class=\"div_general mar_right\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/b-lgm.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u9632\u6454\u9632\u9707 \u94A2\u5316\u819C</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE529.9\u5143</h6>\n                </div>\n            </div>\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000014/\" target=\"_blank\">\n            <div class=\"div_general mar_right\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/bs-mfi.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u7C89\u4E1D USP\u5145\u7535\u7EBF</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE519.5\u5143</h6>\n                </div>\n            </div>\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000001/\" target=\"_blank\">\n            <div class=\"div_general\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/solove-s3p.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u8584\u8377\u7EFF \u5145\u7535\u5B9D</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE5109\u5143</h6>\n                </div>\n            </div>\n        </a>\n    </div>\n</div>\n<!--\u30D0\u30C3\u30C6\u30EA\u30FC\u30FB\u5145\u96FB\u5668-->\n<div class=\"div_middle\">\n    <div class=\"div_title\">\n        <div class=\"div_module_title_left\">\n            <p class=\"text-left\" style=\"font-size: 30px;\">10000mAh \u5145\u7535\u5B9D \u5C11\u5973\u7C89</p>\n        </div>\n    </div>\n    <div class=\"div_middle\" style=\"height: 300px;\">\n       <a href=\"https://item.rakuten.co.jp/happymao10/10000007/\" target=\"_blank\">\n            <img class=\"mar_bottom\" src=\"/img/index/banner/banner-car-cup.jpg\">\n        </a>\n    </div>\n</div>\n<!--\u65E5\u7528\u54C1\u30FB\u751F\u6D3B\u96D1\u8CA8-->\n<div class=\"div_middle\">\n    <div class=\"div_title\">\n        <div class=\"div_module_title_left\">\n            <p class=\"text-left\" style=\"font-size: 30px;\">\u5C0F\u578B\u76AE\u5305 \u6536\u7EB3\u7528</p>\n        </div>\n    </div>\n    <div class=\"div_middle\" style=\"height: 665px;\">\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000004/\" target=\"_blank\">\n            <img class=\"mar_bottom\" src=\"/img/index/banner/banner-jm-xp.jpg\">\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000004/\" target=\"_blank\">\n            <div class=\"div_general mar_right\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/spovan-sb.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u591C\u5149\u624B\u8868</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE5388\u5143</h6>\n                </div>\n            </div>\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000019/\" target=\"_blank\">\n            <div class=\"div_general mar_right\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/iw-b01.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u7B80\u7EA6\u9ED1\u8272 \u624B\u8868</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE5170\u5143</h6>\n                </div>\n            </div>\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000008/\" target=\"_blank\">\n            <div class=\"div_general mar_right\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/fan-vh.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u9ED1\u65CB\u98CE \u5C0F\u578B\u98CE\u6247</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE5249\u5143</h6>\n                </div>\n            </div>\n        </a>\n        <a href=\"https://item.rakuten.co.jp/happymao10/10000007/\" target=\"_blank\">\n            <div class=\"div_general\">\n                <div class=\"div_general_img\">\n                    <img class=\"general_img\" src=\"/img/products/iqos-jm.png\">\n                </div>\n                <div class=\"general_name\">\n                    <h6 class=\"small_black_word\">\u7537\u58EB\u94B1\u5305</h6>\n                    <h6 class=\"new_product_name_word_red\">\uFFE5499\u5143</h6>\n                </div>\n            </div>\n        </a>\n    </div>\n</div>\n<!--\u7CBE\u9078\u54C1-->\n    <div class=\"bg_gray\">\n        <div class=\"div_middle div_title\">\n            <div class=\"div_module_title_left\">\n                <p class=\"text-left\" style=\"font-size: 30px;\">\u7CBE\u9078\u54C1\n                    <small style=\"font-size: 14px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u3042\u306A\u305F\u306E\u305F\u3081\u306B\u3001\u66AE\u3089\u3057\u30AD\u30E9\u3081\u304F\u826F\u54C1\u3092\u2661</small>\n                </p>\n            </div>\n        </div>\n        <div class=\"div_middle\" style=\"height: 460px; padding-bottom: 80px;\">\n            <div class=\"mar_right\" style=\"width: 690px; height: 380px; float: left;\">\n                <a href=\"#\">\n                    <img style=\"width: 100%; height: 100%;\" src=\"/img/index/selections/Selections_01.jpg\">\n                </a>\n            </div>\n            <div class=\"mar_bottom\" style=\"width: 390px; height: 186px; float: left;\">\n                <a href=\"#\">\n                    <img style=\"width: 100%; height: 100%;\" src=\"/img/index/selections/Selections_02.jpg\">\n                </a>\n            </div>\n            <div style=\"width: 390px; height: 186px; float: left;\">\n                <a href=\"#\">\n                    <img style=\"width: 100%; height: 100%;\" src=\"/img/index/selections/Selections_03.jpg\">\n                </a>\n            </div>\n        </div>\n    </div>\n\n\n            <script src=\"/js/client.js\"></script> \n            <script type=\"text/javascript\" src=\"/js/index.js\"></script>\n            <script type=\"text/javascript\">\n            </body>\n        </html>\n        ");
};

var serverRender = function serverRender(req, res, next) {
  var markup = react_dom_server__WEBPACK_IMPORTED_MODULE_2___default.a.renderToString( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["StaticRouter"], {
    location: req.url,
    context: {}
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_jsx_App__WEBPACK_IMPORTED_MODULE_17__["default"], null)));
  res.status(200).send(template(markup)); //中间键

  next(); //继续运行下一个
};

mongoose__WEBPACK_IMPORTED_MODULE_0___default.a.connect(DB, {
  useNewUrlParser: true,
  useCreateIndex: true,
  useUnifiedTopology: true
}, function (err) {
  //err表示一旦发生错误就阻止程序进行
  if (err) throw err; //阻止程序继续进行

  console.log('connected to database...');
  var app = express__WEBPACK_IMPORTED_MODULE_4___default()(); //用app表示express的实例化

  app.use(express__WEBPACK_IMPORTED_MODULE_4___default.a["static"]('static')); //将static(静态文件)交给express来托管

  app.use(body_parser__WEBPACK_IMPORTED_MODULE_5___default.a.json({
    limit: "2100000kb"
  })); //解析通过json格式传递的数据

  Object(_api_users__WEBPACK_IMPORTED_MODULE_6__["default"])(app);
  Object(_api_discusses__WEBPACK_IMPORTED_MODULE_7__["default"])(app);
  Object(_api_commodities__WEBPACK_IMPORTED_MODULE_8__["default"])(app);
  Object(_api_stores__WEBPACK_IMPORTED_MODULE_9__["default"])(app);
  Object(_api_groupbuys__WEBPACK_IMPORTED_MODULE_10__["default"])(app);
  Object(_api_helpdiscusses__WEBPACK_IMPORTED_MODULE_12__["default"])(app);
  Object(_api_likediscusses__WEBPACK_IMPORTED_MODULE_13__["default"])(app);
  Object(_api_unlikediscusses__WEBPACK_IMPORTED_MODULE_14__["default"])(app);
  Object(_api_secondhands__WEBPACK_IMPORTED_MODULE_11__["default"])(app);
  Object(_api_storecommodities__WEBPACK_IMPORTED_MODULE_15__["default"])(app);
  Object(_api_pletters__WEBPACK_IMPORTED_MODULE_16__["default"])(app);
  app.use(serverRender);
  app.listen(3000);
});

/***/ }),

/***/ "@ant-design/icons":
/*!************************************!*\
  !*** external "@ant-design/icons" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@ant-design/icons");

/***/ }),

/***/ "@babel/runtime/helpers/asyncToGenerator":
/*!**********************************************************!*\
  !*** external "@babel/runtime/helpers/asyncToGenerator" ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/asyncToGenerator");

/***/ }),

/***/ "@babel/runtime/helpers/defineProperty":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/defineProperty" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/defineProperty");

/***/ }),

/***/ "@babel/runtime/helpers/extends":
/*!*************************************************!*\
  !*** external "@babel/runtime/helpers/extends" ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/extends");

/***/ }),

/***/ "@babel/runtime/helpers/slicedToArray":
/*!*******************************************************!*\
  !*** external "@babel/runtime/helpers/slicedToArray" ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/slicedToArray");

/***/ }),

/***/ "@babel/runtime/regenerator":
/*!*********************************************!*\
  !*** external "@babel/runtime/regenerator" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/regenerator");

/***/ }),

/***/ "antd":
/*!***********************!*\
  !*** external "antd" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("antd");

/***/ }),

/***/ "body-parser":
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("body-parser");

/***/ }),

/***/ "browserify-cipher":
/*!************************************!*\
  !*** external "browserify-cipher" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("browserify-cipher");

/***/ }),

/***/ "browserify-sign":
/*!**********************************!*\
  !*** external "browserify-sign" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("browserify-sign");

/***/ }),

/***/ "browserify-sign/algos":
/*!****************************************!*\
  !*** external "browserify-sign/algos" ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("browserify-sign/algos");

/***/ }),

/***/ "create-ecdh":
/*!******************************!*\
  !*** external "create-ecdh" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("create-ecdh");

/***/ }),

/***/ "create-hash":
/*!******************************!*\
  !*** external "create-hash" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("create-hash");

/***/ }),

/***/ "create-hmac":
/*!******************************!*\
  !*** external "create-hmac" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("create-hmac");

/***/ }),

/***/ "diffie-hellman":
/*!*********************************!*\
  !*** external "diffie-hellman" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("diffie-hellman");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("express");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("fs");

/***/ }),

/***/ "images":
/*!*************************!*\
  !*** external "images" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("images");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("mongoose");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("multer");

/***/ }),

/***/ "pbkdf2":
/*!*************************!*\
  !*** external "pbkdf2" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("pbkdf2");

/***/ }),

/***/ "public-encrypt":
/*!*********************************!*\
  !*** external "public-encrypt" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("public-encrypt");

/***/ }),

/***/ "randombytes":
/*!******************************!*\
  !*** external "randombytes" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("randombytes");

/***/ }),

/***/ "randomfill":
/*!*****************************!*\
  !*** external "randomfill" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("randomfill");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react");

/***/ }),

/***/ "react-bootstrap":
/*!**********************************!*\
  !*** external "react-bootstrap" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-bootstrap");

/***/ }),

/***/ "react-dom/server":
/*!***********************************!*\
  !*** external "react-dom/server" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-dom/server");

/***/ }),

/***/ "react-router-bootstrap":
/*!*****************************************!*\
  !*** external "react-router-bootstrap" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-router-bootstrap");

/***/ }),

/***/ "react-router-dom":
/*!***********************************!*\
  !*** external "react-router-dom" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-router-dom");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("uuid");

/***/ })

/******/ });
//# sourceMappingURL=server.js.map